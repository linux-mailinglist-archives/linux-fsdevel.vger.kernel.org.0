Return-Path: <linux-fsdevel+bounces-1800-lists+linux-fsdevel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [147.75.48.161])
	by mail.lfdr.de (Postfix) with ESMTPS id B144C7DEF51
	for <lists+linux-fsdevel@lfdr.de>; Thu,  2 Nov 2023 10:59:25 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id 190E4B21240
	for <lists+linux-fsdevel@lfdr.de>; Thu,  2 Nov 2023 09:59:23 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id AB9A512B60;
	Thu,  2 Nov 2023 09:59:17 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=sony.com header.i=@sony.com header.b="cwEOH2+f"
X-Original-To: linux-fsdevel@vger.kernel.org
Received: from lindbergh.monkeyblade.net (lindbergh.monkeyblade.net [23.128.96.19])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 069B5125B6
	for <linux-fsdevel@vger.kernel.org>; Thu,  2 Nov 2023 09:59:13 +0000 (UTC)
Received: from mx08-001d1705.pphosted.com (mx08-001d1705.pphosted.com [185.183.30.70])
	by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 37DA2111
	for <linux-fsdevel@vger.kernel.org>; Thu,  2 Nov 2023 02:59:08 -0700 (PDT)
Received: from pps.filterd (m0209320.ppops.net [127.0.0.1])
	by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 3A1NL5U7022477;
	Thu, 2 Nov 2023 09:58:54 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : mime-version : content-type :
 content-transfer-encoding; s=S1;
 bh=8Bur+poIx466hhppEkxWs+MTexxHg9eBPhvJ7QNitNY=;
 b=cwEOH2+ff3GKuIRrTl81cydZEwNFdZmJzSSZCPOs7OnUUkbfHLs9mSdLDMTvP7mzqaqC
 h5OcNY0lqWOJlnI5PcAFqf7v1nZJEVuV8K4Gr+3TppWO8EnrxuSXd86BpcuSiPNLSbCU
 qWIeAGMLEGEb0ue1AXn/LsoCvGU5L4EY4eoKnG4eMKAE4NgYrOo5gYjqEIESMnYRaz66
 li8bOsT7Txz3XMvSUBJSjafXOOnjxeWKr/Wrw/YYmqyIAQZMqC/a6/6YDE6xlNu/Ane7
 Wi+58+J5wgTbO1Muqx86lbVolzVaTP6A16X89kdV0fbhpeIv0FP5kUbacsTXLnGbm8aY hw== 
Received: from apc01-sg2-obe.outbound.protection.outlook.com (mail-sgaapc01lp2107.outbound.protection.outlook.com [104.47.26.107])
	by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3u0r6mdht9-1
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
	Thu, 02 Nov 2023 09:58:54 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Mjwwjv+g8C1g2qDoRnBaCLYnd/kBhku4phtcZXRh2msQ6JdaTC55GL6sD+iGEmVqTa5uTNgWsEpz8GjqtO8YZZKBVutd7LbrZDa4VuCcPZdApGkpudIYXaPy1hLydO1pnETf4yjE0im3rZEFCbits3YPzlQr6Bu2CWtyaIf5gBoYOA1YhjetXpej3FI/PTy6G2ywgTJIxWTkGN8MEBcPtkDIfZ3N0C8HV8fEtsEy18QgQM8LOunGvg1KxxynfVVh0lGr4J30b2cz9wsPO2O6pcVo5YpyR5jtjHczRu/thMSjGHC2yRYb7M0D8W22Jx0D9xX5+KRJEYXla+rt/8JryA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=8Bur+poIx466hhppEkxWs+MTexxHg9eBPhvJ7QNitNY=;
 b=RsFeImKlvLJxkPBFGWbwc6bo7IqlfkRRvvSrGgURqw7eTmN9SC7MZxJ1q4b0iiox8Gjua152vvysmxLPJWBi6IJv5peoiqOoBPGgzq5jFG1xg/o7QNVTNRV3RR1oO+dmHtqpWrpZOHij0kob1ebIpjRy2CnxkXHxJPHggvDcTgb3re7gkIeuMNFpJPqdOK0VMjz5JwGMK0x3pukDlu7Y7Z/utwmSN0/6V9jEbsKYPpIJRsd2qw90c67cZlrOWzN3meZFIfAxaFtPc38uwz7fOa7qht7/W/ZZavRI7KL5eiwoqEeX9oYVz+6RpE5lecAe5Tifj3xYnzXItYEfIjzQng==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by TYZPR04MB4432.apcprd04.prod.outlook.com (2603:1096:400:28::12) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6954.20; Thu, 2 Nov
 2023 09:58:47 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a%4]) with mapi id 15.20.6907.025; Thu, 2 Nov 2023
 09:58:47 +0000
From: "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To: "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com"
	<sj1557.seo@samsung.com>
CC: "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com"
	<Wataru.Aoyama@sony.com>
Subject: [PATCH v4 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v4 1/2] exfat: change to get file size from DataLength
Thread-Index: AdoNcqiciL5m7DeAQVy9qFZcQUwgXw==
Date: Thu, 2 Nov 2023 09:58:47 +0000
Message-ID: 
 <PUZPR04MB631680D4803CEE2B1A7F42F381A6A@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|TYZPR04MB4432:EE_
x-ms-office365-filtering-correlation-id: 3321c389-6722-44e4-1298-08dbdb8a4eb1
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 
 lmOQw1lvBnSRSm+QwjeS25CWvuJYgNvjFdGMBM1oyoE8P65VFLzoZCBw1DKBqkz8AEUgrAiDbFqmNzW/nZ4VNUj+oGJASkr9oRhah8X+LahumaPbFfbCUR6Yd4orRExxsAEkzKtcTs+3LFURyThlLI9gFn0IZGkX9km0lrHZVBCPTuO1PSfsMotkgSIntT4kUKPKWqp9WMaDe5CpJK+EUZ65cHxObHUno/QHudQNR07G8Zd/csEdmX1RaoC7B0xw81RU+5dZRd9ybGjMJ2hPtD6RbhNfqOYOXkvjOMHbWfHElhu1Fx90iZIT6mz09l8UXxnbKaFMKpT6riHjOn2fFMtgIFUFVe5LpdJBfNG8aKfbO2INOzS3xljRFpUtItTSJmLn2JQRwlqwYwYMU6YAo/1ZYHPfw02KdECsMHnLScnX3JEtw4Ofn4Ork/whwHb7/nA+4puxI2LUzM2x1fsNnd8RDXqmWSdqwnKo1uvy+Vp0Ue07GoUeD6NIJiVtHah7lmt83KybRETNMheIJU7wOCdrDECjTlV3zWpDRqqkTl9nfXPz01pXplm/t26RSFFfZDo7NWbFnb3TSSyFVkNWoWEdNuX3a9o0imkb1OTJ74LqMiwJ/xl0iNBVw4FdQR/p
x-forefront-antispam-report: 
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(39860400002)(376002)(136003)(366004)(346002)(396003)(230922051799003)(1800799009)(451199024)(64100799003)(186009)(107886003)(71200400001)(6506007)(7696005)(83380400001)(9686003)(8936002)(4326008)(5660300002)(52536014)(41300700001)(8676002)(2906002)(478600001)(26005)(30864003)(76116006)(316002)(110136005)(66476007)(66556008)(66446008)(54906003)(64756008)(66946007)(33656002)(122000001)(82960400001)(86362001)(38100700002)(38070700009)(55016003);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: 
 =?utf-8?B?S2NzN0l3QU9oQVY4S3phcExlbUt2RG0vYldwRS91ZU1nb2ZPTzgyd0UrY1ZP?=
 =?utf-8?B?dDNzY0NXdWU0N1V5ajJtelhhVXNPa2ZuWHo0RTczT2ptRDVJdG93bTZvZmc5?=
 =?utf-8?B?NUFSZzVPOURUbmVqSnROMHN4Z0RwWVpWZ3ZicVBDR3MzbnNWZWVzRzJoVFNG?=
 =?utf-8?B?bVRUcFIrS0lTN2piQXpVQzlaS0NhaE5URStNRVNEQnBDM05KSW9MRit3enJ4?=
 =?utf-8?B?UWxieFRzRVV1ZDVCTDBaZThWL0xGc3l0cVYzcGtkdGZFU2k4SzJrZTgycEJk?=
 =?utf-8?B?blp4OVZDRjVvc3JRYXBmREY0OHlvTzJXUlpjSEx6UW1mUjRERlFjaGYxLzNW?=
 =?utf-8?B?VHB1VHB3am5ZZzJqOGR4MUxBUWQvNWRvWndPVnZJN3FnNkFZZms5b2VMTmxj?=
 =?utf-8?B?VHRGUlVCNEMrV2lGT3FzTmErZzVxcmNDTTB2eEdvWncySFRRck1SR2Vta0FD?=
 =?utf-8?B?OFBJZ3dQcFl6WnJZOTZsb3JXSW9RTXRLN09BSnhuYkdHQkpSaFVaaGNveHZq?=
 =?utf-8?B?Tk9lRjhpWTVBTFh1eGsvUmtGbmxqa0tqRWFMVGpyS05FUFNQVXNvNmRBdkE0?=
 =?utf-8?B?SVozYWUrdUJzUVJ5cDVVQ1lNaysyUjFDclNkTGFoRUJ2MER2amxFM2c2Y2Yv?=
 =?utf-8?B?OURyK1FWdkwyeGkwMjRDLzRTQXZEVHlROGN2dGRjVjBGVnBWelNNN1dobEJo?=
 =?utf-8?B?Y0w5THVuQlU4bzllazQ3b0tNQmZJV20rblJ4OUJzVlVwbUhybUFRWXNIZFFI?=
 =?utf-8?B?ZXJJcEoxOWZrbDRHZDZ1dS9rVDZtQjZEb1l4cElNWmZjR0xJcTZFWUJvK0Rs?=
 =?utf-8?B?Tk4zV3UzbG5CTWtqY1lyekJueXVLNVlQcThCM2svN0dhdGxQYkFUVXVVZ1Ev?=
 =?utf-8?B?bVhpd0h6eGhNNllFakJyZTVZZW5jeTV2OHhCQUVLWVk5NmxTR1NPQkhDZUky?=
 =?utf-8?B?by9PdzRWdGs0ejhLY2dhS2k4VHFzd2dlcTVQVzQ4NnpTRWNpVTIxbUF4Q0Jm?=
 =?utf-8?B?RmRydXNuV0szOGZOQzJBWnAxNnM2N1g2OE03N0IvMXJ4ekxMS3k2eHhDZG14?=
 =?utf-8?B?cFJpUXZWanVmNE1Fb2dCM1dDdjJjL0lJVzN6aHpjeW01Z1BQaEU0SGhDMEQ2?=
 =?utf-8?B?YjhySGdySjFEUmg1MVR6aEltZWtiVnkyOElsMHp3Tk9DYzV5NVhFdXNuQUFY?=
 =?utf-8?B?M3RJMmErbFhtTTN6NURyS21yZ3FNNFlpVTBzNHo5ZVlFWkxLbmM2U3pheTJL?=
 =?utf-8?B?S2wycEsrSllXZmVxRjJFNWJpUkMyK1cwR3ZWQ1pySzV4NGdGeFdBRkUycEov?=
 =?utf-8?B?aWdsVXB1b1FON084QjlBWHdDU0lucnl3UDc4NU1UU0xkeUZuMjRyWXJ0VTND?=
 =?utf-8?B?MS81UFZ2M3VLUHZtTWFLbU5zOW5BdWV6Y3dTOG9pMVd1UFFPbjI2YlVnbXpD?=
 =?utf-8?B?UEwxVHFXZUZOZ2Q4SVdodlVDbEVSYTZMSjFNN0JXTlVpNGRvb2VhVFg5MEJr?=
 =?utf-8?B?MWZhdEhQLzUvSm1IT1puVXdLSFZKUy9SUnBnSEJDWVdQOXM5UW9rUVljRWsr?=
 =?utf-8?B?bUJSZ1JtUnJoWWhISmFCS2d2Vk5KVHF2ZkVTRWN3YnBxRVpaZ0lhNW9zMkFB?=
 =?utf-8?B?L29aMGJvSlZxbzN3RUd6U0ZQTGRkSTdKdmZkbWJuTDMxUTdPSjZUejJHMmNI?=
 =?utf-8?B?RUoxaHY4MTg3d3dsZWdRTDVOY2xBYlVOV1JKMXd0TXF2bkRaKyswYW15Rnk1?=
 =?utf-8?B?R3lXem9ocTZ1QjQwNytTK1NLZzRaUXFFWnRUcUczTWFPMElLT2xZVHNOY2dG?=
 =?utf-8?B?WkxqaUxEQzlkU3VoMjZGNGdUREVYdi9wWUpzYzdjTk5ZeEFUK01SSmFvbG5v?=
 =?utf-8?B?eXNEV1phbU9PNURGbm9saTVKeVZZR2lSUmJyZUV2Tm9vMTdjRkFnWVdqM2Uv?=
 =?utf-8?B?eGVBOW1DS2gvWFpsOXlPK3VjYjJMMjUrZE4rVmFzclJIMkJnL2FZSCtsTUt2?=
 =?utf-8?B?Y3VJYUVUU1F4NnpHRklsSnluK0RqUThrektBZmZPdEU3a1lNQXFvSzFxcXdV?=
 =?utf-8?B?Z0JUcGFIaG1ra0h4NEFuck1OSjNqcjhvNTJFSHd3UlYxNmRXdzgvN01JYkc4?=
 =?utf-8?Q?fN6lS1M5WfRfxxF58bDaP/GBD?=
Precedence: bulk
X-Mailing-List: linux-fsdevel@vger.kernel.org
List-Id: <linux-fsdevel.vger.kernel.org>
List-Subscribe: <mailto:linux-fsdevel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-fsdevel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: 
	SakllNWW1Nl2stoUYMiJqQY7dt/qj0sOUA2/lwd8Jxg0bm8f4f4+VH3zP6wtLx41DazRH86kklESgLxaZ+RllKnvu1AoxqyUHs+a1UpDmvAnyaFeR+p/BRTDRloMZU7ES9d0mhRWql+D6v22iPh5C8kuQatU7sdkmnWjnAgAPX2r/Fw5vAR1GYU42NC125J3cwBqfFyKPU0x/SauVGPfRQKx+i0CYfifGW2GfdtOXdcN0jBShX6NE4PTPUyhChOlm7x25KHxYYstvGMEH66W2vOBRM/gCMBxPiQtylp9xrIBxoJtsL7xS3+oQJDG+pRrHQ2nWaSxs6Rel6GBz7K7iGT3AZoUowBMuXtInKHZPIw+2HKDKuauLS0Y/fg5t8JSav6SO2IPDHD3KH4A6TS75OUotepyEmRzefnNEkCBdENYyWvi14fRXVE/R49PavJhWISn0aY4xZU7iOOduNo+zNUzJ0pNHykafJnLSDNSPen6fm1taTM4uZE3qEMg7B9BrpG1E+5WBAOdJpQyzI+JwOd8qTiQcahH/jNmYJIYtYy4G4MYkuZo5eFvvIEtrHoM6fbKsWRXHGs6JgGi5oqVtQQylLYKrfJOuZvR9vZFG9cKtXGTh/nggOdtJAu7XfZN1L3v08Mcm+SDvvU3AUlKBNUgREa/0OfbyXEI+Iq5Iy6E34G2JKk3Cqg20kxYuiFpR6J6wJhU6Z6Fpo3mGs1hZjwFeQ/ml9/xf6uLHxhPS0Vw5IAfrNka+e0Fmd9O/tAO3ClofXbM4jivZVBK37pRL0a2Umi+aS+ZDy9L9Pq4fZgxAiXTye9wMDFmHmkzQDyVnVvnGpxyY6yG/3JLAr+oMw==
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 3321c389-6722-44e4-1298-08dbdb8a4eb1
X-MS-Exchange-CrossTenant-originalarrivaltime: 02 Nov 2023 09:58:47.4962
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: ZHPAZZeB2CWdsANz4UoYuD2Ym5HCVt7ndoyqSHhLWAue7vPNPF7zIwI2sicKVwqjebz75kt8+U2GfQrk/f+scQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: TYZPR04MB4432
X-Proofpoint-ORIG-GUID: cLlnDUg4dTi3q0pB2FyXqJnHeq6Ie7zG
X-Proofpoint-GUID: cLlnDUg4dTi3q0pB2FyXqJnHeq6Ie7zG
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: cLlnDUg4dTi3q0pB2FyXqJnHeq6Ie7zG
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.987,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-11-01_23,2023-11-01_02,2023-05-22_02

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDIgKw0KIGZzL2V4ZmF0L2ZpbGUuYyAgICAgfCAxMjIgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0NCiBmcy9leGZhdC9pbm9kZS5j
ICAgIHwgIDk2ICsrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0NCiBmcy9leGZhdC9u
YW1laS5jICAgIHwgICA2ICsrKw0KIDQgZmlsZXMgY2hhbmdlZCwgMjA3IGluc2VydGlvbnMoKyks
IDE5IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZXhmYXRfZnMuaCBiL2Zz
L2V4ZmF0L2V4ZmF0X2ZzLmgNCmluZGV4IGE3YTJjMzVkNzRmYi4uZTNiMWY4ZTAyMmRmIDEwMDY0
NA0KLS0tIGEvZnMvZXhmYXQvZXhmYXRfZnMuaA0KKysrIGIvZnMvZXhmYXQvZXhmYXRfZnMuaA0K
QEAgLTIwOCw2ICsyMDgsNyBAQCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5IHsNCiAJdW5zaWduZWQg
Y2hhciBmbGFnczsNCiAJdW5zaWduZWQgc2hvcnQgYXR0cjsNCiAJbG9mZl90IHNpemU7DQorCWxv
ZmZfdCB2YWxpZF9zaXplOw0KIAl1bnNpZ25lZCBpbnQgbnVtX3N1YmRpcnM7DQogCXN0cnVjdCB0
aW1lc3BlYzY0IGF0aW1lOw0KIAlzdHJ1Y3QgdGltZXNwZWM2NCBtdGltZTsNCkBAIC0zMTcsNiAr
MzE4LDcgQEAgc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gew0KIAlsb2ZmX3QgaV9zaXplX2FsaWdu
ZWQ7DQogCS8qIG9uLWRpc2sgcG9zaXRpb24gb2YgZGlyZWN0b3J5IGVudHJ5IG9yIDAgKi8NCiAJ
bG9mZl90IGlfcG9zOw0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCiAJLyogaGFzaCBieSBpX2xvY2F0
aW9uICovDQogCXN0cnVjdCBobGlzdF9ub2RlIGlfaGFzaF9mYXQ7DQogCS8qIHByb3RlY3QgYm1h
cCBhZ2FpbnN0IHRydW5jYXRlICovDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZmlsZS5jIGIvZnMv
ZXhmYXQvZmlsZS5jDQppbmRleCBiZmRmYWZlMDA5OTMuLjdmZWM5YTY2MDczNCAxMDA2NDQNCi0t
LSBhL2ZzL2V4ZmF0L2ZpbGUuYw0KKysrIGIvZnMvZXhmYXQvZmlsZS5jDQpAQCAtMTEsNiArMTEs
NyBAQA0KICNpbmNsdWRlIDxsaW51eC9mc25vdGlmeS5oPg0KICNpbmNsdWRlIDxsaW51eC9zZWN1
cml0eS5oPg0KICNpbmNsdWRlIDxsaW51eC9tc2Rvc19mcy5oPg0KKyNpbmNsdWRlIDxsaW51eC93
cml0ZWJhY2suaD4NCiANCiAjaW5jbHVkZSAiZXhmYXRfcmF3LmgiDQogI2luY2x1ZGUgImV4ZmF0
X2ZzLmgiDQpAQCAtMjYsNiArMjcsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X2NvbnRfZXhwYW5kKHN0
cnVjdCBpbm9kZSAqaW5vZGUsIGxvZmZfdCBzaXplKQ0KIAkJcmV0dXJuIGVycjsNCiANCiAJaW5v
ZGVfc2V0X210aW1lX3RvX3RzKGlub2RlLCBpbm9kZV9zZXRfY3RpbWVfY3VycmVudChpbm9kZSkp
Ow0KKwlFWEZBVF9JKGlub2RlKS0+dmFsaWRfc2l6ZSA9IHNpemU7DQogCW1hcmtfaW5vZGVfZGly
dHkoaW5vZGUpOw0KIA0KIAlpZiAoIUlTX1NZTkMoaW5vZGUpKQ0KQEAgLTE0Niw2ICsxNDgsOSBA
QCBpbnQgX19leGZhdF90cnVuY2F0ZShzdHJ1Y3QgaW5vZGUgKmlub2RlKQ0KIAkJZWktPnN0YXJ0
X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVSOw0KIAl9DQogDQorCWlmIChpX3NpemVfcmVhZChpbm9k
ZSkgPCBlaS0+dmFsaWRfc2l6ZSkNCisJCWVpLT52YWxpZF9zaXplID0gaV9zaXplX3JlYWQoaW5v
ZGUpOw0KKw0KIAlpZiAoZWktPnR5cGUgPT0gVFlQRV9GSUxFKQ0KIAkJZWktPmF0dHIgfD0gRVhG
QVRfQVRUUl9BUkNISVZFOw0KIA0KQEAgLTQ3NCwxNSArNDc5LDEyOCBAQCBpbnQgZXhmYXRfZmls
ZV9mc3luYyhzdHJ1Y3QgZmlsZSAqZmlscCwgbG9mZl90IHN0YXJ0LCBsb2ZmX3QgZW5kLCBpbnQg
ZGF0YXN5bmMpDQogCXJldHVybiBibGtkZXZfaXNzdWVfZmx1c2goaW5vZGUtPmlfc2ItPnNfYmRl
dik7DQogfQ0KIA0KK3N0YXRpYyBpbnQgZXhmYXRfZmlsZV96ZXJvZWRfcmFuZ2Uoc3RydWN0IGZp
bGUgKmZpbGUsIGxvZmZfdCBzdGFydCwgbG9mZl90IGVuZCkNCit7DQorCWludCBlcnI7DQorCXN0
cnVjdCBpbm9kZSAqaW5vZGUgPSBmaWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5v
ZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1h
cHBpbmcgPSBpbm9kZS0+aV9tYXBwaW5nOw0KKwljb25zdCBzdHJ1Y3QgYWRkcmVzc19zcGFjZV9v
cGVyYXRpb25zICpvcHMgPSBtYXBwaW5nLT5hX29wczsNCisNCisJd2hpbGUgKHN0YXJ0IDwgZW5k
KSB7DQorCQl1MzIgemVyb2Zyb20sIGxlbjsNCisJCXN0cnVjdCBwYWdlICpwYWdlID0gTlVMTDsN
CisNCisJCXplcm9mcm9tID0gc3RhcnQgJiAoUEFHRV9TSVpFIC0gMSk7DQorCQlsZW4gPSBQQUdF
X1NJWkUgLSB6ZXJvZnJvbTsNCisJCWlmIChzdGFydCArIGxlbiA+IGVuZCkNCisJCQlsZW4gPSBl
bmQgLSBzdGFydDsNCisNCisJCWVyciA9IG9wcy0+d3JpdGVfYmVnaW4oZmlsZSwgbWFwcGluZywg
c3RhcnQsIGxlbiwgJnBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVycikNCisJCQlnb3RvIG91dDsNCisN
CisJCXplcm9fdXNlcl9zZWdtZW50KHBhZ2UsIHplcm9mcm9tLCB6ZXJvZnJvbSArIGxlbik7DQor
DQorCQllcnIgPSBvcHMtPndyaXRlX2VuZChmaWxlLCBtYXBwaW5nLCBzdGFydCwgbGVuLCBsZW4s
IHBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVyciA8IDApDQorCQkJZ290byBvdXQ7DQorCQlzdGFydCAr
PSBsZW47DQorDQorCQliYWxhbmNlX2RpcnR5X3BhZ2VzX3JhdGVsaW1pdGVkKG1hcHBpbmcpOw0K
KwkJY29uZF9yZXNjaGVkKCk7DQorCX0NCisNCisJZWktPnZhbGlkX3NpemUgPSBlbmQ7DQorCW1h
cmtfaW5vZGVfZGlydHkoaW5vZGUpOw0KKw0KK291dDoNCisJcmV0dXJuIGVycjsNCit9DQorDQor
c3RhdGljIHNzaXplX3QgZXhmYXRfZmlsZV93cml0ZV9pdGVyKHN0cnVjdCBraW9jYiAqaW9jYiwg
c3RydWN0IGlvdl9pdGVyICppdGVyKQ0KK3sNCisJc3NpemVfdCByZXQ7DQorCXN0cnVjdCBmaWxl
ICpmaWxlID0gaW9jYi0+a2lfZmlscDsNCisJc3RydWN0IGlub2RlICppbm9kZSA9IGZpbGVfaW5v
ZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9IEVYRkFUX0koaW5vZGUp
Ow0KKwlsb2ZmX3QgcG9zID0gaW9jYi0+a2lfcG9zOw0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCisN
CisJaW5vZGVfbG9jayhpbm9kZSk7DQorDQorCXZhbGlkX3NpemUgPSBlaS0+dmFsaWRfc2l6ZTsN
CisNCisJcmV0ID0gZ2VuZXJpY193cml0ZV9jaGVja3MoaW9jYiwgaXRlcik7DQorCWlmIChyZXQg
PCAwKQ0KKwkJZ290byB1bmxvY2s7DQorDQorCWlmIChwb3MgPiB2YWxpZF9zaXplKSB7DQorCQly
ZXQgPSBleGZhdF9maWxlX3plcm9lZF9yYW5nZShmaWxlLCB2YWxpZF9zaXplLCBwb3MpOw0KKwkJ
aWYgKHJldCA8IDAgJiYgcmV0ICE9IC1FTk9TUEMpIHsNCisJCQlleGZhdF9lcnIoaW5vZGUtPmlf
c2IsDQorCQkJCSJ3cml0ZTogZmFpbCB0byB6ZXJvIGZyb20gJWxsdSB0byAlbGx1KCVsZCkiLA0K
KwkJCQl2YWxpZF9zaXplLCBwb3MsIHJldCk7DQorCQl9DQorCQlpZiAocmV0IDwgMCkNCisJCQln
b3RvIHVubG9jazsNCisJfQ0KKw0KKwlyZXQgPSBfX2dlbmVyaWNfZmlsZV93cml0ZV9pdGVyKGlv
Y2IsIGl0ZXIpOw0KKwlpZiAocmV0IDwgMCkNCisJCWdvdG8gdW5sb2NrOw0KKw0KKwlpbm9kZV91
bmxvY2soaW5vZGUpOw0KKw0KKwlpZiAocG9zID4gdmFsaWRfc2l6ZSAmJiBpb2NiX2lzX2RzeW5j
KGlvY2IpKSB7DQorCQlzc2l6ZV90IGVyciA9IHZmc19mc3luY19yYW5nZShmaWxlLCB2YWxpZF9z
aXplLCBwb3MgLSAxLA0KKwkJCQlpb2NiLT5raV9mbGFncyAmIElPQ0JfU1lOQyk7DQorCQlpZiAo
ZXJyIDwgMCkNCisJCQlyZXR1cm4gZXJyOw0KKwl9DQorDQorCWlmIChyZXQpDQorCQlyZXQgPSBn
ZW5lcmljX3dyaXRlX3N5bmMoaW9jYiwgcmV0KTsNCisNCisJcmV0dXJuIHJldDsNCisNCit1bmxv
Y2s6DQorCWlub2RlX3VubG9jayhpbm9kZSk7DQorDQorCXJldHVybiByZXQ7DQorfQ0KKw0KK3N0
YXRpYyBpbnQgZXhmYXRfZmlsZV9tbWFwKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QgKnZtYSkNCit7DQorCWludCByZXQ7DQorCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBm
aWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9J
KGlub2RlKTsNCisJbG9mZl90IHN0YXJ0ID0gKChsb2ZmX3Qpdm1hLT52bV9wZ29mZiA8PCBQQUdF
X1NISUZUKTsNCisJbG9mZl90IGVuZCA9IG1pbl90KGxvZmZfdCwgaV9zaXplX3JlYWQoaW5vZGUp
LA0KKwkJCXN0YXJ0ICsgdm1hLT52bV9lbmQgLSB2bWEtPnZtX3N0YXJ0KTsNCisNCisJaWYgKCh2
bWEtPnZtX2ZsYWdzICYgVk1fV1JJVEUpICYmIGVpLT52YWxpZF9zaXplIDwgZW5kKSB7DQorCQly
ZXQgPSBleGZhdF9maWxlX3plcm9lZF9yYW5nZShmaWxlLCBlaS0+dmFsaWRfc2l6ZSwgZW5kKTsN
CisJCWlmIChyZXQgPCAwKSB7DQorCQkJZXhmYXRfZXJyKGlub2RlLT5pX3NiLA0KKwkJCQkgICJt
bWFwOiBmYWlsIHRvIHplcm8gZnJvbSAlbGx1IHRvICVsbHUoJWQpIiwNCisJCQkJICBzdGFydCwg
ZW5kLCByZXQpOw0KKwkJCXJldHVybiByZXQ7DQorCQl9DQorCX0NCisNCisJcmV0dXJuIGdlbmVy
aWNfZmlsZV9tbWFwKGZpbGUsIHZtYSk7DQorfQ0KKw0KIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJh
dGlvbnMgZXhmYXRfZmlsZV9vcGVyYXRpb25zID0gew0KIAkubGxzZWVrCQk9IGdlbmVyaWNfZmls
ZV9sbHNlZWssDQogCS5yZWFkX2l0ZXIJPSBnZW5lcmljX2ZpbGVfcmVhZF9pdGVyLA0KLQkud3Jp
dGVfaXRlcgk9IGdlbmVyaWNfZmlsZV93cml0ZV9pdGVyLA0KKwkud3JpdGVfaXRlcgk9IGV4ZmF0
X2ZpbGVfd3JpdGVfaXRlciwNCiAJLnVubG9ja2VkX2lvY3RsID0gZXhmYXRfaW9jdGwsDQogI2lm
ZGVmIENPTkZJR19DT01QQVQNCiAJLmNvbXBhdF9pb2N0bCA9IGV4ZmF0X2NvbXBhdF9pb2N0bCwN
CiAjZW5kaWYNCi0JLm1tYXAJCT0gZ2VuZXJpY19maWxlX21tYXAsDQorCS5tbWFwCQk9IGV4ZmF0
X2ZpbGVfbW1hcCwNCiAJLmZzeW5jCQk9IGV4ZmF0X2ZpbGVfZnN5bmMsDQogCS5zcGxpY2VfcmVh
ZAk9IGZpbGVtYXBfc3BsaWNlX3JlYWQsDQogCS5zcGxpY2Vfd3JpdGUJPSBpdGVyX2ZpbGVfc3Bs
aWNlX3dyaXRlLA0KZGlmZiAtLWdpdCBhL2ZzL2V4ZmF0L2lub2RlLmMgYi9mcy9leGZhdC9pbm9k
ZS5jDQppbmRleCBlN2ZmNThiOGU2OGMuLjRhMDZkZjNlZDRiNyAxMDA2NDQNCi0tLSBhL2ZzL2V4
ZmF0L2lub2RlLmMNCisrKyBiL2ZzL2V4ZmF0L2lub2RlLmMNCkBAIC03NSw4ICs3NSw3IEBAIGlu
dCBfX2V4ZmF0X3dyaXRlX2lub2RlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIGludCBzeW5jKQ0KIAlp
ZiAoZWktPnN0YXJ0X2NsdSA9PSBFWEZBVF9FT0ZfQ0xVU1RFUikNCiAJCW9uX2Rpc2tfc2l6ZSA9
IDA7DQogDQotCWVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplID0gY3B1X3RvX2xlNjQob25f
ZGlza19zaXplKTsNCi0JZXAyLT5kZW50cnkuc3RyZWFtLnNpemUgPSBlcDItPmRlbnRyeS5zdHJl
YW0udmFsaWRfc2l6ZTsNCisJZXAyLT5kZW50cnkuc3RyZWFtLnNpemUgPSBjcHVfdG9fbGU2NChv
bl9kaXNrX3NpemUpOw0KIAlpZiAob25fZGlza19zaXplKSB7DQogCQllcDItPmRlbnRyeS5zdHJl
YW0uZmxhZ3MgPSBlaS0+ZmxhZ3M7DQogCQllcDItPmRlbnRyeS5zdHJlYW0uc3RhcnRfY2x1ID0g
Y3B1X3RvX2xlMzIoZWktPnN0YXJ0X2NsdSk7DQpAQCAtODUsNiArODQsOCBAQCBpbnQgX19leGZh
dF93cml0ZV9pbm9kZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBpbnQgc3luYykNCiAJCWVwMi0+ZGVu
dHJ5LnN0cmVhbS5zdGFydF9jbHUgPSBFWEZBVF9GUkVFX0NMVVNURVI7DQogCX0NCiANCisJZXAy
LT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUgPSBjcHVfdG9fbGU2NChlaS0+dmFsaWRfc2l6ZSk7
DQorDQogCWV4ZmF0X3VwZGF0ZV9kaXJfY2hrc3VtX3dpdGhfZW50cnlfc2V0KCZlcyk7DQogCXJl
dHVybiBleGZhdF9wdXRfZGVudHJ5X3NldCgmZXMsIHN5bmMpOw0KIH0NCkBAIC0zMDYsMTcgKzMw
NywyNSBAQCBzdGF0aWMgaW50IGV4ZmF0X2dldF9ibG9jayhzdHJ1Y3QgaW5vZGUgKmlub2RlLCBz
ZWN0b3JfdCBpYmxvY2ssDQogCW1hcHBlZF9ibG9ja3MgPSBzYmktPnNlY3RfcGVyX2NsdXMgLSBz
ZWNfb2Zmc2V0Ow0KIAltYXhfYmxvY2tzID0gbWluKG1hcHBlZF9ibG9ja3MsIG1heF9ibG9ja3Mp
Ow0KIA0KLQkvKiBUcmVhdCBuZXdseSBhZGRlZCBibG9jayAvIGNsdXN0ZXIgKi8NCi0JaWYgKGli
bG9jayA8IGxhc3RfYmxvY2spDQotCQljcmVhdGUgPSAwOw0KLQ0KLQlpZiAoY3JlYXRlIHx8IGJ1
ZmZlcl9kZWxheShiaF9yZXN1bHQpKSB7DQotCQlwb3MgPSBFWEZBVF9CTEtfVE9fQigoaWJsb2Nr
ICsgMSksIHNiKTsNCisJcG9zID0gRVhGQVRfQkxLX1RPX0IoKGlibG9jayArIDEpLCBzYik7DQor
CWlmICgoY3JlYXRlICYmIGlibG9jayA+PSBsYXN0X2Jsb2NrKSB8fCBidWZmZXJfZGVsYXkoYmhf
cmVzdWx0KSkgew0KIAkJaWYgKGVpLT5pX3NpemVfb25kaXNrIDwgcG9zKQ0KIAkJCWVpLT5pX3Np
emVfb25kaXNrID0gcG9zOw0KIAl9DQogDQorCW1hcF9iaChiaF9yZXN1bHQsIHNiLCBwaHlzKTsN
CisJaWYgKGJ1ZmZlcl9kZWxheShiaF9yZXN1bHQpKQ0KKwkJY2xlYXJfYnVmZmVyX2RlbGF5KGJo
X3Jlc3VsdCk7DQorDQogCWlmIChjcmVhdGUpIHsNCisJCXNlY3Rvcl90IHZhbGlkX2Jsa3M7DQor
DQorCQl2YWxpZF9ibGtzID0gRVhGQVRfQl9UT19CTEtfUk9VTkRfVVAoZWktPnZhbGlkX3NpemUs
IHNiKTsNCisJCWlmIChpYmxvY2sgPCB2YWxpZF9ibGtzICYmIGlibG9jayArIG1heF9ibG9ja3Mg
Pj0gdmFsaWRfYmxrcykgew0KKwkJCW1heF9ibG9ja3MgPSB2YWxpZF9ibGtzIC0gaWJsb2NrOw0K
KwkJCWdvdG8gZG9uZTsNCisJCX0NCisNCiAJCWVyciA9IGV4ZmF0X21hcF9uZXdfYnVmZmVyKGVp
LCBiaF9yZXN1bHQsIHBvcyk7DQogCQlpZiAoZXJyKSB7DQogCQkJZXhmYXRfZnNfZXJyb3Ioc2Is
DQpAQCAtMzI0LDExICszMzMsMzUgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0
IGlub2RlICppbm9kZSwgc2VjdG9yX3QgaWJsb2NrLA0KIAkJCQkJcG9zLCBlaS0+aV9zaXplX2Fs
aWduZWQpOw0KIAkJCWdvdG8gdW5sb2NrX3JldDsNCiAJCX0NCisJfSBlbHNlIHsNCisJCXNpemVf
dCBiX3NpemUgPSBFWEZBVF9CTEtfVE9fQihtYXhfYmxvY2tzLCBzYik7DQorDQorCQlwb3MgLT0g
c2ItPnNfYmxvY2tzaXplOw0KKwkJaWYgKHBvcyA+PSBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJCS8q
IFJlYWQgb3V0IG9mIHZhbGlkIGRhdGEgKi8NCisJCQljbGVhcl9idWZmZXJfbWFwcGVkKGJoX3Jl
c3VsdCk7DQorCQl9IGVsc2UgaWYgKHBvcyArIGJfc2l6ZSA8PSBlaS0+dmFsaWRfc2l6ZSkgew0K
KwkJCS8qIE5vcm1hbCByZWFkICovDQorCQl9IGVsc2UgaWYgKHBvcyArIHNiLT5zX2Jsb2Nrc2l6
ZSA8PSBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJCS8qIE5vcm1hbCBzaG9ydCByZWFkICovDQorCQkJ
bWF4X2Jsb2NrcyA9IDE7DQorCQl9IGVsc2Ugew0KKwkJCS8qIFJlYWQgYWNyb3NzIHZhbGlkIHNp
emUgKi8NCisJCQlpZiAoYmhfcmVzdWx0LT5iX2ZvbGlvKSB7DQorCQkJCWxvZmZfdCBzaXplID0g
ZWktPnZhbGlkX3NpemUgLSBwb3M7DQorCQkJCWxvZmZfdCBvZmYgPSBwb3MgJiAoUEFHRV9TSVpF
IC0gMSk7DQorDQorCQkJCWZvbGlvX3NldF9iaChiaF9yZXN1bHQsIGJoX3Jlc3VsdC0+Yl9mb2xp
bywgb2ZmKTsNCisJCQkJZXJyID0gYmhfcmVhZChiaF9yZXN1bHQsIDApOw0KKwkJCQlpZiAoZXJy
IDwgMCkNCisJCQkJCWdvdG8gdW5sb2NrX3JldDsNCisNCisJCQkJZm9saW9femVyb19zZWdtZW50
KGJoX3Jlc3VsdC0+Yl9mb2xpbywgb2ZmICsgc2l6ZSwNCisJCQkJCQlvZmYgKyBzYi0+c19ibG9j
a3NpemUpOw0KKwkJCX0NCisJCQltYXhfYmxvY2tzID0gMTsNCisJCX0NCiAJfQ0KLQ0KLQlpZiAo
YnVmZmVyX2RlbGF5KGJoX3Jlc3VsdCkpDQotCQljbGVhcl9idWZmZXJfZGVsYXkoYmhfcmVzdWx0
KTsNCi0JbWFwX2JoKGJoX3Jlc3VsdCwgc2IsIHBoeXMpOw0KIGRvbmU6DQogCWJoX3Jlc3VsdC0+
Yl9zaXplID0gRVhGQVRfQkxLX1RPX0IobWF4X2Jsb2Nrcywgc2IpOw0KIHVubG9ja19yZXQ6DQpA
QCAtMzQzLDYgKzM3NiwxNyBAQCBzdGF0aWMgaW50IGV4ZmF0X3JlYWRfZm9saW8oc3RydWN0IGZp
bGUgKmZpbGUsIHN0cnVjdCBmb2xpbyAqZm9saW8pDQogDQogc3RhdGljIHZvaWQgZXhmYXRfcmVh
ZGFoZWFkKHN0cnVjdCByZWFkYWhlYWRfY29udHJvbCAqcmFjKQ0KIHsNCisJc3RydWN0IGFkZHJl
c3Nfc3BhY2UgKm1hcHBpbmcgPSByYWMtPm1hcHBpbmc7DQorCXN0cnVjdCBpbm9kZSAqaW5vZGUg
PSBtYXBwaW5nLT5ob3N0Ow0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9J
KGlub2RlKTsNCisJbG9mZl90IHBvcyA9IHJlYWRhaGVhZF9wb3MocmFjKTsNCisNCisJLyogUmFu
Z2UgY3Jvc3MgdmFsaWRfc2l6ZSwgcmVhZCBpdCBwYWdlIGJ5IHBhZ2UuICovDQorCWlmIChlaS0+
dmFsaWRfc2l6ZSA8IGlfc2l6ZV9yZWFkKGlub2RlKSAmJg0KKwkgICAgcG9zIDw9IGVpLT52YWxp
ZF9zaXplICYmDQorCSAgICBlaS0+dmFsaWRfc2l6ZSA8IHBvcyArIHJlYWRhaGVhZF9sZW5ndGgo
cmFjKSkNCisJCXJldHVybjsNCisNCiAJbXBhZ2VfcmVhZGFoZWFkKHJhYywgZXhmYXRfZ2V0X2Js
b2NrKTsNCiB9DQogDQpAQCAtMzcwLDkgKzQxNCw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfd3JpdGVf
YmVnaW4oc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nLA0K
IAlpbnQgcmV0Ow0KIA0KIAkqcGFnZXAgPSBOVUxMOw0KLQlyZXQgPSBjb250X3dyaXRlX2JlZ2lu
KGZpbGUsIG1hcHBpbmcsIHBvcywgbGVuLCBwYWdlcCwgZnNkYXRhLA0KLQkJCSAgICAgICBleGZh
dF9nZXRfYmxvY2ssDQotCQkJICAgICAgICZFWEZBVF9JKG1hcHBpbmctPmhvc3QpLT5pX3NpemVf
b25kaXNrKTsNCisJcmV0ID0gYmxvY2tfd3JpdGVfYmVnaW4obWFwcGluZywgcG9zLCBsZW4sIHBh
Z2VwLCBleGZhdF9nZXRfYmxvY2spOw0KIA0KIAlpZiAocmV0IDwgMCkNCiAJCWV4ZmF0X3dyaXRl
X2ZhaWxlZChtYXBwaW5nLCBwb3MrbGVuKTsNCkBAIC00MDAsNiArNDQyLDExIEBAIHN0YXRpYyBp
bnQgZXhmYXRfd3JpdGVfZW5kKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3QgYWRkcmVzc19zcGFj
ZSAqbWFwcGluZywNCiAJaWYgKGVyciA8IGxlbikNCiAJCWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBw
aW5nLCBwb3MrbGVuKTsNCiANCisJaWYgKCEoZXJyIDwgMCkgJiYgcG9zICsgZXJyID4gZWktPnZh
bGlkX3NpemUpIHsNCisJCWVpLT52YWxpZF9zaXplID0gcG9zICsgZXJyOw0KKwkJbWFya19pbm9k
ZV9kaXJ0eShpbm9kZSk7DQorCX0NCisNCiAJaWYgKCEoZXJyIDwgMCkgJiYgIShlaS0+YXR0ciAm
IEVYRkFUX0FUVFJfQVJDSElWRSkpIHsNCiAJCWlub2RlX3NldF9tdGltZV90b190cyhpbm9kZSwg
aW5vZGVfc2V0X2N0aW1lX2N1cnJlbnQoaW5vZGUpKTsNCiAJCWVpLT5hdHRyIHw9IEVYRkFUX0FU
VFJfQVJDSElWRTsNCkBAIC00MTMsNiArNDYwLDggQEAgc3RhdGljIHNzaXplX3QgZXhmYXRfZGly
ZWN0X0lPKHN0cnVjdCBraW9jYiAqaW9jYiwgc3RydWN0IGlvdl9pdGVyICppdGVyKQ0KIHsNCiAJ
c3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcgPSBpb2NiLT5raV9maWxwLT5mX21hcHBpbmc7
DQogCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBtYXBwaW5nLT5ob3N0Ow0KKwlzdHJ1Y3QgZXhmYXRf
aW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBvcyA9IGlvY2ItPmtp
X3BvczsNCiAJbG9mZl90IHNpemUgPSBpb2NiLT5raV9wb3MgKyBpb3ZfaXRlcl9jb3VudChpdGVy
KTsNCiAJaW50IHJ3ID0gaW92X2l0ZXJfcncoaXRlcik7DQogCXNzaXplX3QgcmV0Ow0KQEAgLTQz
Niw4ICs0ODUsMjAgQEAgc3RhdGljIHNzaXplX3QgZXhmYXRfZGlyZWN0X0lPKHN0cnVjdCBraW9j
YiAqaW9jYiwgc3RydWN0IGlvdl9pdGVyICppdGVyKQ0KIAkgKiBjb25kaXRpb24gb2YgZXhmYXRf
Z2V0X2Jsb2NrKCkgYW5kIC0+dHJ1bmNhdGUoKS4NCiAJICovDQogCXJldCA9IGJsb2NrZGV2X2Rp
cmVjdF9JTyhpb2NiLCBpbm9kZSwgaXRlciwgZXhmYXRfZ2V0X2Jsb2NrKTsNCi0JaWYgKHJldCA8
IDAgJiYgKHJ3ICYgV1JJVEUpKQ0KLQkJZXhmYXRfd3JpdGVfZmFpbGVkKG1hcHBpbmcsIHNpemUp
Ow0KKwlpZiAocmV0IDwgMCkgew0KKwkJaWYgKHJ3ICYgV1JJVEUpDQorCQkJZXhmYXRfd3JpdGVf
ZmFpbGVkKG1hcHBpbmcsIHNpemUpOw0KKw0KKwkJaWYgKHJldCAhPSAtRUlPQ0JRVUVVRUQpDQor
CQkJcmV0dXJuIHJldDsNCisJfSBlbHNlDQorCQlzaXplID0gcG9zICsgcmV0Ow0KKw0KKwlpZiAo
KHJ3ICYgUkVBRCkgJiYgcG9zIDwgZWktPnZhbGlkX3NpemUgJiYgZWktPnZhbGlkX3NpemUgPCBz
aXplKSB7DQorCQlpb3ZfaXRlcl9yZXZlcnQoaXRlciwgc2l6ZSAtIGVpLT52YWxpZF9zaXplKTsN
CisJCWlvdl9pdGVyX3plcm8oc2l6ZSAtIGVpLT52YWxpZF9zaXplLCBpdGVyKTsNCisJfQ0KKw0K
IAlyZXR1cm4gcmV0Ow0KIH0NCiANCkBAIC01MzcsNiArNTk4LDcgQEAgc3RhdGljIGludCBleGZh
dF9maWxsX2lub2RlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBleGZhdF9kaXJfZW50cnkg
KmluZm8pDQogCWVpLT5zdGFydF9jbHUgPSBpbmZvLT5zdGFydF9jbHU7DQogCWVpLT5mbGFncyA9
IGluZm8tPmZsYWdzOw0KIAllaS0+dHlwZSA9IGluZm8tPnR5cGU7DQorCWVpLT52YWxpZF9zaXpl
ID0gaW5mby0+dmFsaWRfc2l6ZTsNCiANCiAJZWktPnZlcnNpb24gPSAwOw0KIAllaS0+aGludF9z
dGF0LmVpZHggPSAwOw0KZGlmZiAtLWdpdCBhL2ZzL2V4ZmF0L25hbWVpLmMgYi9mcy9leGZhdC9u
YW1laS5jDQppbmRleCA1ZDczN2UwYjYzOWEuLjljNTQ5ZmQxMWZjOCAxMDA2NDQNCi0tLSBhL2Zz
L2V4ZmF0L25hbWVpLmMNCisrKyBiL2ZzL2V4ZmF0L25hbWVpLmMNCkBAIC00MDYsNiArNDA2LDcg
QEAgc3RhdGljIGludCBleGZhdF9maW5kX2VtcHR5X2VudHJ5KHN0cnVjdCBpbm9kZSAqaW5vZGUs
DQogCQlpX3NpemVfd3JpdGUoaW5vZGUsIHNpemUpOw0KIAkJZWktPmlfc2l6ZV9vbmRpc2sgKz0g
c2JpLT5jbHVzdGVyX3NpemU7DQogCQllaS0+aV9zaXplX2FsaWduZWQgKz0gc2JpLT5jbHVzdGVy
X3NpemU7DQorCQllaS0+dmFsaWRfc2l6ZSArPSBzYmktPmNsdXN0ZXJfc2l6ZTsNCiAJCWVpLT5m
bGFncyA9IHBfZGlyLT5mbGFnczsNCiAJCWlub2RlLT5pX2Jsb2NrcyArPSBzYmktPmNsdXN0ZXJf
c2l6ZSA+PiA5Ow0KIAl9DQpAQCAtNTU4LDYgKzU1OSw4IEBAIHN0YXRpYyBpbnQgZXhmYXRfYWRk
X2VudHJ5KHN0cnVjdCBpbm9kZSAqaW5vZGUsIGNvbnN0IGNoYXIgKnBhdGgsDQogCQlpbmZvLT5z
aXplID0gY2x1X3NpemU7DQogCQlpbmZvLT5udW1fc3ViZGlycyA9IEVYRkFUX01JTl9TVUJESVI7
DQogCX0NCisJaW5mby0+dmFsaWRfc2l6ZSA9IGluZm8tPnNpemU7DQorDQogCW1lbXNldCgmaW5m
by0+Y3J0aW1lLCAwLCBzaXplb2YoaW5mby0+Y3J0aW1lKSk7DQogCW1lbXNldCgmaW5mby0+bXRp
bWUsIDAsIHNpemVvZihpbmZvLT5tdGltZSkpOw0KIAltZW1zZXQoJmluZm8tPmF0aW1lLCAwLCBz
aXplb2YoaW5mby0+YXRpbWUpKTsNCkBAIC02NjAsNiArNjYzLDggQEAgc3RhdGljIGludCBleGZh
dF9maW5kKHN0cnVjdCBpbm9kZSAqZGlyLCBzdHJ1Y3QgcXN0ciAqcW5hbWUsDQogCWluZm8tPnR5
cGUgPSBleGZhdF9nZXRfZW50cnlfdHlwZShlcCk7DQogCWluZm8tPmF0dHIgPSBsZTE2X3RvX2Nw
dShlcC0+ZGVudHJ5LmZpbGUuYXR0cik7DQogCWluZm8tPnNpemUgPSBsZTY0X3RvX2NwdShlcDIt
PmRlbnRyeS5zdHJlYW0udmFsaWRfc2l6ZSk7DQorCWluZm8tPnZhbGlkX3NpemUgPSBsZTY0X3Rv
X2NwdShlcDItPmRlbnRyeS5zdHJlYW0udmFsaWRfc2l6ZSk7DQorCWluZm8tPnNpemUgPSBsZTY0
X3RvX2NwdShlcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSk7DQogCWlmIChpbmZvLT5zaXplID09IDAp
IHsNCiAJCWluZm8tPmZsYWdzID0gQUxMT0NfTk9fRkFUX0NIQUlOOw0KIAkJaW5mby0+c3RhcnRf
Y2x1ID0gRVhGQVRfRU9GX0NMVVNURVI7DQpAQCAtMTI4OCw2ICsxMjkzLDcgQEAgc3RhdGljIGlu
dCBfX2V4ZmF0X3JlbmFtZShzdHJ1Y3QgaW5vZGUgKm9sZF9wYXJlbnRfaW5vZGUsDQogCQkJfQ0K
IA0KIAkJCWlfc2l6ZV93cml0ZShuZXdfaW5vZGUsIDApOw0KKwkJCW5ld19laS0+dmFsaWRfc2l6
ZSA9IDA7DQogCQkJbmV3X2VpLT5zdGFydF9jbHUgPSBFWEZBVF9FT0ZfQ0xVU1RFUjsNCiAJCQlu
ZXdfZWktPmZsYWdzID0gQUxMT0NfTk9fRkFUX0NIQUlOOw0KIAkJfQ0KLS0gDQoyLjI1LjENCg==

