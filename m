Return-Path: <linux-fsdevel+bounces-6982-lists+linux-fsdevel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [IPv6:2604:1380:45d1:ec00::1])
	by mail.lfdr.de (Postfix) with ESMTPS id 93E8D81F53E
	for <lists+linux-fsdevel@lfdr.de>; Thu, 28 Dec 2023 08:00:02 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id B79C21C212E6
	for <lists+linux-fsdevel@lfdr.de>; Thu, 28 Dec 2023 07:00:01 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 22A0763A8;
	Thu, 28 Dec 2023 06:59:59 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=sony.com header.i=@sony.com header.b="qDWojZUO"
X-Original-To: linux-fsdevel@vger.kernel.org
Received: from mx08-001d1705.pphosted.com (mx08-001d1705.pphosted.com [185.183.30.70])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id CA0A553BD
	for <linux-fsdevel@vger.kernel.org>; Thu, 28 Dec 2023 06:59:55 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=sony.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=sony.com
Received: from pps.filterd (m0209319.ppops.net [127.0.0.1])
	by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 3BS6KLiZ020276;
	Thu, 28 Dec 2023 06:59:45 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : mime-version : content-type :
 content-transfer-encoding; s=S1;
 bh=PcMrvaLz/oy/f5T3szZONUqzCICAyANO6MzG09/4IEc=;
 b=qDWojZUOQKmkHkU1ExKXKOqPjehvlOpCdH2rjVZM/QSyji74IAqeSiH08uTrC+DE8dWa
 ybYJx6TynGtnbC84SwugtNkb1ief9uG317o/fF1MqZaH41x5j33mh1Y7cYxFF0Hday5N
 bdV4vy5ewL9LfPSMh3WuAwodd+7M2iu+dxdYnwu5J9Otk0a7RkOSSMso6Fnu2IfqgRvM
 1Ty52sqzgyXzndsQSffipSpTiPnVlkqyYT6WNidtAJVDb48yQnqrO4WJCtbRYLKx+cEe
 xw0ojRB1SlF+p7VW3HkBUPxpFTmFrJDk1hGM5/CLlXgMgJnJUXpkmXtTjQpUWZT4mZpw MA== 
Received: from apc01-tyz-obe.outbound.protection.outlook.com (mail-tyzapc01lp2040.outbound.protection.outlook.com [104.47.110.40])
	by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3v5qxtbsed-1
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
	Thu, 28 Dec 2023 06:59:44 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Pq/EIPzD/m/NPLZN/ACIFnhNujr7jCcChXdEN6uYduAGomlXR2Ki10mtb3nrvh/4pyNGsk51KUttQKV9rs0OybrIfuBYELd+IAAPDkli0DlsK8MG5g23tqY2aoM1/NM9I763KE/0rnqTfaAB6NFWxCRsGMfPH7tl2lVi+GNTMuCbBLzuWTmdfikil3FL+Llp/tCMq4BrtGH1yDqM2zQ3hCHktG0cHvmRXDb3GdupwWCxgI5BvpvpZjlFOMimC+KSamYvTW7rAlV0lSWzVFMV1f8bIFaZWm5234SIK0l/74rumS8bzBJ4dwPyRkQOYfNhxSe+r62wHVrk5qXvuxZQnA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=PcMrvaLz/oy/f5T3szZONUqzCICAyANO6MzG09/4IEc=;
 b=HyDcF/Em63F5L5O8S9ygY0MPb9HA9E8a6MNzBge6NrnwDAyy2siEikVAsQCKWkh+vvRHdMhSbuXiJuw1vxS/6X/kGGD3YGE2/M0iSBZzztErpQwbVud99yTvG3enr6j5U0MhwOeCN65EeElXUuQFBO4YcBWO9bkTZH+gEluQQYqj+tz3jqt49DwlIRm+WdVcazOm++jWYr0cLFzblptVVZCk1YpAMt4KXP3VlhqfjyKutS1++G8K9N09zWyP8UEx5F3aoWp+0LGu60/uvkXsP2FAAOapheVUqBoFNypB99ffJjnvLFPSmZVBR3u20BmmELvgeetzCC7rlzTsIdGO5w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by KL1PR04MB6878.apcprd04.prod.outlook.com (2603:1096:820:d5::9) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7113.26; Thu, 28 Dec
 2023 06:59:38 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::5914:6fc7:b79d:7e34]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::5914:6fc7:b79d:7e34%7]) with mapi id 15.20.7113.026; Thu, 28 Dec 2023
 06:59:37 +0000
From: "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To: "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com"
	<sj1557.seo@samsung.com>
CC: "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com"
	<Wataru.Aoyama@sony.com>
Subject: [PATCH v2 04/10] exfat: convert exfat_remove_entries() to use dentry
 cache
Thread-Topic: [PATCH v2 04/10] exfat: convert exfat_remove_entries() to use
 dentry cache
Thread-Index: Ado5WaqHqlmx2w9PRSW0rtb1X5kIww==
Date: Thu, 28 Dec 2023 06:59:37 +0000
Message-ID: 
 <PUZPR04MB6316D4F2C8D2FB2DE7D21284819EA@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|KL1PR04MB6878:EE_
x-ms-office365-filtering-correlation-id: f634df37-24aa-4651-cc88-08dc07728e8c
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 
 lGZtz3g1Y60Xi77UN11GEkk3s6AR8Dxvkmj3uiDWwuUo7l6jGxlNTtV3y+225/daKg9TuOuwjeBgi4+eznesdbG79Rt5HZC+JSV/A4PBMpowuVPyoxvfaUQv3K7y6NyGIaCfvIC2xwbsaPJTOQiWA/STeeA8cYJgc6GOpEqzdwJZC+nfBtaoGcjNHyX9j4ObwVzd2bFiOTw/rfD+ph1gBuSmGiYqesT3NlHXnOeCx221YBInthuliE6rFyIQxCDkx7Yg3fL07m7S4N3PXWVoObbQAJC+XZvs04Hx8vtVCFHaPTJmMUb2u7js6x7xzobbc9cIffJXFpunXD9YBa2YxfxpIWOuCOawa2/EF8MXLwdPu3SFfcDGodRRayLGLsFF+PmL7uiildjVirJBKT/91B2ab6YZXzr+bhzXzZSccYTPuReMH8IXlBOPX4qFusQedBvw/6TWyOBSAwug0gRlohQnh3BBULmlfsldx7Mz32NTWUMyK4T6DHpVRasLwmdSpycYh9Kqjzx2WZKOHPaaGiYPMDP6eyHT0HFr7b4mGMJm6hyS0RlQc6+JbVpwNKddWOKBmQmN1MdKlIh1iYDZmedTZnqlbR2at38GAq0vJZf7u6S4bwVCjZTtEaESKeVE
x-forefront-antispam-report: 
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(39860400002)(136003)(376002)(346002)(396003)(366004)(230922051799003)(1800799012)(451199024)(186009)(64100799003)(33656002)(9686003)(6506007)(71200400001)(83380400001)(7696005)(478600001)(107886003)(26005)(38100700002)(122000001)(82960400001)(41300700001)(316002)(54906003)(110136005)(66556008)(66946007)(66446008)(30864003)(66476007)(64756008)(4326008)(8676002)(8936002)(52536014)(5660300002)(76116006)(2906002)(38070700009)(55016003)(86362001);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: 
 =?utf-8?B?S3NrWmFobWtOWFI4ZmxVMERhYjBOZVRFSGIvUzd4UmE1UHU2KzZhWEhjV0R3?=
 =?utf-8?B?Z3VadFNESlBtQlUxL1ZDTHNJWS9SVXNxV3dmaGc0VTJMMkZWVG5NYkF3bnYv?=
 =?utf-8?B?N3JDdkRJNUx1QjZQZllEM1B4NFpiQ0pWODlLSjVLcnB6SG9XMGlBcm1SMlJs?=
 =?utf-8?B?c1JnQmxzOGRWUko0WlZKVVM1U3ZkYlp1dzdoQVY2bHBVcmVSUGJLOW5hV0Vh?=
 =?utf-8?B?alp3U1gyL3g0QTc3cUtuR3dEWUp1d3BTUUdTQ2VwV01qcTdUVmExbjdlenRs?=
 =?utf-8?B?bEorOEpmUGRaL1dJNFJUUVMyVDd1b2pXSFh6QmRLYUh6Q1ZacjcreFlJeFBV?=
 =?utf-8?B?ZE50bWV2c2pZQlNEVzlXQ1loa0QvSFhEbUpvZUxoUDlHMUU1RU9RMVkxT1Rz?=
 =?utf-8?B?V2FORERySUxBWFltb0xMRUs1bGNDSnB5SWNQem5ZU0VuSHNHUTZkNkFlUmkr?=
 =?utf-8?B?Z2FlaTZqYUFqeW43bHNqVUd0SUxYcXB3Zi9WQlVpYWxCVjlsd1RzZkp5a3Zq?=
 =?utf-8?B?b3pRWEpXcGRuNUFqMkFMYTM2UTBVR25GRnVHdm1adU9wM3RjL2duVUJxbGxl?=
 =?utf-8?B?ckpDWXQ4bWJNblRRN3l3RWhTdytUOUNmK2k2Nkk1RFo2TDh5LzRhSC9PM3o0?=
 =?utf-8?B?blo0Ujl2QW1IdmQ1RlVDTGpVRHV2WEhZcnZkUkp3bDRnUXJyWmFvMnRkR0lM?=
 =?utf-8?B?VUNQaUpOQjE3WHhBcjVqZnJFSW8yTzlrSXcxcDExdTFDQXVXbTZNeWhaNGJE?=
 =?utf-8?B?eko4aGMrN0ZWbE1hTzR4UzlIYjdERk1IV0FGNGRhUWlIb3lrS0VMWGgzL09t?=
 =?utf-8?B?ZWo0Qnd1OGJYZjU2SDVxajVRSFpMczRpYS8xaFJ3Y3l5azRMTVFMbzZWeWNa?=
 =?utf-8?B?N1d3ZEoyVG1sUGk5MW9Hb29JTm1UdDhQWGsrOWs1Z0lTU29rL2VucGRWTXZG?=
 =?utf-8?B?MkhpcStHTlhYSEx4Q0R4WmltQjc3L3BxNGZodjVqSWNsT0dYSlFnTGVEaFBE?=
 =?utf-8?B?RjZMbEM1VzM4bG51K1V5NUJGNkJYUWFMcHlUOTh0N0ovNDNKZ204UE96ZjI0?=
 =?utf-8?B?MDR4RzhIS05xVzJSL2piSzJFOXliVG0yNmFpQzRJZG5lazh6aVRndUJXSFdt?=
 =?utf-8?B?M2Z6c3ZpTW12U1lXM3hEODhxYThXaTBJR2RLNUNNMGJYNlorWEZaYVZ2czc1?=
 =?utf-8?B?UkxCNUUydFVsQTFGS2lZNlBOdGtweWg2NmV6NzRURGVabURkUDdvSllDL1FT?=
 =?utf-8?B?RDU1OWQ0QmV4QlV3OUJKUEU0bk82ZEhPRHNqcHhQdXc1ektHWUhBb0YxaUha?=
 =?utf-8?B?UmFvdmo4Q0NmMmM0Q09uVXdHU3I2eXVsczlPMXVKc2pDR2VzTTBUU2xZZmor?=
 =?utf-8?B?dExrWWNPRWxIMVJ3cWUzYmszZXByOGdSTGJwRmRFMmlVVW1VZy9jZFdyYnZr?=
 =?utf-8?B?Qmw3bXlhZzdIeHBnZ2M2ZWx1akU5N0JEa0p3ajhUTjRQTmthQUlRblRla2hB?=
 =?utf-8?B?WVFqUmFQdFFKTTkvMUxRUVNmRkVKbGpZRjBVZ2ltM0dlRkNnNDBEbVVpZ0g3?=
 =?utf-8?B?UkZHbzVEeG1wRWhHWFZweFRmVldHNVo0VnlPWUFMc3Z6Y2x0WWpzOTJMU3dV?=
 =?utf-8?B?M3hsSXd5elJhS0E2dzZZTU0wNTdueTJidVd3ODh0RThxYTRnMjhwSGgzRFpI?=
 =?utf-8?B?Y1YvWWZTdExlVlZMdWZWVXlpazMzL1dVVVIwSmZESkJQajJOb0pCTVErU3RL?=
 =?utf-8?B?aklGV09jZnI5VnJTR016bEs2VmdMVUZkVDlaS091L25ybEdxUW1VRDk3TzFP?=
 =?utf-8?B?aDJJY1AzME5vQ3l2cURJVEpSQzZ0ZTNLbkJMbWo4Z0FWQWpCL3dRQ1hBZ1d1?=
 =?utf-8?B?bWlRK3RBckhOU0JXZlZPb0ljdXVzeitnMS9HM0QrQ2JQLy9vWnZWcVBJdFRi?=
 =?utf-8?B?VlZ1cHZjWCtBRDgxNXBCWHZBbUg0YnhVNnhrRHREWTZYVjJnUzkrRDl3ZnF3?=
 =?utf-8?B?Um5KTllPS0g5VFhYdzhTTUFQeHMzMWp0SUpKNUhJZ3BGQjhmOHBMbitucHVU?=
 =?utf-8?B?Yno0bG1kRk9wUitlKzJ1R3FJVDZ5UUFScWRLeWdKRHAyWHE3OW90SnFQTG9N?=
 =?utf-8?Q?y8IgaCzI9KpsTcsL0WRUPLqhL?=
Precedence: bulk
X-Mailing-List: linux-fsdevel@vger.kernel.org
List-Id: <linux-fsdevel.vger.kernel.org>
List-Subscribe: <mailto:linux-fsdevel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-fsdevel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: 
	/cfeH2d4i1CpEMXgU+N1GTTTHMJMWXxEyW4EA72wpeceAK3cDt3eD8VGFXpal0G7TF+OF8buCN151A51t7O0/Yf0oireRsXXZh0BW1z0VNy9pimNB477R+e0jAMjtL6TpBaj8Ga1XaUncmqdeFCwM+a+1kaE82pzX4RksJ+nW3odPrfPaxqcKiqSxh51enbAy7VarCnSj/w/+8F9/R2JQk6ON7sHsJVkoucx6iusZo3dqLQ0IsrJxaL8ld1F8ZUJ4sh1U9/YnXBgje8s3zJHpcatZ0sQ5drYaEeV1lsWP7XpHpgFIAwppOHzZVksNqUyGO54RI6kVQfKPzoBO6CSdo6y6OssAMNXmWjfoNsclTmWBfodf2KV1ed+bYKyZXpyr3CDr8vDtrDt7rsqB6G71dKy87GwXvDtiKL/gtmqyjrttC9DM0QV1imDh+wEZ/RYzryinFKux5DsvtqhUbBVeIbWdlMP3/EUmEGa1JJKIpmrBs+taMLjEbYRtm1Qy/TMjqlZkueHOdBym4plqg9X3F1U8BVVhcEPNX3IspoDklCxqQOMpMDlsBdCfUCgHOWQ9kKHVTW2u7qUJULG4oQjiwE2makMM64iR8z1PpPTN9HLwKWL4rBzHsheJ175aiyp
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: f634df37-24aa-4651-cc88-08dc07728e8c
X-MS-Exchange-CrossTenant-originalarrivaltime: 28 Dec 2023 06:59:37.8695
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: G/d6OpFwARlstrwYF7kUcnQ6X+fIAJoIbq5Hj8QRi5xY/T4t9jq3DpLcTFiH374kBR+H9bZBEeikXnXpodQbpw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: KL1PR04MB6878
X-Proofpoint-GUID: wMQNv7-ZR4vNQfxrXYbx4BVjb86qybyO
X-Proofpoint-ORIG-GUID: wMQNv7-ZR4vNQfxrXYbx4BVjb86qybyO
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: wMQNv7-ZR4vNQfxrXYbx4BVjb86qybyO
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-12-28_02,2023-12-27_01,2023-05-22_02

QmVmb3JlIHRoaXMgY29udmVyc2lvbiwgaW4gZXhmYXRfcmVtb3ZlX2VudHJpZXMoKSwgdG8gbWFy
ayB0aGUNCmRlbnRyaWVzIGluIGEgZGVudHJ5IHNldCBhcyBkZWxldGVkLCB0aGUgc3luYyB0aW1l
cyBpcyBlcXVhbHMNCnRoZSBkZW50cnkgbnVtYmVycyBpZiAnZGlyc3luYycgb3IgJ3N5bmMnIGlz
IGVuYWJsZWQuDQpUaGF0IGFmZmVjdHMgbm90IG9ubHkgcGVyZm9ybWFuY2UgYnV0IGFsc28gZGV2
aWNlIGxpZmUuDQoNCkFmdGVyIHRoaXMgY29udmVyc2lvbiwgb25seSBuZWVkcyB0byBiZSBzeW5j
aHJvbml6ZWQgb25jZSBpZg0KJ2RpcnN5bmMnIG9yICdzeW5jJyBpcyBlbmFibGVkLg0KDQpTaWdu
ZWQtb2ZmLWJ5OiBZdWV6aGFuZyBNbyA8WXVlemhhbmcuTW9Ac29ueS5jb20+DQpSZXZpZXdlZC1i
eTogQW5keSBXdSA8QW5keS5XdUBzb255LmNvbT4NClJldmlld2VkLWJ5OiBBb3lhbWEgV2F0YXJ1
IDx3YXRhcnUuYW95YW1hQHNvbnkuY29tPg0KLS0tDQogZnMvZXhmYXQvZGlyLmMgICAgICB8ICAx
NyArKy0tDQogZnMvZXhmYXQvZXhmYXRfZnMuaCB8ICAgNCArLQ0KIGZzL2V4ZmF0L25hbWVpLmMg
ICAgfCAxODQgKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAz
IGZpbGVzIGNoYW5nZWQsIDkwIGluc2VydGlvbnMoKyksIDExNSBkZWxldGlvbnMoLSkNCg0KZGlm
ZiAtLWdpdCBhL2ZzL2V4ZmF0L2Rpci5jIGIvZnMvZXhmYXQvZGlyLmMNCmluZGV4IDQyZjk2ZWU2
YjlkMy4uMzNiYTk2YTA1NTQzIDEwMDY0NA0KLS0tIGEvZnMvZXhmYXQvZGlyLmMNCisrKyBiL2Zz
L2V4ZmF0L2Rpci5jDQpAQCAtNTc3LDI4ICs1NzcsMjMgQEAgaW50IGV4ZmF0X2luaXRfZXh0X2Vu
dHJ5KHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBleGZhdF9jaGFpbiAqcF9kaXIsDQogCXJl
dHVybiAwOw0KIH0NCiANCi1pbnQgZXhmYXRfcmVtb3ZlX2VudHJpZXMoc3RydWN0IGlub2RlICpp
bm9kZSwgc3RydWN0IGV4ZmF0X2NoYWluICpwX2RpciwNCi0JCWludCBlbnRyeSwgaW50IG9yZGVy
LCBpbnQgbnVtX2VudHJpZXMpDQordm9pZCBleGZhdF9yZW1vdmVfZW50cmllcyhzdHJ1Y3QgaW5v
ZGUgKmlub2RlLCBzdHJ1Y3QgZXhmYXRfZW50cnlfc2V0X2NhY2hlICplcywNCisJCWludCBvcmRl
cikNCiB7DQotCXN0cnVjdCBzdXBlcl9ibG9jayAqc2IgPSBpbm9kZS0+aV9zYjsNCiAJaW50IGk7
DQogCXN0cnVjdCBleGZhdF9kZW50cnkgKmVwOw0KLQlzdHJ1Y3QgYnVmZmVyX2hlYWQgKmJoOw0K
IA0KLQlmb3IgKGkgPSBvcmRlcjsgaSA8IG51bV9lbnRyaWVzOyBpKyspIHsNCi0JCWVwID0gZXhm
YXRfZ2V0X2RlbnRyeShzYiwgcF9kaXIsIGVudHJ5ICsgaSwgJmJoKTsNCi0JCWlmICghZXApDQot
CQkJcmV0dXJuIC1FSU87DQorCWZvciAoaSA9IG9yZGVyOyBpIDwgZXMtPm51bV9lbnRyaWVzOyBp
KyspIHsNCisJCWVwID0gZXhmYXRfZ2V0X2RlbnRyeV9jYWNoZWQoZXMsIGkpOw0KIA0KIAkJaWYg
KGV4ZmF0X2dldF9lbnRyeV90eXBlKGVwKSAmIFRZUEVfQkVOSUdOX1NFQykNCiAJCQlleGZhdF9m
cmVlX2Jlbmlnbl9zZWNvbmRhcnlfY2x1c3RlcnMoaW5vZGUsIGVwKTsNCiANCiAJCWV4ZmF0X3Nl
dF9lbnRyeV90eXBlKGVwLCBUWVBFX0RFTEVURUQpOw0KLQkJZXhmYXRfdXBkYXRlX2JoKGJoLCBJ
U19ESVJTWU5DKGlub2RlKSk7DQotCQlicmVsc2UoYmgpOw0KIAl9DQogDQotCXJldHVybiAwOw0K
KwlpZiAob3JkZXIgPCBlcy0+bnVtX2VudHJpZXMpDQorCQllcy0+bW9kaWZpZWQgPSB0cnVlOw0K
IH0NCiANCiB2b2lkIGV4ZmF0X3VwZGF0ZV9kaXJfY2hrc3VtX3dpdGhfZW50cnlfc2V0KHN0cnVj
dCBleGZhdF9lbnRyeV9zZXRfY2FjaGUgKmVzKQ0KZGlmZiAtLWdpdCBhL2ZzL2V4ZmF0L2V4ZmF0
X2ZzLmggYi9mcy9leGZhdC9leGZhdF9mcy5oDQppbmRleCBiNzdjZjY1NDc1MGEuLmZiZjc2YThi
NWQ4OCAxMDA2NDQNCi0tLSBhL2ZzL2V4ZmF0L2V4ZmF0X2ZzLmgNCisrKyBiL2ZzL2V4ZmF0L2V4
ZmF0X2ZzLmgNCkBAIC00ODUsOCArNDg1LDggQEAgdm9pZCBleGZhdF9pbml0X2Rpcl9lbnRyeShz
dHJ1Y3QgZXhmYXRfZW50cnlfc2V0X2NhY2hlICplcywNCiAJCXVuc2lnbmVkIGxvbmcgbG9uZyBz
aXplLCBzdHJ1Y3QgdGltZXNwZWM2NCAqdHMpOw0KIGludCBleGZhdF9pbml0X2V4dF9lbnRyeShz
dHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZXhmYXRfY2hhaW4gKnBfZGlyLA0KIAkJaW50IGVu
dHJ5LCBpbnQgbnVtX2VudHJpZXMsIHN0cnVjdCBleGZhdF91bmlfbmFtZSAqcF91bmluYW1lKTsN
Ci1pbnQgZXhmYXRfcmVtb3ZlX2VudHJpZXMoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGV4
ZmF0X2NoYWluICpwX2RpciwNCi0JCWludCBlbnRyeSwgaW50IG9yZGVyLCBpbnQgbnVtX2VudHJp
ZXMpOw0KK3ZvaWQgZXhmYXRfcmVtb3ZlX2VudHJpZXMoc3RydWN0IGlub2RlICppbm9kZSwgc3Ry
dWN0IGV4ZmF0X2VudHJ5X3NldF9jYWNoZSAqZXMsDQorCQlpbnQgb3JkZXIpOw0KIGludCBleGZh
dF91cGRhdGVfZGlyX2Noa3N1bShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZXhmYXRfY2hh
aW4gKnBfZGlyLA0KIAkJaW50IGVudHJ5KTsNCiB2b2lkIGV4ZmF0X3VwZGF0ZV9kaXJfY2hrc3Vt
X3dpdGhfZW50cnlfc2V0KHN0cnVjdCBleGZhdF9lbnRyeV9zZXRfY2FjaGUgKmVzKTsNCmRpZmYg
LS1naXQgYS9mcy9leGZhdC9uYW1laS5jIGIvZnMvZXhmYXQvbmFtZWkuYw0KaW5kZXggMDc1MDZm
Mzg4MmJiLi5mNTZlMjIzYjliOGYgMTAwNjQ0DQotLS0gYS9mcy9leGZhdC9uYW1laS5jDQorKysg
Yi9mcy9leGZhdC9uYW1laS5jDQpAQCAtODAzLDEyICs4MDMsMTEgQEAgc3RhdGljIHN0cnVjdCBk
ZW50cnkgKmV4ZmF0X2xvb2t1cChzdHJ1Y3QgaW5vZGUgKmRpciwgc3RydWN0IGRlbnRyeSAqZGVu
dHJ5LA0KIHN0YXRpYyBpbnQgZXhmYXRfdW5saW5rKHN0cnVjdCBpbm9kZSAqZGlyLCBzdHJ1Y3Qg
ZGVudHJ5ICpkZW50cnkpDQogew0KIAlzdHJ1Y3QgZXhmYXRfY2hhaW4gY2RpcjsNCi0Jc3RydWN0
IGV4ZmF0X2RlbnRyeSAqZXA7DQogCXN0cnVjdCBzdXBlcl9ibG9jayAqc2IgPSBkaXItPmlfc2I7
DQogCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBkZW50cnktPmRfaW5vZGU7DQogCXN0cnVjdCBleGZh
dF9pbm9kZV9pbmZvICplaSA9IEVYRkFUX0koaW5vZGUpOw0KLQlzdHJ1Y3QgYnVmZmVyX2hlYWQg
KmJoOw0KLQlpbnQgbnVtX2VudHJpZXMsIGVudHJ5LCBlcnIgPSAwOw0KKwlzdHJ1Y3QgZXhmYXRf
ZW50cnlfc2V0X2NhY2hlIGVzOw0KKwlpbnQgZW50cnksIGVyciA9IDA7DQogDQogCW11dGV4X2xv
Y2soJkVYRkFUX1NCKHNiKS0+c19sb2NrKTsNCiAJZXhmYXRfY2hhaW5fZHVwKCZjZGlyLCAmZWkt
PmRpcik7DQpAQCAtODE5LDI2ICs4MTgsMjAgQEAgc3RhdGljIGludCBleGZhdF91bmxpbmsoc3Ry
dWN0IGlub2RlICpkaXIsIHN0cnVjdCBkZW50cnkgKmRlbnRyeSkNCiAJCWdvdG8gdW5sb2NrOw0K
IAl9DQogDQotCWVwID0gZXhmYXRfZ2V0X2RlbnRyeShzYiwgJmNkaXIsIGVudHJ5LCAmYmgpOw0K
LQlpZiAoIWVwKSB7DQotCQllcnIgPSAtRUlPOw0KLQkJZ290byB1bmxvY2s7DQotCX0NCi0JbnVt
X2VudHJpZXMgPSBleGZhdF9jb3VudF9leHRfZW50cmllcyhzYiwgJmNkaXIsIGVudHJ5LCBlcCk7
DQotCWlmIChudW1fZW50cmllcyA8IDApIHsNCisJZXJyID0gZXhmYXRfZ2V0X2RlbnRyeV9zZXQo
JmVzLCBzYiwgJmNkaXIsIGVudHJ5LCBFU19BTExfRU5UUklFUyk7DQorCWlmIChlcnIpIHsNCiAJ
CWVyciA9IC1FSU87DQotCQlicmVsc2UoYmgpOw0KIAkJZ290byB1bmxvY2s7DQogCX0NCi0JbnVt
X2VudHJpZXMrKzsNCi0JYnJlbHNlKGJoKTsNCiANCiAJZXhmYXRfc2V0X3ZvbHVtZV9kaXJ0eShz
Yik7DQorDQogCS8qIHVwZGF0ZSB0aGUgZGlyZWN0b3J5IGVudHJ5ICovDQotCWlmIChleGZhdF9y
ZW1vdmVfZW50cmllcyhkaXIsICZjZGlyLCBlbnRyeSwgMCwgbnVtX2VudHJpZXMpKSB7DQotCQll
cnIgPSAtRUlPOw0KKwlleGZhdF9yZW1vdmVfZW50cmllcyhpbm9kZSwgJmVzLCBFU19JRFhfRklM
RSk7DQorDQorCWVyciA9IGV4ZmF0X3B1dF9kZW50cnlfc2V0KCZlcywgSVNfRElSU1lOQyhpbm9k
ZSkpOw0KKwlpZiAoZXJyKQ0KIAkJZ290byB1bmxvY2s7DQotCX0NCiANCiAJLyogVGhpcyBkb2Vz
bid0IG1vZGlmeSBlaSAqLw0KIAllaS0+ZGlyLmRpciA9IERJUl9ERUxFVEVEOw0KQEAgLTk1NCwx
MyArOTQ3LDEyIEBAIHN0YXRpYyBpbnQgZXhmYXRfY2hlY2tfZGlyX2VtcHR5KHN0cnVjdCBzdXBl
cl9ibG9jayAqc2IsDQogc3RhdGljIGludCBleGZhdF9ybWRpcihzdHJ1Y3QgaW5vZGUgKmRpciwg
c3RydWN0IGRlbnRyeSAqZGVudHJ5KQ0KIHsNCiAJc3RydWN0IGlub2RlICppbm9kZSA9IGRlbnRy
eS0+ZF9pbm9kZTsNCi0Jc3RydWN0IGV4ZmF0X2RlbnRyeSAqZXA7DQogCXN0cnVjdCBleGZhdF9j
aGFpbiBjZGlyLCBjbHVfdG9fZnJlZTsNCiAJc3RydWN0IHN1cGVyX2Jsb2NrICpzYiA9IGlub2Rl
LT5pX3NiOw0KIAlzdHJ1Y3QgZXhmYXRfc2JfaW5mbyAqc2JpID0gRVhGQVRfU0Ioc2IpOw0KIAlz
dHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCi0Jc3RydWN0IGJ1
ZmZlcl9oZWFkICpiaDsNCi0JaW50IG51bV9lbnRyaWVzLCBlbnRyeSwgZXJyOw0KKwlzdHJ1Y3Qg
ZXhmYXRfZW50cnlfc2V0X2NhY2hlIGVzOw0KKwlpbnQgZW50cnksIGVycjsNCiANCiAJbXV0ZXhf
bG9jaygmRVhGQVRfU0IoaW5vZGUtPmlfc2IpLT5zX2xvY2spOw0KIA0KQEAgLTk4NCwyNyArOTc2
LDIwIEBAIHN0YXRpYyBpbnQgZXhmYXRfcm1kaXIoc3RydWN0IGlub2RlICpkaXIsIHN0cnVjdCBk
ZW50cnkgKmRlbnRyeSkNCiAJCWdvdG8gdW5sb2NrOw0KIAl9DQogDQotCWVwID0gZXhmYXRfZ2V0
X2RlbnRyeShzYiwgJmNkaXIsIGVudHJ5LCAmYmgpOw0KLQlpZiAoIWVwKSB7DQotCQllcnIgPSAt
RUlPOw0KLQkJZ290byB1bmxvY2s7DQotCX0NCi0NCi0JbnVtX2VudHJpZXMgPSBleGZhdF9jb3Vu
dF9leHRfZW50cmllcyhzYiwgJmNkaXIsIGVudHJ5LCBlcCk7DQotCWlmIChudW1fZW50cmllcyA8
IDApIHsNCisJZXJyID0gZXhmYXRfZ2V0X2RlbnRyeV9zZXQoJmVzLCBzYiwgJmNkaXIsIGVudHJ5
LCBFU19BTExfRU5UUklFUyk7DQorCWlmIChlcnIpIHsNCiAJCWVyciA9IC1FSU87DQotCQlicmVs
c2UoYmgpOw0KIAkJZ290byB1bmxvY2s7DQogCX0NCi0JbnVtX2VudHJpZXMrKzsNCi0JYnJlbHNl
KGJoKTsNCiANCiAJZXhmYXRfc2V0X3ZvbHVtZV9kaXJ0eShzYik7DQotCWVyciA9IGV4ZmF0X3Jl
bW92ZV9lbnRyaWVzKGRpciwgJmNkaXIsIGVudHJ5LCAwLCBudW1fZW50cmllcyk7DQotCWlmIChl
cnIpIHsNCi0JCWV4ZmF0X2VycihzYiwgImZhaWxlZCB0byBleGZhdF9yZW1vdmVfZW50cmllcyA6
IGVyciglZCkiLCBlcnIpOw0KKw0KKwlleGZhdF9yZW1vdmVfZW50cmllcyhpbm9kZSwgJmVzLCBF
U19JRFhfRklMRSk7DQorDQorCWVyciA9IGV4ZmF0X3B1dF9kZW50cnlfc2V0KCZlcywgSVNfRElS
U1lOQyhkaXIpKTsNCisJaWYgKGVycikNCiAJCWdvdG8gdW5sb2NrOw0KLQl9DQorDQogCWVpLT5k
aXIuZGlyID0gRElSX0RFTEVURUQ7DQogDQogCWlub2RlX2luY19pdmVyc2lvbihkaXIpOw0KQEAg
LTEwMzAsMzYgKzEwMTUsNDAgQEAgc3RhdGljIGludCBleGZhdF9yZW5hbWVfZmlsZShzdHJ1Y3Qg
aW5vZGUgKmlub2RlLCBzdHJ1Y3QgZXhmYXRfY2hhaW4gKnBfZGlyLA0KIAkJaW50IG9sZGVudHJ5
LCBzdHJ1Y3QgZXhmYXRfdW5pX25hbWUgKnBfdW5pbmFtZSwNCiAJCXN0cnVjdCBleGZhdF9pbm9k
ZV9pbmZvICplaSkNCiB7DQotCWludCByZXQsIG51bV9vbGRfZW50cmllcywgbnVtX25ld19lbnRy
aWVzOw0KKwlpbnQgcmV0LCBudW1fbmV3X2VudHJpZXM7DQogCXN0cnVjdCBleGZhdF9kZW50cnkg
KmVwb2xkLCAqZXBuZXc7DQogCXN0cnVjdCBzdXBlcl9ibG9jayAqc2IgPSBpbm9kZS0+aV9zYjsN
Ci0Jc3RydWN0IGJ1ZmZlcl9oZWFkICpuZXdfYmgsICpvbGRfYmg7DQorCXN0cnVjdCBidWZmZXJf
aGVhZCAqbmV3X2JoOw0KKwlzdHJ1Y3QgZXhmYXRfZW50cnlfc2V0X2NhY2hlIG9sZF9lczsNCiAJ
aW50IHN5bmMgPSBJU19ESVJTWU5DKGlub2RlKTsNCiANCi0JZXBvbGQgPSBleGZhdF9nZXRfZGVu
dHJ5KHNiLCBwX2Rpciwgb2xkZW50cnksICZvbGRfYmgpOw0KLQlpZiAoIWVwb2xkKQ0KLQkJcmV0
dXJuIC1FSU87DQotDQotCW51bV9vbGRfZW50cmllcyA9IGV4ZmF0X2NvdW50X2V4dF9lbnRyaWVz
KHNiLCBwX2Rpciwgb2xkZW50cnksIGVwb2xkKTsNCi0JaWYgKG51bV9vbGRfZW50cmllcyA8IDAp
DQotCQlyZXR1cm4gLUVJTzsNCi0JbnVtX29sZF9lbnRyaWVzKys7DQotDQogCW51bV9uZXdfZW50
cmllcyA9IGV4ZmF0X2NhbGNfbnVtX2VudHJpZXMocF91bmluYW1lKTsNCiAJaWYgKG51bV9uZXdf
ZW50cmllcyA8IDApDQogCQlyZXR1cm4gbnVtX25ld19lbnRyaWVzOw0KIA0KLQlpZiAobnVtX29s
ZF9lbnRyaWVzIDwgbnVtX25ld19lbnRyaWVzKSB7DQorCXJldCA9IGV4ZmF0X2dldF9kZW50cnlf
c2V0KCZvbGRfZXMsIHNiLCBwX2Rpciwgb2xkZW50cnksIEVTX0FMTF9FTlRSSUVTKTsNCisJaWYg
KHJldCkgew0KKwkJcmV0ID0gLUVJTzsNCisJCXJldHVybiByZXQ7DQorCX0NCisNCisJZXBvbGQg
PSBleGZhdF9nZXRfZGVudHJ5X2NhY2hlZCgmb2xkX2VzLCBFU19JRFhfRklMRSk7DQorDQorCWlm
IChvbGRfZXMubnVtX2VudHJpZXMgPCBudW1fbmV3X2VudHJpZXMpIHsNCiAJCWludCBuZXdlbnRy
eTsNCiANCiAJCW5ld2VudHJ5ID0NCiAJCQlleGZhdF9maW5kX2VtcHR5X2VudHJ5KGlub2RlLCBw
X2RpciwgbnVtX25ld19lbnRyaWVzKTsNCi0JCWlmIChuZXdlbnRyeSA8IDApDQotCQkJcmV0dXJu
IG5ld2VudHJ5OyAvKiAtRUlPIG9yIC1FTk9TUEMgKi8NCisJCWlmIChuZXdlbnRyeSA8IDApIHsN
CisJCQlyZXQgPSBuZXdlbnRyeTsgLyogLUVJTyBvciAtRU5PU1BDICovDQorCQkJZ290byBwdXRf
b2xkX2VzOw0KKwkJfQ0KIA0KIAkJZXBuZXcgPSBleGZhdF9nZXRfZGVudHJ5KHNiLCBwX2Rpciwg
bmV3ZW50cnksICZuZXdfYmgpOw0KLQkJaWYgKCFlcG5ldykNCi0JCQlyZXR1cm4gLUVJTzsNCisJ
CWlmICghZXBuZXcpIHsNCisJCQlyZXQgPSAtRUlPOw0KKwkJCWdvdG8gcHV0X29sZF9lczsNCisJ
CX0NCiANCiAJCSplcG5ldyA9ICplcG9sZDsNCiAJCWlmIChleGZhdF9nZXRfZW50cnlfdHlwZShl
cG5ldykgPT0gVFlQRV9GSUxFKSB7DQpAQCAtMTA2NywzMCArMTA1NiwyNSBAQCBzdGF0aWMgaW50
IGV4ZmF0X3JlbmFtZV9maWxlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBleGZhdF9jaGFp
biAqcF9kaXIsDQogCQkJZWktPmF0dHIgfD0gRVhGQVRfQVRUUl9BUkNISVZFOw0KIAkJfQ0KIAkJ
ZXhmYXRfdXBkYXRlX2JoKG5ld19iaCwgc3luYyk7DQotCQlicmVsc2Uob2xkX2JoKTsNCiAJCWJy
ZWxzZShuZXdfYmgpOw0KIA0KLQkJZXBvbGQgPSBleGZhdF9nZXRfZGVudHJ5KHNiLCBwX2Rpciwg
b2xkZW50cnkgKyAxLCAmb2xkX2JoKTsNCi0JCWlmICghZXBvbGQpDQotCQkJcmV0dXJuIC1FSU87
DQorCQllcG9sZCA9IGV4ZmF0X2dldF9kZW50cnlfY2FjaGVkKCZvbGRfZXMsIEVTX0lEWF9TVFJF
QU0pOw0KIAkJZXBuZXcgPSBleGZhdF9nZXRfZGVudHJ5KHNiLCBwX2RpciwgbmV3ZW50cnkgKyAx
LCAmbmV3X2JoKTsNCiAJCWlmICghZXBuZXcpIHsNCi0JCQlicmVsc2Uob2xkX2JoKTsNCi0JCQly
ZXR1cm4gLUVJTzsNCisJCQlyZXQgPSAtRUlPOw0KKwkJCWdvdG8gcHV0X29sZF9lczsNCiAJCX0N
CiANCiAJCSplcG5ldyA9ICplcG9sZDsNCiAJCWV4ZmF0X3VwZGF0ZV9iaChuZXdfYmgsIHN5bmMp
Ow0KLQkJYnJlbHNlKG9sZF9iaCk7DQogCQlicmVsc2UobmV3X2JoKTsNCiANCiAJCXJldCA9IGV4
ZmF0X2luaXRfZXh0X2VudHJ5KGlub2RlLCBwX2RpciwgbmV3ZW50cnksDQogCQkJbnVtX25ld19l
bnRyaWVzLCBwX3VuaW5hbWUpOw0KIAkJaWYgKHJldCkNCi0JCQlyZXR1cm4gcmV0Ow0KKwkJCWdv
dG8gcHV0X29sZF9lczsNCiANCi0JCWV4ZmF0X3JlbW92ZV9lbnRyaWVzKGlub2RlLCBwX2Rpciwg
b2xkZW50cnksIDAsDQotCQkJbnVtX29sZF9lbnRyaWVzKTsNCisJCWV4ZmF0X3JlbW92ZV9lbnRy
aWVzKGlub2RlLCAmb2xkX2VzLCBFU19JRFhfRklMRSk7DQogCQllaS0+ZGlyID0gKnBfZGlyOw0K
IAkJZWktPmVudHJ5ID0gbmV3ZW50cnk7DQogCX0gZWxzZSB7DQpAQCAtMTA5OCwzNyArMTA4Miwy
OSBAQCBzdGF0aWMgaW50IGV4ZmF0X3JlbmFtZV9maWxlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0
cnVjdCBleGZhdF9jaGFpbiAqcF9kaXIsDQogCQkJZXBvbGQtPmRlbnRyeS5maWxlLmF0dHIgfD0g
Y3B1X3RvX2xlMTYoRVhGQVRfQVRUUl9BUkNISVZFKTsNCiAJCQllaS0+YXR0ciB8PSBFWEZBVF9B
VFRSX0FSQ0hJVkU7DQogCQl9DQotCQlleGZhdF91cGRhdGVfYmgob2xkX2JoLCBzeW5jKTsNCi0J
CWJyZWxzZShvbGRfYmgpOw0KIAkJcmV0ID0gZXhmYXRfaW5pdF9leHRfZW50cnkoaW5vZGUsIHBf
ZGlyLCBvbGRlbnRyeSwNCiAJCQludW1fbmV3X2VudHJpZXMsIHBfdW5pbmFtZSk7DQogCQlpZiAo
cmV0KQ0KLQkJCXJldHVybiByZXQ7DQorCQkJZ290byBwdXRfb2xkX2VzOw0KIA0KLQkJZXhmYXRf
cmVtb3ZlX2VudHJpZXMoaW5vZGUsIHBfZGlyLCBvbGRlbnRyeSwgbnVtX25ld19lbnRyaWVzLA0K
LQkJCW51bV9vbGRfZW50cmllcyk7DQorCQlleGZhdF9yZW1vdmVfZW50cmllcyhpbm9kZSwgJm9s
ZF9lcywgbnVtX25ld19lbnRyaWVzKTsNCiAJfQ0KLQlyZXR1cm4gMDsNCisJcmV0dXJuIGV4ZmF0
X3B1dF9kZW50cnlfc2V0KCZvbGRfZXMsIHN5bmMpOw0KKw0KK3B1dF9vbGRfZXM6DQorCWV4ZmF0
X3B1dF9kZW50cnlfc2V0KCZvbGRfZXMsIGZhbHNlKTsNCisJcmV0dXJuIHJldDsNCiB9DQogDQog
c3RhdGljIGludCBleGZhdF9tb3ZlX2ZpbGUoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGV4
ZmF0X2NoYWluICpwX29sZGRpciwNCiAJCWludCBvbGRlbnRyeSwgc3RydWN0IGV4ZmF0X2NoYWlu
ICpwX25ld2RpciwNCiAJCXN0cnVjdCBleGZhdF91bmlfbmFtZSAqcF91bmluYW1lLCBzdHJ1Y3Qg
ZXhmYXRfaW5vZGVfaW5mbyAqZWkpDQogew0KLQlpbnQgcmV0LCBuZXdlbnRyeSwgbnVtX25ld19l
bnRyaWVzLCBudW1fb2xkX2VudHJpZXM7DQorCWludCByZXQsIG5ld2VudHJ5LCBudW1fbmV3X2Vu
dHJpZXM7DQogCXN0cnVjdCBleGZhdF9kZW50cnkgKmVwbW92LCAqZXBuZXc7DQogCXN0cnVjdCBz
dXBlcl9ibG9jayAqc2IgPSBpbm9kZS0+aV9zYjsNCi0Jc3RydWN0IGJ1ZmZlcl9oZWFkICptb3Zf
YmgsICpuZXdfYmg7DQotDQotCWVwbW92ID0gZXhmYXRfZ2V0X2RlbnRyeShzYiwgcF9vbGRkaXIs
IG9sZGVudHJ5LCAmbW92X2JoKTsNCi0JaWYgKCFlcG1vdikNCi0JCXJldHVybiAtRUlPOw0KLQ0K
LQludW1fb2xkX2VudHJpZXMgPSBleGZhdF9jb3VudF9leHRfZW50cmllcyhzYiwgcF9vbGRkaXIs
IG9sZGVudHJ5LA0KLQkJZXBtb3YpOw0KLQlpZiAobnVtX29sZF9lbnRyaWVzIDwgMCkNCi0JCXJl
dHVybiAtRUlPOw0KLQludW1fb2xkX2VudHJpZXMrKzsNCisJc3RydWN0IGJ1ZmZlcl9oZWFkICpu
ZXdfYmg7DQorCXN0cnVjdCBleGZhdF9lbnRyeV9zZXRfY2FjaGUgbW92X2VzOw0KIA0KIAludW1f
bmV3X2VudHJpZXMgPSBleGZhdF9jYWxjX251bV9lbnRyaWVzKHBfdW5pbmFtZSk7DQogCWlmIChu
dW1fbmV3X2VudHJpZXMgPCAwKQ0KQEAgLTExMzgsMzEgKzExMTQsMzUgQEAgc3RhdGljIGludCBl
eGZhdF9tb3ZlX2ZpbGUoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGV4ZmF0X2NoYWluICpw
X29sZGRpciwNCiAJaWYgKG5ld2VudHJ5IDwgMCkNCiAJCXJldHVybiBuZXdlbnRyeTsgLyogLUVJ
TyBvciAtRU5PU1BDICovDQogDQotCWVwbmV3ID0gZXhmYXRfZ2V0X2RlbnRyeShzYiwgcF9uZXdk
aXIsIG5ld2VudHJ5LCAmbmV3X2JoKTsNCi0JaWYgKCFlcG5ldykNCisJcmV0ID0gZXhmYXRfZ2V0
X2RlbnRyeV9zZXQoJm1vdl9lcywgc2IsIHBfb2xkZGlyLCBvbGRlbnRyeSwNCisJCQlFU19BTExf
RU5UUklFUyk7DQorCWlmIChyZXQpDQogCQlyZXR1cm4gLUVJTzsNCiANCisJZXBtb3YgPSBleGZh
dF9nZXRfZGVudHJ5X2NhY2hlZCgmbW92X2VzLCBFU19JRFhfRklMRSk7DQorCWVwbmV3ID0gZXhm
YXRfZ2V0X2RlbnRyeShzYiwgcF9uZXdkaXIsIG5ld2VudHJ5LCAmbmV3X2JoKTsNCisJaWYgKCFl
cG5ldykgew0KKwkJcmV0ID0gLUVJTzsNCisJCWdvdG8gcHV0X21vdl9lczsNCisJfQ0KKw0KIAkq
ZXBuZXcgPSAqZXBtb3Y7DQogCWlmIChleGZhdF9nZXRfZW50cnlfdHlwZShlcG5ldykgPT0gVFlQ
RV9GSUxFKSB7DQogCQllcG5ldy0+ZGVudHJ5LmZpbGUuYXR0ciB8PSBjcHVfdG9fbGUxNihFWEZB
VF9BVFRSX0FSQ0hJVkUpOw0KIAkJZWktPmF0dHIgfD0gRVhGQVRfQVRUUl9BUkNISVZFOw0KIAl9
DQogCWV4ZmF0X3VwZGF0ZV9iaChuZXdfYmgsIElTX0RJUlNZTkMoaW5vZGUpKTsNCi0JYnJlbHNl
KG1vdl9iaCk7DQogCWJyZWxzZShuZXdfYmgpOw0KIA0KLQllcG1vdiA9IGV4ZmF0X2dldF9kZW50
cnkoc2IsIHBfb2xkZGlyLCBvbGRlbnRyeSArIDEsICZtb3ZfYmgpOw0KLQlpZiAoIWVwbW92KQ0K
LQkJcmV0dXJuIC1FSU87DQorCWVwbW92ID0gZXhmYXRfZ2V0X2RlbnRyeV9jYWNoZWQoJm1vdl9l
cywgRVNfSURYX1NUUkVBTSk7DQogCWVwbmV3ID0gZXhmYXRfZ2V0X2RlbnRyeShzYiwgcF9uZXdk
aXIsIG5ld2VudHJ5ICsgMSwgJm5ld19iaCk7DQogCWlmICghZXBuZXcpIHsNCi0JCWJyZWxzZSht
b3ZfYmgpOw0KLQkJcmV0dXJuIC1FSU87DQorCQlyZXQgPSAtRUlPOw0KKwkJZ290byBwdXRfbW92
X2VzOw0KIAl9DQogDQogCSplcG5ldyA9ICplcG1vdjsNCiAJZXhmYXRfdXBkYXRlX2JoKG5ld19i
aCwgSVNfRElSU1lOQyhpbm9kZSkpOw0KLQlicmVsc2UobW92X2JoKTsNCiAJYnJlbHNlKG5ld19i
aCk7DQogDQogCXJldCA9IGV4ZmF0X2luaXRfZXh0X2VudHJ5KGlub2RlLCBwX25ld2RpciwgbmV3
ZW50cnksIG51bV9uZXdfZW50cmllcywNCkBAIC0xMTcwLDEzICsxMTUwLDE4IEBAIHN0YXRpYyBp
bnQgZXhmYXRfbW92ZV9maWxlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBleGZhdF9jaGFp
biAqcF9vbGRkaXIsDQogCWlmIChyZXQpDQogCQlyZXR1cm4gcmV0Ow0KIA0KLQlleGZhdF9yZW1v
dmVfZW50cmllcyhpbm9kZSwgcF9vbGRkaXIsIG9sZGVudHJ5LCAwLCBudW1fb2xkX2VudHJpZXMp
Ow0KKwlleGZhdF9yZW1vdmVfZW50cmllcyhpbm9kZSwgJm1vdl9lcywgRVNfSURYX0ZJTEUpOw0K
IA0KIAlleGZhdF9jaGFpbl9zZXQoJmVpLT5kaXIsIHBfbmV3ZGlyLT5kaXIsIHBfbmV3ZGlyLT5z
aXplLA0KIAkJcF9uZXdkaXItPmZsYWdzKTsNCiANCiAJZWktPmVudHJ5ID0gbmV3ZW50cnk7DQot
CXJldHVybiAwOw0KKwlyZXR1cm4gZXhmYXRfcHV0X2RlbnRyeV9zZXQoJm1vdl9lcywgSVNfRElS
U1lOQyhpbm9kZSkpOw0KKw0KK3B1dF9tb3ZfZXM6DQorCWV4ZmF0X3B1dF9kZW50cnlfc2V0KCZt
b3ZfZXMsIGZhbHNlKTsNCisNCisJcmV0dXJuIHJldDsNCiB9DQogDQogLyogcmVuYW1lIG9yIG1v
dmUgYSBvbGQgZmlsZSBpbnRvIGEgbmV3IGZpbGUgKi8NCkBAIC0xMTk0LDcgKzExNzksNiBAQCBz
dGF0aWMgaW50IF9fZXhmYXRfcmVuYW1lKHN0cnVjdCBpbm9kZSAqb2xkX3BhcmVudF9pbm9kZSwN
CiAJc3RydWN0IGV4ZmF0X3NiX2luZm8gKnNiaSA9IEVYRkFUX1NCKHNiKTsNCiAJY29uc3QgdW5z
aWduZWQgY2hhciAqbmV3X3BhdGggPSBuZXdfZGVudHJ5LT5kX25hbWUubmFtZTsNCiAJc3RydWN0
IGlub2RlICpuZXdfaW5vZGUgPSBuZXdfZGVudHJ5LT5kX2lub2RlOw0KLQlpbnQgbnVtX2VudHJp
ZXM7DQogCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICpuZXdfZWkgPSBOVUxMOw0KIAl1bnNpZ25l
ZCBpbnQgbmV3X2VudHJ5X3R5cGUgPSBUWVBFX1VOVVNFRDsNCiAJaW50IG5ld19lbnRyeSA9IDA7
DQpAQCAtMTI2NSwyNSArMTI0OSwyMSBAQCBzdGF0aWMgaW50IF9fZXhmYXRfcmVuYW1lKHN0cnVj
dCBpbm9kZSAqb2xkX3BhcmVudF9pbm9kZSwNCiAJCQkJJm5ld2RpciwgJnVuaV9uYW1lLCBlaSk7
DQogDQogCWlmICghcmV0ICYmIG5ld19pbm9kZSkgew0KKwkJc3RydWN0IGV4ZmF0X2VudHJ5X3Nl
dF9jYWNoZSBlczsNCisNCiAJCS8qIGRlbGV0ZSBlbnRyaWVzIG9mIG5ld19kaXIgKi8NCi0JCWVw
ID0gZXhmYXRfZ2V0X2RlbnRyeShzYiwgcF9kaXIsIG5ld19lbnRyeSwgJm5ld19iaCk7DQotCQlp
ZiAoIWVwKSB7DQorCQlyZXQgPSBleGZhdF9nZXRfZGVudHJ5X3NldCgmZXMsIHNiLCBwX2Rpciwg
bmV3X2VudHJ5LA0KKwkJCQlFU19BTExfRU5UUklFUyk7DQorCQlpZiAocmV0KSB7DQogCQkJcmV0
ID0gLUVJTzsNCiAJCQlnb3RvIGRlbF9vdXQ7DQogCQl9DQogDQotCQludW1fZW50cmllcyA9IGV4
ZmF0X2NvdW50X2V4dF9lbnRyaWVzKHNiLCBwX2RpciwgbmV3X2VudHJ5LCBlcCk7DQotCQlpZiAo
bnVtX2VudHJpZXMgPCAwKSB7DQotCQkJcmV0ID0gLUVJTzsNCi0JCQlnb3RvIGRlbF9vdXQ7DQot
CQl9DQotCQlicmVsc2UobmV3X2JoKTsNCisJCWV4ZmF0X3JlbW92ZV9lbnRyaWVzKG5ld19pbm9k
ZSwgJmVzLCBFU19JRFhfRklMRSk7DQogDQotCQlpZiAoZXhmYXRfcmVtb3ZlX2VudHJpZXMobmV3
X2lub2RlLCBwX2RpciwgbmV3X2VudHJ5LCAwLA0KLQkJCQludW1fZW50cmllcyArIDEpKSB7DQot
CQkJcmV0ID0gLUVJTzsNCisJCXJldCA9IGV4ZmF0X3B1dF9kZW50cnlfc2V0KCZlcywgSVNfRElS
U1lOQyhuZXdfaW5vZGUpKTsNCisJCWlmIChyZXQpDQogCQkJZ290byBkZWxfb3V0Ow0KLQkJfQ0K
IA0KIAkJLyogRnJlZSB0aGUgY2x1c3RlcnMgaWYgbmV3X2lub2RlIGlzIGEgZGlyKGFzIGlmIGV4
ZmF0X3JtZGlyKSAqLw0KIAkJaWYgKG5ld19lbnRyeV90eXBlID09IFRZUEVfRElSICYmDQotLSAN
CjIuMjUuMQ0KDQo=

