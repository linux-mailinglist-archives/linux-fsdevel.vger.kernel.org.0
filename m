Return-Path: <linux-fsdevel+bounces-4319-lists+linux-fsdevel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [147.75.48.161])
	by mail.lfdr.de (Postfix) with ESMTPS id 168947FE853
	for <lists+linux-fsdevel@lfdr.de>; Thu, 30 Nov 2023 05:38:00 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id 6FEB0B20C0C
	for <lists+linux-fsdevel@lfdr.de>; Thu, 30 Nov 2023 04:37:57 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id D7E2E20DCF
	for <lists+linux-fsdevel@lfdr.de>; Thu, 30 Nov 2023 04:37:55 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=sony.com header.i=@sony.com header.b="V5d+LKNh"
X-Original-To: linux-fsdevel@vger.kernel.org
Received: from mx07-001d1705.pphosted.com (mx07-001d1705.pphosted.com [185.132.183.11])
	by lindbergh.monkeyblade.net (Postfix) with ESMTPS id AA1061A6
	for <linux-fsdevel@vger.kernel.org>; Wed, 29 Nov 2023 19:10:10 -0800 (PST)
Received: from pps.filterd (m0209326.ppops.net [127.0.0.1])
	by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 3AU0GcFE005456;
	Thu, 30 Nov 2023 03:09:59 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : mime-version :
 content-type : content-transfer-encoding; s=S1;
 bh=SQ/rEYoYWlyYFK7TJAUb9Rk37h/frgHh+7BnOaieQ/4=;
 b=V5d+LKNhw8zSNTRQWrWGyzSNXBhWDynls9T2o49YRKbJFS7o5OjKF8d/e57xs/P3CC4z
 fKFxkgMWR3PzvJ/XEbDSEfNFVqTs+MAaWCUnd6+2UdbKXt1K9wognxx9FwZyUKPXPo4P
 Ghk2BCycPgf2/fm+LvlYyTmLUYNNt7H6BUnzhUyuDtPCvOg22ahnWYrI13VCBrR1hHXI
 vO/aDXaokhwy7o+GxumszhcQHaR7Y8Nb5v81I2wiXtMiFUv+F4FL2b1GU8qpPJZuBYh0
 iL30VwVNilzHlkd32YB+O91F1T9oEznKyLEi9kOZwcXBTBBhaHleBQNdxts8Lwf50AVp JQ== 
Received: from apc01-sg2-obe.outbound.protection.outlook.com (mail-sgaapc01lp2110.outbound.protection.outlook.com [104.47.26.110])
	by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3uk74k51c1-1
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
	Thu, 30 Nov 2023 03:09:58 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=nG0YBuzzpgQ4+rA4ZmGfNPgtU8F9BuMW97eq1YAm2eTZsjUFr1nLxmG14BQgQ+byWFyPi/axjdljSSZjUqWR4F2hAtZ/vpuN6E3GahWmQTNNG7OyDaroAHfTap+q3AVrV5f2v4BW+g7tRC/l+kt9F+7YrfVE9NKLYel8jur6Bxtox7kBB5Q6fxPhQmnPdS7EV7eaal7lRJnV99xPMolAX5MhY8Zru4jVnWqHHGWmRqriP6jspRZWanIPAf7iD2e6SawvInIVR3hZmMz4rBEHnetpNc/1vnLkeciAM3juleFZkhNnFvq/Q0ILAPAPOCYhn2WuM23Z90VWHPSpchkReA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=SQ/rEYoYWlyYFK7TJAUb9Rk37h/frgHh+7BnOaieQ/4=;
 b=BYHVK9JjF+n9xnLU08OTsHYn4zJlO4VdTQrGqTED2cKrBm367QYhlVXypA/WxCMz8Dy8rqMCPEpYOtaAY+tfw45YmSaqewX99zwBpOyrJuIgfOlubSUeIdX368tn5aFQAIR1mLlXGDWlE/lsTLe9Ul2XhqruAhep3Cn3Zrs8V+iRL81JnB4NmdxUOU7sQ8FtbU51v7m39UtkPRVfQP8XmPom2lJ6kZNYHnz6hIOrxIBwdumJIDwkEgXrGyT8P86PhwAHXgST8j5ZrRGASvX7bCjOsL0djpyEp02wM0GBKhPfA6ZdmijUXLIXqggBFoghL36G3K4CfFK0S3ZDD35TvQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by SI6PR04MB7955.apcprd04.prod.outlook.com (2603:1096:4:249::10) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7046.24; Thu, 30 Nov
 2023 03:09:53 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a%4]) with mapi id 15.20.7025.022; Thu, 30 Nov 2023
 03:09:53 +0000
From: "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To: "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com"
	<sj1557.seo@samsung.com>
CC: "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com"
	<Wataru.Aoyama@sony.com>,
        "cpgs@samsung.com" <cpgs@samsung.com>
Subject: [PATCH v5 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v5 1/2] exfat: change to get file size from DataLength
Thread-Index: AQHaIzqwOA3CBbJcCUGm1LmnmZM7PA==
Date: Thu, 30 Nov 2023 03:09:53 +0000
Message-ID: 
 <PUZPR04MB6316F0640983B00CC55D903F8182A@PUZPR04MB6316.apcprd04.prod.outlook.com>
References: 
 <PUZPR04MB6316D39C9404C34756CA368981A6A@PUZPR04MB6316.apcprd04.prod.outlook.com>
In-Reply-To: 
 <PUZPR04MB6316D39C9404C34756CA368981A6A@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|SI6PR04MB7955:EE_
x-ms-office365-filtering-correlation-id: edf66c76-a9bd-489f-adff-08dbf151d2ea
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 
 O/t1eFBV2zCoOImL+gRqLvnv9mJh4aAgcPE0Vt0XE/hRC0Kg7g0ezo9Z5WJc6b0Dv/d60dUkOdrDtONvzLn8s+TuzAe6uU06hwNqrjgw8wD7WQvZMrtKDAcS1+EWXynJFR/k2xyAxgewv8Mz4qRxcs1gdBosMR8ycUB7ZNYJnRGK8/tyB0Ch8vvL8t2eRIzSAJX03YYOlMQVMvUZ71MD/ZdKXLZ0gpNfFjCtXKCVa2vB4mS9QTHV1gE6EPI5p5KskD7QweHvbMiOlC0JGYcSuM4yZlWWY2jaRz2ShR1N6Uid5peGc9lYJ7QRrE6S8M6ic2KQUgk4/1uLGz7lCino4tn3mAeBqWpFc46agfejiv82Sr1dnQQQLKa+RVnMJ16y+VrZyXncRH/vMMgaD2XYrXPCsUgjLB+KDGK3nTM2dcwk1P5lRbnqsMJP9vEQuJOIryGo/N64Bh25z8qqhSuavm/5FRVdpDXLNQjpCMUIx22qFHC5Mj5DH/c7J3N+zNF/X5Nrg+4Vark76cFhjRfFKVrKrCKCZHYkm1a9pPuyDw6qturmLD7zHW3u7fr3K+kLUjoczVncMjit/a2SR9O98t6uXBcG3wtSJe1kS/CiW5AUaGXPuIbTyVcdYf0IlIQ+r572Dt8S92ZNP7EQFeK8C8NnexIS1ZqUKIgAPWiZkaM=
x-forefront-antispam-report: 
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(39860400002)(376002)(366004)(346002)(396003)(136003)(230922051799003)(451199024)(1800799012)(186009)(64100799003)(5660300002)(30864003)(478600001)(26005)(9686003)(33656002)(7696005)(6506007)(41300700001)(38070700009)(38100700002)(122000001)(83380400001)(86362001)(71200400001)(82960400001)(2906002)(202311291699003)(66946007)(52536014)(110136005)(76116006)(55016003)(66446008)(316002)(64756008)(66476007)(54906003)(66556008)(4326008)(8676002)(8936002);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: 
 =?utf-8?B?VmhZZGZWSzR6VVdaMjhBU3c3cmFUcmpJV2FzY1BHMjIxTmVEak4ybmpFY0Ex?=
 =?utf-8?B?dEVzcTd1WXVTSEwvNkI4STVTbHpDTjYyaGZBekV6OU1SZ1NmcCtnL2taZEZL?=
 =?utf-8?B?ZEU3YUN6eEJPc3NadnpSeTFqVzNzcTdvcHZaOERVOS8wZ3JFZVlZeEdXUXZv?=
 =?utf-8?B?UUR5bDl3ZGVFdnlQaEhiWkhrdzRoQXkvWExSazZIM2QvSk5VTFN3aWZwUHNo?=
 =?utf-8?B?OVNKbU9ObmY4N1hucjRoTllZRUw2WjNoSy9QSDJMQmNmbmIxVllBbFB3V1Qy?=
 =?utf-8?B?WndNbUZZTktuRnp5QmVmSEdnU2lFSVNEV0tzVDBXSVFBMFVrUGdvS0FML3lr?=
 =?utf-8?B?ckd0VGlkWWRuQWNxSC9QdlpDQzdMSW43S0hDWUNiMVh4bEM4L1N0REIxS0R6?=
 =?utf-8?B?N1U0OEZkZU9meHpVZ21pZi9vSXNuTW1LajNhd0dmdlp1d1NzZXZiSkRmby8r?=
 =?utf-8?B?Z29rOXVQYlNsbjRub1Bzalczb1JhWWo2Q1NMcmZ5N2hIdnkycWZKQ2h1RndZ?=
 =?utf-8?B?bEQ2QVh4QWhGallQZnVJSlB6K25JNGdKVWlEYUFYYS8xb09CSlNuK01sTmJa?=
 =?utf-8?B?VFdRMjh6emFidm1CNmx4cGFXaFZQSU16Qm9Sa2syMXBtUElKelZxYUZtN000?=
 =?utf-8?B?d3hLSHN5Y21vWk41R2JQbm9GZW1jY3V2UjNkeFNxOXhocHI4Yk5xak5XKyt4?=
 =?utf-8?B?R0RhUmhDUzZ0Zm90Mk50VGU1Z1ZGcTZqRXhuWG03L1BzRFVMNDNzUE9JelJo?=
 =?utf-8?B?ZTV1eHMxYmI5WWRtbFFRNjNYR05GVTM2dXJ0TkVKdnlvV2k1K093ZXpJOFlM?=
 =?utf-8?B?WVdqQVA4OVVHL3lLZjNTSk9yeDNma0ZNZjZRV0lsRFFVOUowTGJXb2NIa3JD?=
 =?utf-8?B?U0FHQ05BT1haenEyYXFPcE1YTHkyQ0taVEJ1ZnVFRnF2VzdoRDVvdW1Xa0Mw?=
 =?utf-8?B?bUNnN2RpajhVYmRpWHZkaU5iZDVVRUJhWXBPbEdSMlhYMGFTWVdtV3NvNGdU?=
 =?utf-8?B?dEhzRFF1Y0xQeDJsTXJsZ2JjNStBZDBFL0ExMEJ6SW9wLzl3WTJCRi9WNnFu?=
 =?utf-8?B?T1NJWmVORks2akhRQ28zY0VMNzNHazhLMXdVTVhhUHcyUG9jeURvTElyY3Vy?=
 =?utf-8?B?Mkl5TGkwNVRzRjBOVWd3TmpqbFQra09aaEh6bnpXNXNqVGtlNHBjRXNDeWRt?=
 =?utf-8?B?RzZHUnJ0QWNlZ0RzV2lEdDZ0SlZockhtRDBNR3BPVTd2Q0E3ZjJYWWpleCs3?=
 =?utf-8?B?cWlNWVFVcHp1UXlkaExRMVF5VmRtdWM5OW5VM2hBeE5HRWFBc29nMDBlQk5j?=
 =?utf-8?B?MHZibnFPeUtwbXlLcG1BeTlReFU5SmN0UWhtb0JYVWxjMzZ2MnFhMEg2cHdz?=
 =?utf-8?B?bFFvY25pZEJQZkY5NUVnc0JaMWZTRm9tM3hWSU1MK1cwYkNOQ0FKcFZpNStk?=
 =?utf-8?B?SG50YVhMbEpRanZYdGZFN0cxQmMzbTc3NUZKWFc1NmFLRUhWSDFvZFF4WUF3?=
 =?utf-8?B?YnlRQjcvWmgyWS9YWUw0MjNRdzNXVk43d2xGd0ZkZ1lCNHo0VE00cklOT1Np?=
 =?utf-8?B?NzhVMHVCTFhYaDFHa3FRMVZwM1BnYnhlUzE5SEdNY2xsTzdNR29zcTM1SDcv?=
 =?utf-8?B?VThjTEJrR1dtZkE5YkZZSm85VnM0MEc1d3JEd0c4L3daWU5nNmZzakpxbVpw?=
 =?utf-8?B?TVEwWVR3N09VM3VydW9hTmdJd2JyUU45Yk9pTGw4dTkvTXhKRGlXWXFSQWMw?=
 =?utf-8?B?SzZPWkJoMnRVR2tPdGxxd1hsVnh2U0hLSFQwUFdnQjJqb2dFUGVLZ3p2Z0ow?=
 =?utf-8?B?OGdheitmaFN3Yjg4N0szTTJCbWFmekFoVExYUVAwL2lLRXAwdTNmNWpMQVFu?=
 =?utf-8?B?R0d1RzQrTzdGM2VJVldmYU9HV1dGRG9tTURjcEd2WjRBWXZHUFUvc1dLc3Jv?=
 =?utf-8?B?NHBKN1JTK2FsN2RINGo2T3VTR0w3REI2WnM4aTJxMTQ4VXZvdEc4cWRua0sx?=
 =?utf-8?B?aExzbzhjSW0ra2k2TFNvbDFQVkN5SzNnTWxNWW5qbVRaQ0h4aEQzVWYwQlNI?=
 =?utf-8?B?NFRBNDRNV2pXS0ZIQktSZ3A4WlZNSUlEV3ZHQjd5dHFrVUtYRWxwT2lBYzMw?=
 =?utf-8?Q?fi60yGpKI7MDnpsVKHhn8BBG9?=
Precedence: bulk
X-Mailing-List: linux-fsdevel@vger.kernel.org
List-Id: <linux-fsdevel.vger.kernel.org>
List-Subscribe: <mailto:linux-fsdevel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-fsdevel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: 
	r8dh1MH2bHV3I6xiHcIZWF4ittBXscT30XXLG3GziYP0tR2XV1vKjiZy/XZ+2rKDWe0GRR7kzl11MWpz/hTx7roCSWVHHMSm1RGBiJoHkgOyQr6nzEl/1/4eSYnFj+1QByutBGZpELcgHfLHPtQTZWDXbjJp8o0GyzKsnb7Vy0vDQrKGWwt72U/Pfmw5eM7mjVaJQNMXc2smCBoeSz/wETPy++DESm1XiTnWVE20h6LfqGNnq9yYJbWWBfsAo6OOtoc1EJlX6I8+trZGsyKeSgEnCy4unKbQ56/dhuakyT7vRaA+WnUB5Ed0369B0ps6oaS21sUDGQkC/wOOEo+DTUqcZpnWrLs4jJkuFKDX5SiD7mTsxyIWOecmHdlDN9idT8FOMRUajrxI191Ouz/pz4r+RgfYBgrWqyW4VIV0TONANelonmj2A4K0iYEB4shti0BB8/1C+4UhWbJiVvPLbPXfoKPZ/C+RCtAh5KMngkeg5TiRN7b6+qmm+CqWtv33z3JpYVmJpLDtmrlocB9TsXp10fvQnh0Fuew/5vHaYU0z4spIvHpC5oDt/anRDc3xduMy5XY20LmKa3dZ2Aaa2gY262pNC6mkLV+o6V9/EX+3vj1CmY0h1fi4RT5r45xpsSZad1MWqBWQ6cy1JRoDRJXPa6LvTn5+qDQHoUg+WLmixNZZyKGMdCX848w2pDD6NabWe0FAQkwDyo8YutjmR7dXeEytcxHoEfZzJLMAiK7q8jVw/xp3hGOhuJRdb0p+Fm20AD1+8rsK5fctOl4yJzI0TNvFkG81ZiI4IYUoKRLMsJ5n/mKoJxG5fUmwUhB2GRdwCy17qRtFG1KiTybsGQ==
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: edf66c76-a9bd-489f-adff-08dbf151d2ea
X-MS-Exchange-CrossTenant-originalarrivaltime: 30 Nov 2023 03:09:53.4178
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: XO29hGc9mJQO9luO0boYxk5S3iug1q673CtUVJfhDObAhFaKJMxfo7ZBU1bIT27UfKx2vBYL841lvqnipM/t6g==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: SI6PR04MB7955
X-Proofpoint-GUID: SWxRuEcT9U3fKsHSHDHOlIphY7rXD87b
X-Proofpoint-ORIG-GUID: SWxRuEcT9U3fKsHSHDHOlIphY7rXD87b
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: SWxRuEcT9U3fKsHSHDHOlIphY7rXD87b
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-11-29_21,2023-11-29_01,2023-05-22_02

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDIgKw0KIGZzL2V4ZmF0L2ZpbGUuYyAgICAgfCAxMjIgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQ0KIGZzL2V4ZmF0L2lub2RlLmMg
ICAgfCAxMjQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0NCiBm
cy9leGZhdC9uYW1laS5jICAgIHwgICA2ICsrKw0KIDQgZmlsZXMgY2hhbmdlZCwgMjM1IGluc2Vy
dGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZXhmYXRf
ZnMuaCBiL2ZzL2V4ZmF0L2V4ZmF0X2ZzLmgNCmluZGV4IGE3YTJjMzVkNzRmYi4uZTNiMWY4ZTAy
MmRmIDEwMDY0NA0KLS0tIGEvZnMvZXhmYXQvZXhmYXRfZnMuaA0KKysrIGIvZnMvZXhmYXQvZXhm
YXRfZnMuaA0KQEAgLTIwOCw2ICsyMDgsNyBAQCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5IHsNCiAJ
dW5zaWduZWQgY2hhciBmbGFnczsNCiAJdW5zaWduZWQgc2hvcnQgYXR0cjsNCiAJbG9mZl90IHNp
emU7DQorCWxvZmZfdCB2YWxpZF9zaXplOw0KIAl1bnNpZ25lZCBpbnQgbnVtX3N1YmRpcnM7DQog
CXN0cnVjdCB0aW1lc3BlYzY0IGF0aW1lOw0KIAlzdHJ1Y3QgdGltZXNwZWM2NCBtdGltZTsNCkBA
IC0zMTcsNiArMzE4LDcgQEAgc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gew0KIAlsb2ZmX3QgaV9z
aXplX2FsaWduZWQ7DQogCS8qIG9uLWRpc2sgcG9zaXRpb24gb2YgZGlyZWN0b3J5IGVudHJ5IG9y
IDAgKi8NCiAJbG9mZl90IGlfcG9zOw0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCiAJLyogaGFzaCBi
eSBpX2xvY2F0aW9uICovDQogCXN0cnVjdCBobGlzdF9ub2RlIGlfaGFzaF9mYXQ7DQogCS8qIHBy
b3RlY3QgYm1hcCBhZ2FpbnN0IHRydW5jYXRlICovDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZmls
ZS5jIGIvZnMvZXhmYXQvZmlsZS5jDQppbmRleCBiZmRmYWZlMDA5OTMuLjE1NGYzOWEwM2E2OSAx
MDA2NDQNCi0tLSBhL2ZzL2V4ZmF0L2ZpbGUuYw0KKysrIGIvZnMvZXhmYXQvZmlsZS5jDQpAQCAt
MTEsNiArMTEsNyBAQA0KICNpbmNsdWRlIDxsaW51eC9mc25vdGlmeS5oPg0KICNpbmNsdWRlIDxs
aW51eC9zZWN1cml0eS5oPg0KICNpbmNsdWRlIDxsaW51eC9tc2Rvc19mcy5oPg0KKyNpbmNsdWRl
IDxsaW51eC93cml0ZWJhY2suaD4NCiANCiAjaW5jbHVkZSAiZXhmYXRfcmF3LmgiDQogI2luY2x1
ZGUgImV4ZmF0X2ZzLmgiDQpAQCAtMjYsNiArMjcsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X2NvbnRf
ZXhwYW5kKHN0cnVjdCBpbm9kZSAqaW5vZGUsIGxvZmZfdCBzaXplKQ0KIAkJcmV0dXJuIGVycjsN
CiANCiAJaW5vZGVfc2V0X210aW1lX3RvX3RzKGlub2RlLCBpbm9kZV9zZXRfY3RpbWVfY3VycmVu
dChpbm9kZSkpOw0KKwlFWEZBVF9JKGlub2RlKS0+dmFsaWRfc2l6ZSA9IHNpemU7DQogCW1hcmtf
aW5vZGVfZGlydHkoaW5vZGUpOw0KIA0KIAlpZiAoIUlTX1NZTkMoaW5vZGUpKQ0KQEAgLTE0Niw2
ICsxNDgsOSBAQCBpbnQgX19leGZhdF90cnVuY2F0ZShzdHJ1Y3QgaW5vZGUgKmlub2RlKQ0KIAkJ
ZWktPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVSOw0KIAl9DQogDQorCWlmIChpX3NpemVf
cmVhZChpbm9kZSkgPCBlaS0+dmFsaWRfc2l6ZSkNCisJCWVpLT52YWxpZF9zaXplID0gaV9zaXpl
X3JlYWQoaW5vZGUpOw0KKw0KIAlpZiAoZWktPnR5cGUgPT0gVFlQRV9GSUxFKQ0KIAkJZWktPmF0
dHIgfD0gRVhGQVRfQVRUUl9BUkNISVZFOw0KIA0KQEAgLTQ3NCwxNSArNDc5LDEyOCBAQCBpbnQg
ZXhmYXRfZmlsZV9mc3luYyhzdHJ1Y3QgZmlsZSAqZmlscCwgbG9mZl90IHN0YXJ0LCBsb2ZmX3Qg
ZW5kLCBpbnQgZGF0YXN5bmMpDQogCXJldHVybiBibGtkZXZfaXNzdWVfZmx1c2goaW5vZGUtPmlf
c2ItPnNfYmRldik7DQogfQ0KIA0KK3N0YXRpYyBpbnQgZXhmYXRfZmlsZV96ZXJvZWRfcmFuZ2Uo
c3RydWN0IGZpbGUgKmZpbGUsIGxvZmZfdCBzdGFydCwgbG9mZl90IGVuZCkNCit7DQorCWludCBl
cnI7DQorCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBmaWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3Qg
ZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJc3RydWN0IGFkZHJlc3Nf
c3BhY2UgKm1hcHBpbmcgPSBpbm9kZS0+aV9tYXBwaW5nOw0KKwljb25zdCBzdHJ1Y3QgYWRkcmVz
c19zcGFjZV9vcGVyYXRpb25zICpvcHMgPSBtYXBwaW5nLT5hX29wczsNCisNCisJd2hpbGUgKHN0
YXJ0IDwgZW5kKSB7DQorCQl1MzIgemVyb2Zyb20sIGxlbjsNCisJCXN0cnVjdCBwYWdlICpwYWdl
ID0gTlVMTDsNCisNCisJCXplcm9mcm9tID0gc3RhcnQgJiAoUEFHRV9TSVpFIC0gMSk7DQorCQls
ZW4gPSBQQUdFX1NJWkUgLSB6ZXJvZnJvbTsNCisJCWlmIChzdGFydCArIGxlbiA+IGVuZCkNCisJ
CQlsZW4gPSBlbmQgLSBzdGFydDsNCisNCisJCWVyciA9IG9wcy0+d3JpdGVfYmVnaW4oZmlsZSwg
bWFwcGluZywgc3RhcnQsIGxlbiwgJnBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVycikNCisJCQlnb3Rv
IG91dDsNCisNCisJCXplcm9fdXNlcl9zZWdtZW50KHBhZ2UsIHplcm9mcm9tLCB6ZXJvZnJvbSAr
IGxlbik7DQorDQorCQllcnIgPSBvcHMtPndyaXRlX2VuZChmaWxlLCBtYXBwaW5nLCBzdGFydCwg
bGVuLCBsZW4sIHBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVyciA8IDApDQorCQkJZ290byBvdXQ7DQor
CQlzdGFydCArPSBsZW47DQorDQorCQliYWxhbmNlX2RpcnR5X3BhZ2VzX3JhdGVsaW1pdGVkKG1h
cHBpbmcpOw0KKwkJY29uZF9yZXNjaGVkKCk7DQorCX0NCisNCisJZWktPnZhbGlkX3NpemUgPSBl
bmQ7DQorCW1hcmtfaW5vZGVfZGlydHkoaW5vZGUpOw0KKw0KK291dDoNCisJcmV0dXJuIGVycjsN
Cit9DQorDQorc3RhdGljIHNzaXplX3QgZXhmYXRfZmlsZV93cml0ZV9pdGVyKHN0cnVjdCBraW9j
YiAqaW9jYiwgc3RydWN0IGlvdl9pdGVyICppdGVyKQ0KK3sNCisJc3NpemVfdCByZXQ7DQorCXN0
cnVjdCBmaWxlICpmaWxlID0gaW9jYi0+a2lfZmlscDsNCisJc3RydWN0IGlub2RlICppbm9kZSA9
IGZpbGVfaW5vZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9IEVYRkFU
X0koaW5vZGUpOw0KKwlsb2ZmX3QgcG9zID0gaW9jYi0+a2lfcG9zOw0KKwlsb2ZmX3QgdmFsaWRf
c2l6ZTsNCisNCisJaW5vZGVfbG9jayhpbm9kZSk7DQorDQorCXZhbGlkX3NpemUgPSBlaS0+dmFs
aWRfc2l6ZTsNCisNCisJcmV0ID0gZ2VuZXJpY193cml0ZV9jaGVja3MoaW9jYiwgaXRlcik7DQor
CWlmIChyZXQgPCAwKQ0KKwkJZ290byB1bmxvY2s7DQorDQorCWlmIChwb3MgPiB2YWxpZF9zaXpl
KSB7DQorCQlyZXQgPSBleGZhdF9maWxlX3plcm9lZF9yYW5nZShmaWxlLCB2YWxpZF9zaXplLCBw
b3MpOw0KKwkJaWYgKHJldCA8IDAgJiYgcmV0ICE9IC1FTk9TUEMpIHsNCisJCQlleGZhdF9lcnIo
aW5vZGUtPmlfc2IsDQorCQkJCSJ3cml0ZTogZmFpbCB0byB6ZXJvIGZyb20gJWxsdSB0byAlbGx1
KCVsZCkiLA0KKwkJCQl2YWxpZF9zaXplLCBwb3MsIHJldCk7DQorCQl9DQorCQlpZiAocmV0IDwg
MCkNCisJCQlnb3RvIHVubG9jazsNCisJfQ0KKw0KKwlyZXQgPSBfX2dlbmVyaWNfZmlsZV93cml0
ZV9pdGVyKGlvY2IsIGl0ZXIpOw0KKwlpZiAocmV0IDwgMCkNCisJCWdvdG8gdW5sb2NrOw0KKw0K
Kwlpbm9kZV91bmxvY2soaW5vZGUpOw0KKw0KKwlpZiAocG9zID4gdmFsaWRfc2l6ZSkNCisJCXBv
cyA9IHZhbGlkX3NpemU7DQorDQorCWlmIChpb2NiX2lzX2RzeW5jKGlvY2IpICYmIGlvY2ItPmtp
X3BvcyA+IHBvcykgew0KKwkJc3NpemVfdCBlcnIgPSB2ZnNfZnN5bmNfcmFuZ2UoZmlsZSwgcG9z
LCBpb2NiLT5raV9wb3MgLSAxLA0KKwkJCQlpb2NiLT5raV9mbGFncyAmIElPQ0JfU1lOQyk7DQor
CQlpZiAoZXJyIDwgMCkNCisJCQlyZXR1cm4gZXJyOw0KKwl9DQorDQorCXJldHVybiByZXQ7DQor
DQordW5sb2NrOg0KKwlpbm9kZV91bmxvY2soaW5vZGUpOw0KKw0KKwlyZXR1cm4gcmV0Ow0KK30N
CisNCitzdGF0aWMgaW50IGV4ZmF0X2ZpbGVfbW1hcChzdHJ1Y3QgZmlsZSAqZmlsZSwgc3RydWN0
IHZtX2FyZWFfc3RydWN0ICp2bWEpDQorew0KKwlpbnQgcmV0Ow0KKwlzdHJ1Y3QgaW5vZGUgKmlu
b2RlID0gZmlsZV9pbm9kZShmaWxlKTsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0g
RVhGQVRfSShpbm9kZSk7DQorCWxvZmZfdCBzdGFydCA9ICgobG9mZl90KXZtYS0+dm1fcGdvZmYg
PDwgUEFHRV9TSElGVCk7DQorCWxvZmZfdCBlbmQgPSBtaW5fdChsb2ZmX3QsIGlfc2l6ZV9yZWFk
KGlub2RlKSwNCisJCQlzdGFydCArIHZtYS0+dm1fZW5kIC0gdm1hLT52bV9zdGFydCk7DQorDQor
CWlmICgodm1hLT52bV9mbGFncyAmIFZNX1dSSVRFKSAmJiBlaS0+dmFsaWRfc2l6ZSA8IGVuZCkg
ew0KKwkJcmV0ID0gZXhmYXRfZmlsZV96ZXJvZWRfcmFuZ2UoZmlsZSwgZWktPnZhbGlkX3NpemUs
IGVuZCk7DQorCQlpZiAocmV0IDwgMCkgew0KKwkJCWV4ZmF0X2Vycihpbm9kZS0+aV9zYiwNCisJ
CQkJICAibW1hcDogZmFpbCB0byB6ZXJvIGZyb20gJWxsdSB0byAlbGx1KCVkKSIsDQorCQkJCSAg
c3RhcnQsIGVuZCwgcmV0KTsNCisJCQlyZXR1cm4gcmV0Ow0KKwkJfQ0KKwl9DQorDQorCXJldHVy
biBnZW5lcmljX2ZpbGVfbW1hcChmaWxlLCB2bWEpOw0KK30NCisNCiBjb25zdCBzdHJ1Y3QgZmls
ZV9vcGVyYXRpb25zIGV4ZmF0X2ZpbGVfb3BlcmF0aW9ucyA9IHsNCiAJLmxsc2VlawkJPSBnZW5l
cmljX2ZpbGVfbGxzZWVrLA0KIAkucmVhZF9pdGVyCT0gZ2VuZXJpY19maWxlX3JlYWRfaXRlciwN
Ci0JLndyaXRlX2l0ZXIJPSBnZW5lcmljX2ZpbGVfd3JpdGVfaXRlciwNCisJLndyaXRlX2l0ZXIJ
PSBleGZhdF9maWxlX3dyaXRlX2l0ZXIsDQogCS51bmxvY2tlZF9pb2N0bCA9IGV4ZmF0X2lvY3Rs
LA0KICNpZmRlZiBDT05GSUdfQ09NUEFUDQogCS5jb21wYXRfaW9jdGwgPSBleGZhdF9jb21wYXRf
aW9jdGwsDQogI2VuZGlmDQotCS5tbWFwCQk9IGdlbmVyaWNfZmlsZV9tbWFwLA0KKwkubW1hcAkJ
PSBleGZhdF9maWxlX21tYXAsDQogCS5mc3luYwkJPSBleGZhdF9maWxlX2ZzeW5jLA0KIAkuc3Bs
aWNlX3JlYWQJPSBmaWxlbWFwX3NwbGljZV9yZWFkLA0KIAkuc3BsaWNlX3dyaXRlCT0gaXRlcl9m
aWxlX3NwbGljZV93cml0ZSwNCmRpZmYgLS1naXQgYS9mcy9leGZhdC9pbm9kZS5jIGIvZnMvZXhm
YXQvaW5vZGUuYw0KaW5kZXggZTdmZjU4YjhlNjhjLi5hN2JiMjM0YzhiYjEgMTAwNjQ0DQotLS0g
YS9mcy9leGZhdC9pbm9kZS5jDQorKysgYi9mcy9leGZhdC9pbm9kZS5jDQpAQCAtNzUsOCArNzUs
OCBAQCBpbnQgX19leGZhdF93cml0ZV9pbm9kZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBpbnQgc3lu
YykNCiAJaWYgKGVpLT5zdGFydF9jbHUgPT0gRVhGQVRfRU9GX0NMVVNURVIpDQogCQlvbl9kaXNr
X3NpemUgPSAwOw0KIA0KLQllcDItPmRlbnRyeS5zdHJlYW0udmFsaWRfc2l6ZSA9IGNwdV90b19s
ZTY0KG9uX2Rpc2tfc2l6ZSk7DQotCWVwMi0+ZGVudHJ5LnN0cmVhbS5zaXplID0gZXAyLT5kZW50
cnkuc3RyZWFtLnZhbGlkX3NpemU7DQorCWVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplID0g
Y3B1X3RvX2xlNjQoZWktPnZhbGlkX3NpemUpOw0KKwllcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSA9
IGNwdV90b19sZTY0KG9uX2Rpc2tfc2l6ZSk7DQogCWlmIChvbl9kaXNrX3NpemUpIHsNCiAJCWVw
Mi0+ZGVudHJ5LnN0cmVhbS5mbGFncyA9IGVpLT5mbGFnczsNCiAJCWVwMi0+ZGVudHJ5LnN0cmVh
bS5zdGFydF9jbHUgPSBjcHVfdG9fbGUzMihlaS0+c3RhcnRfY2x1KTsNCkBAIC0yNzgsNiArMjc4
LDcgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2RlICppbm9kZSwgc2Vj
dG9yX3QgaWJsb2NrLA0KIAl1bnNpZ25lZCBpbnQgY2x1c3Rlciwgc2VjX29mZnNldDsNCiAJc2Vj
dG9yX3QgbGFzdF9ibG9jazsNCiAJc2VjdG9yX3QgcGh5cyA9IDA7DQorCXNlY3Rvcl90IHZhbGlk
X2Jsa3M7DQogCWxvZmZfdCBwb3M7DQogDQogCW11dGV4X2xvY2soJnNiaS0+c19sb2NrKTsNCkBA
IC0zMDYsMTcgKzMwNywzMiBAQCBzdGF0aWMgaW50IGV4ZmF0X2dldF9ibG9jayhzdHJ1Y3QgaW5v
ZGUgKmlub2RlLCBzZWN0b3JfdCBpYmxvY2ssDQogCW1hcHBlZF9ibG9ja3MgPSBzYmktPnNlY3Rf
cGVyX2NsdXMgLSBzZWNfb2Zmc2V0Ow0KIAltYXhfYmxvY2tzID0gbWluKG1hcHBlZF9ibG9ja3Ms
IG1heF9ibG9ja3MpOw0KIA0KLQkvKiBUcmVhdCBuZXdseSBhZGRlZCBibG9jayAvIGNsdXN0ZXIg
Ki8NCi0JaWYgKGlibG9jayA8IGxhc3RfYmxvY2spDQotCQljcmVhdGUgPSAwOw0KLQ0KLQlpZiAo
Y3JlYXRlIHx8IGJ1ZmZlcl9kZWxheShiaF9yZXN1bHQpKSB7DQotCQlwb3MgPSBFWEZBVF9CTEtf
VE9fQigoaWJsb2NrICsgMSksIHNiKTsNCisJcG9zID0gRVhGQVRfQkxLX1RPX0IoKGlibG9jayAr
IDEpLCBzYik7DQorCWlmICgoY3JlYXRlICYmIGlibG9jayA+PSBsYXN0X2Jsb2NrKSB8fCBidWZm
ZXJfZGVsYXkoYmhfcmVzdWx0KSkgew0KIAkJaWYgKGVpLT5pX3NpemVfb25kaXNrIDwgcG9zKQ0K
IAkJCWVpLT5pX3NpemVfb25kaXNrID0gcG9zOw0KIAl9DQogDQorCW1hcF9iaChiaF9yZXN1bHQs
IHNiLCBwaHlzKTsNCisJaWYgKGJ1ZmZlcl9kZWxheShiaF9yZXN1bHQpKQ0KKwkJY2xlYXJfYnVm
ZmVyX2RlbGF5KGJoX3Jlc3VsdCk7DQorDQogCWlmIChjcmVhdGUpIHsNCisJCXZhbGlkX2Jsa3Mg
PSBFWEZBVF9CX1RPX0JMS19ST1VORF9VUChlaS0+dmFsaWRfc2l6ZSwgc2IpOw0KKw0KKwkJaWYg
KGlibG9jayArIG1heF9ibG9ja3MgPCB2YWxpZF9ibGtzKSB7DQorCQkJLyogVGhlIHJhbmdlIGhh
cyBiZWVuIHdyaXR0ZW4sIG1hcCBpdCAqLw0KKwkJCWdvdG8gZG9uZTsNCisJCX0gZWxzZSBpZiAo
aWJsb2NrIDwgdmFsaWRfYmxrcykgew0KKwkJCS8qDQorCQkJICogVGhlIHJhbmdlIGhhcyBiZWVu
IHBhcnRpYWxseSB3cml0dGVuLA0KKwkJCSAqIG1hcCB0aGUgd3JpdHRlbiBwYXJ0Lg0KKwkJCSAq
Lw0KKwkJCW1heF9ibG9ja3MgPSB2YWxpZF9ibGtzIC0gaWJsb2NrOw0KKwkJCWdvdG8gZG9uZTsN
CisJCX0NCisNCisJCS8qIFRoZSBhcmVhIGhhcyBub3QgYmVlbiB3cml0dGVuLCBtYXAgYW5kIG1h
cmsgYXMgbmV3LiAqLw0KIAkJZXJyID0gZXhmYXRfbWFwX25ld19idWZmZXIoZWksIGJoX3Jlc3Vs
dCwgcG9zKTsNCiAJCWlmIChlcnIpIHsNCiAJCQlleGZhdF9mc19lcnJvcihzYiwNCkBAIC0zMjQs
MTEgKzM0MCw1NSBAQCBzdGF0aWMgaW50IGV4ZmF0X2dldF9ibG9jayhzdHJ1Y3QgaW5vZGUgKmlu
b2RlLCBzZWN0b3JfdCBpYmxvY2ssDQogCQkJCQlwb3MsIGVpLT5pX3NpemVfYWxpZ25lZCk7DQog
CQkJZ290byB1bmxvY2tfcmV0Ow0KIAkJfQ0KKwl9IGVsc2Ugew0KKwkJdmFsaWRfYmxrcyA9IEVY
RkFUX0JfVE9fQkxLKGVpLT52YWxpZF9zaXplLCBzYik7DQorDQorCQlpZiAoaWJsb2NrICsgbWF4
X2Jsb2NrcyA8IHZhbGlkX2Jsa3MpIHsNCisJCQkvKiBUaGUgcmFuZ2UgaGFzIGJlZW4gd3JpdHRl
biwgbWFwIGl0ICovDQorCQkJZ290byBkb25lOw0KKwkJfSBlbHNlIGlmIChpYmxvY2sgPCB2YWxp
ZF9ibGtzKSB7DQorCQkJLyoNCisJCQkgKiBUaGUgYXJlYSBoYXMgYmVlbiBwYXJ0aWFsbHkgd3Jp
dHRlbiwNCisJCQkgKiBtYXAgdGhlIHdyaXR0ZW4gcGFydC4NCisJCQkgKi8NCisJCQltYXhfYmxv
Y2tzID0gdmFsaWRfYmxrcyAtIGlibG9jazsNCisJCQlnb3RvIGRvbmU7DQorCQl9IGVsc2UgaWYg
KGlibG9jayA9PSB2YWxpZF9ibGtzICYmDQorCQkJICAgKGVpLT52YWxpZF9zaXplICYgKHNiLT5z
X2Jsb2Nrc2l6ZSAtIDEpKSkgew0KKwkJCS8qDQorCQkJICogVGhlIGJsb2NrIGhhcyBiZWVuIHBh
cnRpYWxseSB3cml0dGVuLA0KKwkJCSAqIHplcm8gdGhlIHVud3JpdHRlbiBwYXJ0IGFuZCBtYXAg
dGhlIGJsb2NrLg0KKwkJCSAqLw0KKwkJCWxvZmZfdCBzaXplLCBvZmY7DQorDQorCQkJbWF4X2Js
b2NrcyA9IDE7DQorDQorCQkJLyoNCisJCQkgKiBGb3IgZGlyZWN0IHJlYWQsIHRoZSB1bndyaXR0
ZW4gcGFydCB3aWxsIGJlIHplcm9lZCBpbg0KKwkJCSAqIGV4ZmF0X2RpcmVjdF9JTygpDQorCQkJ
ICovDQorCQkJaWYgKCFiaF9yZXN1bHQtPmJfZm9saW8pDQorCQkJCWdvdG8gZG9uZTsNCisNCisJ
CQlwb3MgLT0gc2ItPnNfYmxvY2tzaXplOw0KKwkJCXNpemUgPSBlaS0+dmFsaWRfc2l6ZSAtIHBv
czsNCisJCQlvZmYgPSBwb3MgJiAoUEFHRV9TSVpFIC0gMSk7DQorDQorCQkJZm9saW9fc2V0X2Jo
KGJoX3Jlc3VsdCwgYmhfcmVzdWx0LT5iX2ZvbGlvLCBvZmYpOw0KKwkJCWVyciA9IGJoX3JlYWQo
YmhfcmVzdWx0LCAwKTsNCisJCQlpZiAoZXJyIDwgMCkNCisJCQkJZ290byB1bmxvY2tfcmV0Ow0K
Kw0KKwkJCWZvbGlvX3plcm9fc2VnbWVudChiaF9yZXN1bHQtPmJfZm9saW8sIG9mZiArIHNpemUs
DQorCQkJCQlvZmYgKyBzYi0+c19ibG9ja3NpemUpOw0KKwkJfSBlbHNlIHsNCisJCQkvKg0KKwkJ
CSAqIFRoZSByYW5nZSBoYXMgbm90IGJlZW4gd3JpdHRlbiwgY2xlYXIgdGhlIG1hcHBlZCBmbGFn
DQorCQkJICogdG8gb25seSB6ZXJvIHRoZSBjYWNoZSBhbmQgZG8gbm90IHJlYWQgZnJvbSBkaXNr
Lg0KKwkJCSAqLw0KKwkJCWNsZWFyX2J1ZmZlcl9tYXBwZWQoYmhfcmVzdWx0KTsNCisJCX0NCiAJ
fQ0KLQ0KLQlpZiAoYnVmZmVyX2RlbGF5KGJoX3Jlc3VsdCkpDQotCQljbGVhcl9idWZmZXJfZGVs
YXkoYmhfcmVzdWx0KTsNCi0JbWFwX2JoKGJoX3Jlc3VsdCwgc2IsIHBoeXMpOw0KIGRvbmU6DQog
CWJoX3Jlc3VsdC0+Yl9zaXplID0gRVhGQVRfQkxLX1RPX0IobWF4X2Jsb2Nrcywgc2IpOw0KIHVu
bG9ja19yZXQ6DQpAQCAtMzQzLDYgKzQwMywxNyBAQCBzdGF0aWMgaW50IGV4ZmF0X3JlYWRfZm9s
aW8oc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBmb2xpbyAqZm9saW8pDQogDQogc3RhdGljIHZv
aWQgZXhmYXRfcmVhZGFoZWFkKHN0cnVjdCByZWFkYWhlYWRfY29udHJvbCAqcmFjKQ0KIHsNCisJ
c3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcgPSByYWMtPm1hcHBpbmc7DQorCXN0cnVjdCBp
bm9kZSAqaW5vZGUgPSBtYXBwaW5nLT5ob3N0Ow0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAq
ZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBvcyA9IHJlYWRhaGVhZF9wb3MocmFjKTsN
CisNCisJLyogUmFuZ2UgY3Jvc3MgdmFsaWRfc2l6ZSwgcmVhZCBpdCBwYWdlIGJ5IHBhZ2UuICov
DQorCWlmIChlaS0+dmFsaWRfc2l6ZSA8IGlfc2l6ZV9yZWFkKGlub2RlKSAmJg0KKwkgICAgcG9z
IDw9IGVpLT52YWxpZF9zaXplICYmDQorCSAgICBlaS0+dmFsaWRfc2l6ZSA8IHBvcyArIHJlYWRh
aGVhZF9sZW5ndGgocmFjKSkNCisJCXJldHVybjsNCisNCiAJbXBhZ2VfcmVhZGFoZWFkKHJhYywg
ZXhmYXRfZ2V0X2Jsb2NrKTsNCiB9DQogDQpAQCAtMzcwLDkgKzQ0MSw3IEBAIHN0YXRpYyBpbnQg
ZXhmYXRfd3JpdGVfYmVnaW4oc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBhZGRyZXNzX3NwYWNl
ICptYXBwaW5nLA0KIAlpbnQgcmV0Ow0KIA0KIAkqcGFnZXAgPSBOVUxMOw0KLQlyZXQgPSBjb250
X3dyaXRlX2JlZ2luKGZpbGUsIG1hcHBpbmcsIHBvcywgbGVuLCBwYWdlcCwgZnNkYXRhLA0KLQkJ
CSAgICAgICBleGZhdF9nZXRfYmxvY2ssDQotCQkJICAgICAgICZFWEZBVF9JKG1hcHBpbmctPmhv
c3QpLT5pX3NpemVfb25kaXNrKTsNCisJcmV0ID0gYmxvY2tfd3JpdGVfYmVnaW4obWFwcGluZywg
cG9zLCBsZW4sIHBhZ2VwLCBleGZhdF9nZXRfYmxvY2spOw0KIA0KIAlpZiAocmV0IDwgMCkNCiAJ
CWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBwb3MrbGVuKTsNCkBAIC00MDAsNiArNDY5LDEx
IEBAIHN0YXRpYyBpbnQgZXhmYXRfd3JpdGVfZW5kKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3Qg
YWRkcmVzc19zcGFjZSAqbWFwcGluZywNCiAJaWYgKGVyciA8IGxlbikNCiAJCWV4ZmF0X3dyaXRl
X2ZhaWxlZChtYXBwaW5nLCBwb3MrbGVuKTsNCiANCisJaWYgKCEoZXJyIDwgMCkgJiYgcG9zICsg
ZXJyID4gZWktPnZhbGlkX3NpemUpIHsNCisJCWVpLT52YWxpZF9zaXplID0gcG9zICsgZXJyOw0K
KwkJbWFya19pbm9kZV9kaXJ0eShpbm9kZSk7DQorCX0NCisNCiAJaWYgKCEoZXJyIDwgMCkgJiYg
IShlaS0+YXR0ciAmIEVYRkFUX0FUVFJfQVJDSElWRSkpIHsNCiAJCWlub2RlX3NldF9tdGltZV90
b190cyhpbm9kZSwgaW5vZGVfc2V0X2N0aW1lX2N1cnJlbnQoaW5vZGUpKTsNCiAJCWVpLT5hdHRy
IHw9IEVYRkFUX0FUVFJfQVJDSElWRTsNCkBAIC00MTMsNiArNDg3LDggQEAgc3RhdGljIHNzaXpl
X3QgZXhmYXRfZGlyZWN0X0lPKHN0cnVjdCBraW9jYiAqaW9jYiwgc3RydWN0IGlvdl9pdGVyICpp
dGVyKQ0KIHsNCiAJc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcgPSBpb2NiLT5raV9maWxw
LT5mX21hcHBpbmc7DQogCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBtYXBwaW5nLT5ob3N0Ow0KKwlz
dHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBv
cyA9IGlvY2ItPmtpX3BvczsNCiAJbG9mZl90IHNpemUgPSBpb2NiLT5raV9wb3MgKyBpb3ZfaXRl
cl9jb3VudChpdGVyKTsNCiAJaW50IHJ3ID0gaW92X2l0ZXJfcncoaXRlcik7DQogCXNzaXplX3Qg
cmV0Ow0KQEAgLTQzNiw4ICs1MTIsMjEgQEAgc3RhdGljIHNzaXplX3QgZXhmYXRfZGlyZWN0X0lP
KHN0cnVjdCBraW9jYiAqaW9jYiwgc3RydWN0IGlvdl9pdGVyICppdGVyKQ0KIAkgKiBjb25kaXRp
b24gb2YgZXhmYXRfZ2V0X2Jsb2NrKCkgYW5kIC0+dHJ1bmNhdGUoKS4NCiAJICovDQogCXJldCA9
IGJsb2NrZGV2X2RpcmVjdF9JTyhpb2NiLCBpbm9kZSwgaXRlciwgZXhmYXRfZ2V0X2Jsb2NrKTsN
Ci0JaWYgKHJldCA8IDAgJiYgKHJ3ICYgV1JJVEUpKQ0KLQkJZXhmYXRfd3JpdGVfZmFpbGVkKG1h
cHBpbmcsIHNpemUpOw0KKwlpZiAocmV0IDwgMCkgew0KKwkJaWYgKHJ3ICYgV1JJVEUpDQorCQkJ
ZXhmYXRfd3JpdGVfZmFpbGVkKG1hcHBpbmcsIHNpemUpOw0KKw0KKwkJaWYgKHJldCAhPSAtRUlP
Q0JRVUVVRUQpDQorCQkJcmV0dXJuIHJldDsNCisJfSBlbHNlDQorCQlzaXplID0gcG9zICsgcmV0
Ow0KKw0KKwkvKiB6ZXJvIHRoZSB1bndyaXR0ZW4gcGFydCBpbiB0aGUgcGFydGlhbGx5IHdyaXR0
ZW4gYmxvY2sgKi8NCisJaWYgKChydyAmIFJFQUQpICYmIHBvcyA8IGVpLT52YWxpZF9zaXplICYm
IGVpLT52YWxpZF9zaXplIDwgc2l6ZSkgew0KKwkJaW92X2l0ZXJfcmV2ZXJ0KGl0ZXIsIHNpemUg
LSBlaS0+dmFsaWRfc2l6ZSk7DQorCQlpb3ZfaXRlcl96ZXJvKHNpemUgLSBlaS0+dmFsaWRfc2l6
ZSwgaXRlcik7DQorCX0NCisNCiAJcmV0dXJuIHJldDsNCiB9DQogDQpAQCAtNTM3LDYgKzYyNiw3
IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmlsbF9pbm9kZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1
Y3QgZXhmYXRfZGlyX2VudHJ5ICppbmZvKQ0KIAllaS0+c3RhcnRfY2x1ID0gaW5mby0+c3RhcnRf
Y2x1Ow0KIAllaS0+ZmxhZ3MgPSBpbmZvLT5mbGFnczsNCiAJZWktPnR5cGUgPSBpbmZvLT50eXBl
Ow0KKwllaS0+dmFsaWRfc2l6ZSA9IGluZm8tPnZhbGlkX3NpemU7DQogDQogCWVpLT52ZXJzaW9u
ID0gMDsNCiAJZWktPmhpbnRfc3RhdC5laWR4ID0gMDsNCmRpZmYgLS1naXQgYS9mcy9leGZhdC9u
YW1laS5jIGIvZnMvZXhmYXQvbmFtZWkuYw0KaW5kZXggNWQ3MzdlMGI2MzlhLi45YzU0OWZkMTFm
YzggMTAwNjQ0DQotLS0gYS9mcy9leGZhdC9uYW1laS5jDQorKysgYi9mcy9leGZhdC9uYW1laS5j
DQpAQCAtNDA2LDYgKzQwNiw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZF9lbXB0eV9lbnRyeShz
dHJ1Y3QgaW5vZGUgKmlub2RlLA0KIAkJaV9zaXplX3dyaXRlKGlub2RlLCBzaXplKTsNCiAJCWVp
LT5pX3NpemVfb25kaXNrICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KIAkJZWktPmlfc2l6ZV9hbGln
bmVkICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KKwkJZWktPnZhbGlkX3NpemUgKz0gc2JpLT5jbHVz
dGVyX3NpemU7DQogCQllaS0+ZmxhZ3MgPSBwX2Rpci0+ZmxhZ3M7DQogCQlpbm9kZS0+aV9ibG9j
a3MgKz0gc2JpLT5jbHVzdGVyX3NpemUgPj4gOTsNCiAJfQ0KQEAgLTU1OCw2ICs1NTksOCBAQCBz
dGF0aWMgaW50IGV4ZmF0X2FkZF9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBjb25zdCBjaGFy
ICpwYXRoLA0KIAkJaW5mby0+c2l6ZSA9IGNsdV9zaXplOw0KIAkJaW5mby0+bnVtX3N1YmRpcnMg
PSBFWEZBVF9NSU5fU1VCRElSOw0KIAl9DQorCWluZm8tPnZhbGlkX3NpemUgPSBpbmZvLT5zaXpl
Ow0KKw0KIAltZW1zZXQoJmluZm8tPmNydGltZSwgMCwgc2l6ZW9mKGluZm8tPmNydGltZSkpOw0K
IAltZW1zZXQoJmluZm8tPm10aW1lLCAwLCBzaXplb2YoaW5mby0+bXRpbWUpKTsNCiAJbWVtc2V0
KCZpbmZvLT5hdGltZSwgMCwgc2l6ZW9mKGluZm8tPmF0aW1lKSk7DQpAQCAtNjYwLDYgKzY2Myw4
IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZChzdHJ1Y3QgaW5vZGUgKmRpciwgc3RydWN0IHFzdHIg
KnFuYW1lLA0KIAlpbmZvLT50eXBlID0gZXhmYXRfZ2V0X2VudHJ5X3R5cGUoZXApOw0KIAlpbmZv
LT5hdHRyID0gbGUxNl90b19jcHUoZXAtPmRlbnRyeS5maWxlLmF0dHIpOw0KIAlpbmZvLT5zaXpl
ID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUpOw0KKwlpbmZvLT52
YWxpZF9zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUpOw0K
KwlpbmZvLT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnNpemUpOw0KIAlp
ZiAoaW5mby0+c2l6ZSA9PSAwKSB7DQogCQlpbmZvLT5mbGFncyA9IEFMTE9DX05PX0ZBVF9DSEFJ
TjsNCiAJCWluZm8tPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVSOw0KQEAgLTEyODgsNiAr
MTI5Myw3IEBAIHN0YXRpYyBpbnQgX19leGZhdF9yZW5hbWUoc3RydWN0IGlub2RlICpvbGRfcGFy
ZW50X2lub2RlLA0KIAkJCX0NCiANCiAJCQlpX3NpemVfd3JpdGUobmV3X2lub2RlLCAwKTsNCisJ
CQluZXdfZWktPnZhbGlkX3NpemUgPSAwOw0KIAkJCW5ld19laS0+c3RhcnRfY2x1ID0gRVhGQVRf
RU9GX0NMVVNURVI7DQogCQkJbmV3X2VpLT5mbGFncyA9IEFMTE9DX05PX0ZBVF9DSEFJTjsNCiAJ
CX0NCi0tIA0KMi4yNS4xDQo=

