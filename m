Return-Path: <linux-fsdevel-owner@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 0E4DC3A7636
	for <lists+linux-fsdevel@lfdr.de>; Tue, 15 Jun 2021 07:00:38 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229760AbhFOFCk (ORCPT <rfc822;lists+linux-fsdevel@lfdr.de>);
        Tue, 15 Jun 2021 01:02:40 -0400
Received: from mx20.baidu.com ([111.202.115.85]:52940 "EHLO baidu.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S229463AbhFOFCj (ORCPT <rfc822;linux-fsdevel@vger.kernel.org>);
        Tue, 15 Jun 2021 01:02:39 -0400
X-Greylist: delayed 7260 seconds by postgrey-1.27 at vger.kernel.org; Tue, 15 Jun 2021 01:02:38 EDT
Received: from BC-Mail-EX02.internal.baidu.com (unknown [172.31.51.42])
        by Forcepoint Email with ESMTPS id 56D1EF7A22EBB9A42484;
        Tue, 15 Jun 2021 09:11:29 +0800 (CST)
Received: from BJHW-MAIL-EX18.internal.baidu.com (10.127.64.20) by
 BC-Mail-EX02.internal.baidu.com (172.31.51.42) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.2242.4; Tue, 15 Jun 2021 09:11:29 +0800
Received: from BC-Mail-Ex20.internal.baidu.com (172.31.51.14) by
 BJHW-MAIL-EX18.internal.baidu.com (10.127.64.20) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.2242.4; Tue, 15 Jun 2021 09:11:28 +0800
Received: from BC-Mail-Ex20.internal.baidu.com ([172.31.51.14]) by
 BC-Mail-Ex20.internal.baidu.com ([172.31.51.14]) with mapi id 15.01.2242.008;
 Tue, 15 Jun 2021 09:11:28 +0800
From:   "Chu,Kaiping" <chukaiping@baidu.com>
To:     David Hildenbrand <david@redhat.com>,
        "mcgrof@kernel.org" <mcgrof@kernel.org>,
        "keescook@chromium.org" <keescook@chromium.org>,
        "yzaikin@google.com" <yzaikin@google.com>,
        "akpm@linux-foundation.org" <akpm@linux-foundation.org>,
        "vbabka@suse.cz" <vbabka@suse.cz>,
        "nigupta@nvidia.com" <nigupta@nvidia.com>,
        "bhe@redhat.com" <bhe@redhat.com>,
        "khalid.aziz@oracle.com" <khalid.aziz@oracle.com>,
        "iamjoonsoo.kim@lge.com" <iamjoonsoo.kim@lge.com>,
        "mateusznosek0@gmail.com" <mateusznosek0@gmail.com>,
        "sh_def@163.com" <sh_def@163.com>
CC:     "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "linux-mm@kvack.org" <linux-mm@kvack.org>
Subject: =?utf-8?B?562U5aSNOiBbUEFUQ0ggdjRdIG1tL2NvbXBhY3Rpb246IGxldCBwcm9hY3Rp?=
 =?utf-8?Q?ve_compaction_order_configurable?=
Thread-Topic: [PATCH v4] mm/compaction: let proactive compaction order
 configurable
Thread-Index: AQHXXRx7uGTRst2hN0Oxvb824V5mK6sUS/Tw
Date:   Tue, 15 Jun 2021 01:11:28 +0000
Message-ID: <af26c999229a4c0dbb8c772ce50f60e4@baidu.com>
References: <1619576901-9531-1-git-send-email-chukaiping@baidu.com>
 <a3f6628a-8165-429f-0383-c522b4c49197@redhat.com>
In-Reply-To: <a3f6628a-8165-429f-0383-c522b4c49197@redhat.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.22.194.30]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Precedence: bulk
List-ID: <linux-fsdevel.vger.kernel.org>
X-Mailing-List: linux-fsdevel@vger.kernel.org

DQoNCj4gLS0tLS3pgq7ku7bljp/ku7YtLS0tLQ0KPiDlj5Hku7bkuro6IERhdmlkIEhpbGRlbmJy
YW5kIDxkYXZpZEByZWRoYXQuY29tPg0KPiDlj5HpgIHml7bpl7Q6IDIwMjHlubQ25pyIOeaXpSAx
ODo0NQ0KPiDmlLbku7bkuro6IENodSxLYWlwaW5nIDxjaHVrYWlwaW5nQGJhaWR1LmNvbT47IG1j
Z3JvZkBrZXJuZWwub3JnOw0KPiBrZWVzY29va0BjaHJvbWl1bS5vcmc7IHl6YWlraW5AZ29vZ2xl
LmNvbTsgYWtwbUBsaW51eC1mb3VuZGF0aW9uLm9yZzsNCj4gdmJhYmthQHN1c2UuY3o7IG5pZ3Vw
dGFAbnZpZGlhLmNvbTsgYmhlQHJlZGhhdC5jb207DQo+IGtoYWxpZC5heml6QG9yYWNsZS5jb207
IGlhbWpvb25zb28ua2ltQGxnZS5jb207DQo+IG1hdGV1c3pub3NlazBAZ21haWwuY29tOyBzaF9k
ZWZAMTYzLmNvbQ0KPiDmioTpgIE6IGxpbnV4LWtlcm5lbEB2Z2VyLmtlcm5lbC5vcmc7IGxpbnV4
LWZzZGV2ZWxAdmdlci5rZXJuZWwub3JnOw0KPiBsaW51eC1tbUBrdmFjay5vcmcNCj4g5Li76aKY
OiBSZTogW1BBVENIIHY0XSBtbS9jb21wYWN0aW9uOiBsZXQgcHJvYWN0aXZlIGNvbXBhY3Rpb24g
b3JkZXINCj4gY29uZmlndXJhYmxlDQo+IA0KPiBPbiAyOC4wNC4yMSAwNDoyOCwgY2h1a2FpcGlu
ZyB3cm90ZToNCj4gPiBDdXJyZW50bHkgdGhlIHByb2FjdGl2ZSBjb21wYWN0aW9uIG9yZGVyIGlz
IGZpeGVkIHRvDQo+ID4gQ09NUEFDVElPTl9IUEFHRV9PUkRFUig5KSwgaXQncyBPSyBpbiBtb3N0
IG1hY2hpbmVzIHdpdGggbG90cyBvZg0KPiA+IG5vcm1hbCA0S0IgbWVtb3J5LCBidXQgaXQncyB0
b28gaGlnaCBmb3IgdGhlIG1hY2hpbmVzIHdpdGggc21hbGwNCj4gPiBub3JtYWwgbWVtb3J5LCBm
b3IgZXhhbXBsZSB0aGUgbWFjaGluZXMgd2l0aCBtb3N0IG1lbW9yeSBjb25maWd1cmVkIGFzDQo+
ID4gMUdCIGh1Z2V0bGJmcyBodWdlIHBhZ2VzLiBJbiB0aGVzZSBtYWNoaW5lcyB0aGUgbWF4IG9y
ZGVyIG9mIGZyZWUNCj4gPiBwYWdlcyBpcyBvZnRlbiBiZWxvdyA5LCBhbmQgaXQncyBhbHdheXMg
YmVsb3cgOSBldmVuIHdpdGggaGFyZA0KPiA+IGNvbXBhY3Rpb24uIFRoaXMgd2lsbCBsZWFkIHRv
IHByb2FjdGl2ZSBjb21wYWN0aW9uIGJlIHRyaWdnZXJlZCB2ZXJ5DQo+ID4gZnJlcXVlbnRseS4g
SW4gdGhlc2UgbWFjaGluZXMgd2Ugb25seSBjYXJlIGFib3V0IG9yZGVyIG9mIDMgb3IgNC4NCj4g
PiBUaGlzIHBhdGNoIGV4cG9ydCB0aGUgb2RlciB0byBwcm9jIGFuZCBsZXQgaXQgY29uZmlndXJh
YmxlIGJ5IHVzZXIsDQo+ID4gYW5kIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHN0aWxsIENPTVBBQ1RJ
T05fSFBBR0VfT1JERVIuDQo+ID4NCj4gPiBTaWduZWQtb2ZmLWJ5OiBjaHVrYWlwaW5nIDxjaHVr
YWlwaW5nQGJhaWR1LmNvbT4NCj4gPiBSZXBvcnRlZC1ieToga2VybmVsIHRlc3Qgcm9ib3QgPGxr
cEBpbnRlbC5jb20+DQo+ID4gLS0tDQo+ID4NCj4gPiBDaGFuZ2VzIGluIHY0Og0KPiA+ICAgICAg
LSBjaGFuZ2UgdGhlIHN5c2N0bCBmaWxlIG5hbWUgdG8gcHJvYWN0aXZlX2NvbXBhdGlvbl9vcmRl
cg0KPiA+DQo+ID4gQ2hhbmdlcyBpbiB2MzoNCj4gPiAgICAgIC0gY2hhbmdlIHRoZSBtaW4gdmFs
dWUgb2YgY29tcGFjdGlvbl9vcmRlciB0byAxIGJlY2F1c2UgdGhlDQo+IGZyYWdtZW50YXRpb24N
Cj4gPiAgICAgICAgaW5kZXggb2Ygb3JkZXIgMCBpcyBhbHdheXMgMA0KPiA+ICAgICAgLSBtb3Zl
IHRoZSBkZWZpbml0aW9uIG9mIG1heF9idWRkeV96b25lIGludG8gI2lmZGVmDQo+ID4gQ09ORklH
X0NPTVBBQ1RJT04NCj4gPg0KPiA+IENoYW5nZXMgaW4gdjI6DQo+ID4gICAgICAtIGZpeCB0aGUg
Y29tcGlsZSBlcnJvciBpbiBpYTY0IGFuZCBwb3dlcnBjLCBtb3ZlIHRoZSBpbml0aWFsaXphdGlv
bg0KPiA+ICAgICAgICBvZiBzeXNjdGxfY29tcGFjdGlvbl9vcmRlciB0byBrY29tcGFjdGRfaW5p
dCBiZWNhdXNlDQo+ID4gICAgICAgIENPTVBBQ1RJT05fSFBBR0VfT1JERVIgaXMgYSB2YXJpYWJs
ZSBpbiB0aGVzZSBhcmNoaXRlY3R1cmVzDQo+ID4gICAgICAtIGNoYW5nZSB0aGUgaGFyZCBjb2Rl
ZCBtYXggb3JkZXIgbnVtYmVyIGZyb20gMTAgdG8gTUFYX09SREVSIC0NCj4gMQ0KPiA+DQo+ID4g
ICBpbmNsdWRlL2xpbnV4L2NvbXBhY3Rpb24uaCB8ICAgIDEgKw0KPiA+ICAga2VybmVsL3N5c2N0
bC5jICAgICAgICAgICAgfCAgIDEwICsrKysrKysrKysNCj4gPiAgIG1tL2NvbXBhY3Rpb24uYyAg
ICAgICAgICAgIHwgICAxMiArKysrKysrKy0tLS0NCj4gPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTkg
aW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkNCj4gPg0KPiA+IGRpZmYgLS1naXQgYS9pbmNs
dWRlL2xpbnV4L2NvbXBhY3Rpb24uaCBiL2luY2x1ZGUvbGludXgvY29tcGFjdGlvbi5oDQo+ID4g
aW5kZXggZWQ0MDcwZS4uYTAyMjZiMSAxMDA2NDQNCj4gPiAtLS0gYS9pbmNsdWRlL2xpbnV4L2Nv
bXBhY3Rpb24uaA0KPiA+ICsrKyBiL2luY2x1ZGUvbGludXgvY29tcGFjdGlvbi5oDQo+ID4gQEAg
LTgzLDYgKzgzLDcgQEAgc3RhdGljIGlubGluZSB1bnNpZ25lZCBsb25nIGNvbXBhY3RfZ2FwKHVu
c2lnbmVkIGludA0KPiBvcmRlcikNCj4gPiAgICNpZmRlZiBDT05GSUdfQ09NUEFDVElPTg0KPiA+
ICAgZXh0ZXJuIGludCBzeXNjdGxfY29tcGFjdF9tZW1vcnk7DQo+ID4gICBleHRlcm4gdW5zaWdu
ZWQgaW50IHN5c2N0bF9jb21wYWN0aW9uX3Byb2FjdGl2ZW5lc3M7DQo+ID4gK2V4dGVybiB1bnNp
Z25lZCBpbnQgc3lzY3RsX3Byb2FjdGl2ZV9jb21wYWN0aW9uX29yZGVyOw0KPiA+ICAgZXh0ZXJu
IGludCBzeXNjdGxfY29tcGFjdGlvbl9oYW5kbGVyKHN0cnVjdCBjdGxfdGFibGUgKnRhYmxlLCBp
bnQgd3JpdGUsDQo+ID4gICAJCQl2b2lkICpidWZmZXIsIHNpemVfdCAqbGVuZ3RoLCBsb2ZmX3Qg
KnBwb3MpOw0KPiA+ICAgZXh0ZXJuIGludCBzeXNjdGxfZXh0ZnJhZ190aHJlc2hvbGQ7IGRpZmYg
LS1naXQgYS9rZXJuZWwvc3lzY3RsLmMNCj4gPiBiL2tlcm5lbC9zeXNjdGwuYyBpbmRleCA2MmZi
ZDA5Li5lZDkwMTJlIDEwMDY0NA0KPiA+IC0tLSBhL2tlcm5lbC9zeXNjdGwuYw0KPiA+ICsrKyBi
L2tlcm5lbC9zeXNjdGwuYw0KPiA+IEBAIC0xOTYsNiArMTk2LDcgQEAgZW51bSBzeXNjdGxfd3Jp
dGVzX21vZGUgew0KPiA+ICAgI2VuZGlmIC8qIENPTkZJR19TQ0hFRF9ERUJVRyAqLw0KPiA+DQo+
ID4gICAjaWZkZWYgQ09ORklHX0NPTVBBQ1RJT04NCj4gPiArc3RhdGljIGludCBtYXhfYnVkZHlf
em9uZSA9IE1BWF9PUkRFUiAtIDE7DQo+ID4gICBzdGF0aWMgaW50IG1pbl9leHRmcmFnX3RocmVz
aG9sZDsNCj4gPiAgIHN0YXRpYyBpbnQgbWF4X2V4dGZyYWdfdGhyZXNob2xkID0gMTAwMDsNCj4g
PiAgICNlbmRpZg0KPiA+IEBAIC0yODcxLDYgKzI4NzIsMTUgQEAgaW50IHByb2NfZG9fc3RhdGlj
X2tleShzdHJ1Y3QgY3RsX3RhYmxlICp0YWJsZSwNCj4gaW50IHdyaXRlLA0KPiA+ICAgCQkuZXh0
cmEyCQk9ICZvbmVfaHVuZHJlZCwNCj4gPiAgIAl9LA0KPiA+ICAgCXsNCj4gPiArCQkucHJvY25h
bWUgICAgICAgPSAicHJvYWN0aXZlX2NvbXBhdGlvbl9vcmRlciIsDQo+ID4gKwkJLmRhdGEgICAg
ICAgICAgID0gJnN5c2N0bF9wcm9hY3RpdmVfY29tcGFjdGlvbl9vcmRlciwNCj4gPiArCQkubWF4
bGVuICAgICAgICAgPSBzaXplb2Yoc3lzY3RsX3Byb2FjdGl2ZV9jb21wYWN0aW9uX29yZGVyKSwN
Cj4gPiArCQkubW9kZSAgICAgICAgICAgPSAwNjQ0LA0KPiA+ICsJCS5wcm9jX2hhbmRsZXIgICA9
IHByb2NfZG9pbnR2ZWNfbWlubWF4LA0KPiA+ICsJCS5leHRyYTEgICAgICAgICA9IFNZU0NUTF9P
TkUsDQo+ID4gKwkJLmV4dHJhMiAgICAgICAgID0gJm1heF9idWRkeV96b25lLA0KPiA+ICsJfSwN
Cj4gPiArCXsNCj4gPiAgIAkJLnByb2NuYW1lCT0gImV4dGZyYWdfdGhyZXNob2xkIiwNCj4gPiAg
IAkJLmRhdGEJCT0gJnN5c2N0bF9leHRmcmFnX3RocmVzaG9sZCwNCj4gPiAgIAkJLm1heGxlbgkJ
PSBzaXplb2YoaW50KSwNCj4gPiBkaWZmIC0tZ2l0IGEvbW0vY29tcGFjdGlvbi5jIGIvbW0vY29t
cGFjdGlvbi5jIGluZGV4IGUwNGY0NDcuLjE3MTQzNmUNCj4gPiAxMDA2NDQNCj4gPiAtLS0gYS9t
bS9jb21wYWN0aW9uLmMNCj4gPiArKysgYi9tbS9jb21wYWN0aW9uLmMNCj4gPiBAQCAtMTkyNSwx
NyArMTkyNSwxOCBAQCBzdGF0aWMgYm9vbCBrc3dhcGRfaXNfcnVubmluZyhwZ19kYXRhX3QNCj4g
PiAqcGdkYXQpDQo+ID4NCj4gPiAgIC8qDQo+ID4gICAgKiBBIHpvbmUncyBmcmFnbWVudGF0aW9u
IHNjb3JlIGlzIHRoZSBleHRlcm5hbCBmcmFnbWVudGF0aW9uIHdydCB0bw0KPiA+IHRoZQ0KPiA+
IC0gKiBDT01QQUNUSU9OX0hQQUdFX09SREVSLiBJdCByZXR1cm5zIGEgdmFsdWUgaW4gdGhlIHJh
bmdlIFswLCAxMDBdLg0KPiA+ICsgKiBzeXNjdGxfcHJvYWN0aXZlX2NvbXBhY3Rpb25fb3JkZXIu
IEl0IHJldHVybnMgYSB2YWx1ZSBpbiB0aGUgcmFuZ2UNCj4gPiArICogWzAsIDEwMF0uDQo+ID4g
ICAgKi8NCj4gPiAgIHN0YXRpYyB1bnNpZ25lZCBpbnQgZnJhZ21lbnRhdGlvbl9zY29yZV96b25l
KHN0cnVjdCB6b25lICp6b25lKQ0KPiA+ICAgew0KPiA+IC0JcmV0dXJuIGV4dGZyYWdfZm9yX29y
ZGVyKHpvbmUsIENPTVBBQ1RJT05fSFBBR0VfT1JERVIpOw0KPiA+ICsJcmV0dXJuIGV4dGZyYWdf
Zm9yX29yZGVyKHpvbmUsIHN5c2N0bF9wcm9hY3RpdmVfY29tcGFjdGlvbl9vcmRlcik7DQo+ID4g
ICB9DQo+ID4NCj4gPiAgIC8qDQo+ID4gICAgKiBBIHdlaWdodGVkIHpvbmUncyBmcmFnbWVudGF0
aW9uIHNjb3JlIGlzIHRoZSBleHRlcm5hbA0KPiA+IGZyYWdtZW50YXRpb24NCj4gPiAtICogd3J0
IHRvIHRoZSBDT01QQUNUSU9OX0hQQUdFX09SREVSIHNjYWxlZCBieSB0aGUgem9uZSdzIHNpemUu
IEl0DQo+ID4gLSAqIHJldHVybnMgYSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWzAsIDEwMF0uDQo+ID4g
KyAqIHdydCB0byB0aGUgc3lzY3RsX3Byb2FjdGl2ZV9jb21wYWN0aW9uX29yZGVyIHNjYWxlZCBi
eSB0aGUgem9uZSdzIHNpemUuDQo+ID4gKyAqIEl0IHJldHVybnMgYSB2YWx1ZSBpbiB0aGUgcmFu
Z2UgWzAsIDEwMF0uDQo+ID4gICAgKg0KPiA+ICAgICogVGhlIHNjYWxpbmcgZmFjdG9yIGVuc3Vy
ZXMgdGhhdCBwcm9hY3RpdmUgY29tcGFjdGlvbiBmb2N1c2VzIG9uIGxhcmdlcg0KPiA+ICAgICog
em9uZXMgbGlrZSBaT05FX05PUk1BTCwgcmF0aGVyIHRoYW4gc21hbGxlciwgc3BlY2lhbGl6ZWQg
em9uZXMNCj4gPiBsaWtlIEBAIC0yNjY2LDYgKzI2NjcsNyBAQCBzdGF0aWMgdm9pZCBjb21wYWN0
X25vZGVzKHZvaWQpDQo+ID4gICAgKiBiYWNrZ3JvdW5kLiBJdCB0YWtlcyB2YWx1ZXMgaW4gdGhl
IHJhbmdlIFswLCAxMDBdLg0KPiA+ICAgICovDQo+ID4gICB1bnNpZ25lZCBpbnQgX19yZWFkX21v
c3RseSBzeXNjdGxfY29tcGFjdGlvbl9wcm9hY3RpdmVuZXNzID0gMjA7DQo+ID4gK3Vuc2lnbmVk
IGludCBfX3JlYWRfbW9zdGx5IHN5c2N0bF9wcm9hY3RpdmVfY29tcGFjdGlvbl9vcmRlcjsNCj4g
Pg0KPiA+ICAgLyoNCj4gPiAgICAqIFRoaXMgaXMgdGhlIGVudHJ5IHBvaW50IGZvciBjb21wYWN0
aW5nIGFsbCBub2RlcyB2aWEgQEAgLTI5NTgsNg0KPiA+ICsyOTYwLDggQEAgc3RhdGljIGludCBf
X2luaXQga2NvbXBhY3RkX2luaXQodm9pZCkNCj4gPiAgIAlpbnQgbmlkOw0KPiA+ICAgCWludCBy
ZXQ7DQo+ID4NCj4gPiArCXN5c2N0bF9wcm9hY3RpdmVfY29tcGFjdGlvbl9vcmRlciA9IENPTVBB
Q1RJT05fSFBBR0VfT1JERVI7DQo+ID4gKw0KPiA+ICAgCXJldCA9IGNwdWhwX3NldHVwX3N0YXRl
X25vY2FsbHMoQ1BVSFBfQVBfT05MSU5FX0RZTiwNCj4gPiAgIAkJCQkJIm1tL2NvbXBhY3Rpb246
b25saW5lIiwNCj4gPiAgIAkJCQkJa2NvbXBhY3RkX2NwdV9vbmxpbmUsIE5VTEwpOw0KPiA+DQo+
IA0KPiBIbSwgZG8gd2UgYWN0dWFsbHkgd2FudCB0byBwdXQgYW4gdXBwZXIgbGltaXQgdG8gdGhl
IG9yZGVyIGEgdXNlciBjYW4gc3VwcGx5Pw0KTm/vvIx3ZSBzaG91bGQgYWxsb3cgdXNlciB0byBj
b25maWd1cmUgdGhlIG9yZGVyIGZyb20gMSB0byBNQVhfT1JERVIgLSAxLg0KPiANCj4gLS0NCj4g
VGhhbmtzLA0KPiANCj4gRGF2aWQgLyBkaGlsZGVuYg0KDQo=
