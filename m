Return-Path: <linux-fsdevel-owner@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 2D18C7AD067
	for <lists+linux-fsdevel@lfdr.de>; Mon, 25 Sep 2023 08:44:52 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S231993AbjIYGoz (ORCPT <rfc822;lists+linux-fsdevel@lfdr.de>);
        Mon, 25 Sep 2023 02:44:55 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:40638 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229537AbjIYGoy (ORCPT
        <rfc822;linux-fsdevel@vger.kernel.org>);
        Mon, 25 Sep 2023 02:44:54 -0400
Received: from mx07-001d1705.pphosted.com (mx07-001d1705.pphosted.com [185.132.183.11])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 11823C5
        for <linux-fsdevel@vger.kernel.org>; Sun, 24 Sep 2023 23:44:45 -0700 (PDT)
Received: from pps.filterd (m0209327.ppops.net [127.0.0.1])
        by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 38P54CUk009680;
        Mon, 25 Sep 2023 05:29:52 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : mime-version : content-type :
 content-transfer-encoding; s=S1;
 bh=A02ScO0nTvJLh39dwJgDtOqiRHux9ggMFDZbAHODmtE=;
 b=hUi0OmX86AkxHrJKw4Dza/mU/LPkfVWyt1xvFNn0y3B92mM98dYFwRDXteMAZNRhdjXI
 CM8zfnLKjBKuP5MjC2U6cXLdeVbmQ3Q1zy9odzGBhczcgBDqW3dVPuRMlJ+/DV4/n/kv
 UUkpwduWPij6lcYGDrHzhIUBbotIplnHnr1kaA3txRKrDKcndyScAvw8atsFW0+KRBDo
 s3P/obsCmfzGIsZTYLQQALmP7jujGZKgDM0m44rp4mbEzQyRX2K9Er5JQsLDo+DBHXe1
 qM/RS460beO4uu9W8Gx+NukHV34QIkxuyoZnnlYE/9FE3U5pZioQMtZUrcmIweH9zbDb fg== 
Received: from apc01-psa-obe.outbound.protection.outlook.com (mail-psaapc01lp2047.outbound.protection.outlook.com [104.47.26.47])
        by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3t9pw3sfb8-2
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
        Mon, 25 Sep 2023 05:29:52 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=NcF4gBQ8O7KrxEQM5E3EdeV1CshvfSTfZ6sUVZ+67FL/woOfGPLA1lWmpXsCRWy5vglC+qVwv6QTcm1miusvbH/6f0X3LPeEeru5EWAHcDInu0ayh3v0DWoibcB+xdze9dOwgK3s6nrINfV0SUTpc4e01Q2MNZ7XSZV9q8Vs3CQRaRKDDYDYjTGJigS7uuIi/6B5LcRfI7IWqD2vEKcroNNSZ8ZwsRO1pzwMS+oPf4qwck9JtzwIrXly1G9Pqdvikt/WQGncFJ+srTyP6LwHF1C820gFf8nydnO6Z5ihqAMi0w2x5w96AMLWvWOzNzdjkZyBCJRF9PbEaOlXmsx2Dg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=A02ScO0nTvJLh39dwJgDtOqiRHux9ggMFDZbAHODmtE=;
 b=TmwHTwy6xGpcTPOsBslWma+joPE9pEczQS27HOdbL0m0kVpnpbrqheoQB+0qSQNi+kJfN5BAKOPbkgq+rHVghNLtjE8LLlEodBn8VxeKrGtuYDjuNO8H/Wnr8BYZojVQwl+HIs76F8Z3c8QfDgn7+ba3oKTSDUnVyFFxEbYaKUtlZ62nq6Y+YwMpwH5+5fONmwvU6ZX8+xIlH2/A5NGehYhP/B7QLPJwSL3WnCkBsUgpS1wI43SpKpbWe42DiCAIcpYcGBdS0goPJOh67/ZmoufUMaY2V/4asBZsIeAOOhdj04ZrcXLYty4nQmI2Q6O0i6eHqFI93hQWeftVShBnIQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by TYSPR04MB7081.apcprd04.prod.outlook.com (2603:1096:400:47d::8) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6813.28; Mon, 25 Sep
 2023 05:29:48 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::f9d4:e3c8:e9c0:1ad]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::f9d4:e3c8:e9c0:1ad%6]) with mapi id 15.20.6813.027; Mon, 25 Sep 2023
 05:29:48 +0000
From:   "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To:     "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com" <sj1557.seo@samsung.com>
CC:     "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com" <Wataru.Aoyama@sony.com>
Subject: [PATCH v3 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v3 1/2] exfat: change to get file size from DataLength
Thread-Index: AdnvcJ5Hu5/6OJRdRTGqnNdIG/us0w==
Date:   Mon, 25 Sep 2023 05:29:47 +0000
Message-ID: <PUZPR04MB631680B3228D46AE03AD433481FCA@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|TYSPR04MB7081:EE_
x-ms-office365-filtering-correlation-id: b96c5941-c180-4dca-0420-08dbbd886f17
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: QXo5Qvgmg5X0KpwnvpnKD4HilNzVZv9iciP9ZMilebnksxaWRZwm9iFqsJ8DmtYTtXUxNHbMAgs6uE4g5xTiHb5Rpb5GjpHMtwI45Up/5OUVVtn5yhPUWsqlx6vCkw68Of7AgHt962muxNXqVPtnOOF91jJguIn5iORdQM7VZ0GcffEplLkz+aKvqvNfHQs8natbIbC4u43ayzhdBbfKqZ6EE9B0zlE2NcnTwieptPo94abHlClXBchTK19V+j2KRahIgf5wM+CkH/4wtrpO7L2H9vFtVtmEjj4UkjGUbolAnTZYGfUz/wAi9YY+qbCnrCAr4Wz4pf6knHpLfTEhgo4lsN5iojhKEA/pOLrn24Xm2Sls/HqmWDGGo6dZKp6mpDUws0JjEeINhoHZ+Ae3PZtZ/OxgqQFEcp8gdzwGmV8Bv67eYeJXZy+69mM393hZkEH1aSRKtOmjD7ADF2/ZRvVdwCu/gtRTuXTjDYzyx7c70V7y8kR6T/GKChhWgOZBlleXxnA2cyJVjNncWhWmJvxJlyMzng4bvrct39kQcyA72n7rLTqhprQwyy3LqKsqPzxQ+hiaZDr1eTgcM7SlAG4yMnRkL8jSkgoMO7Wqtqfr5eE/D63kaVNy9mMj3jj3
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(39860400002)(396003)(136003)(366004)(346002)(376002)(230922051799003)(186009)(451199024)(1800799009)(30864003)(8936002)(4326008)(5660300002)(8676002)(2906002)(52536014)(316002)(41300700001)(66446008)(64756008)(66556008)(55016003)(66476007)(54906003)(110136005)(66946007)(76116006)(26005)(107886003)(33656002)(9686003)(71200400001)(38100700002)(82960400001)(122000001)(38070700005)(86362001)(478600001)(83380400001)(6506007)(7696005);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?dlBTZTFjMEZPdFY2Sjd4VFN0cWpIMG8rdXAxZGVOMy9tVGp6WW5TbEZiYUpQ?=
 =?utf-8?B?MVFQODFDUnk0bzFBeHRlQW1lZklOV0JORGVPenp4NzZIdFpKbm84cGtOemRV?=
 =?utf-8?B?Y2tTNkEyL0ZEQXFyWFZ6N3BrRDl1Vk5QL0lVTHg4Wk51bEFCbGsrdC9MWndO?=
 =?utf-8?B?QVhhejg1c3hFdHB6QlF2Wm1GMEVNbGd6SncyaHdnSUlINnkvVnBSTWFDVUly?=
 =?utf-8?B?U2IxdFI3dTNaTEtyUVNEOXIvVHFxcXNpMnJTT2Y1VVA0WG80MzJXaHBQU1Rr?=
 =?utf-8?B?MTl3VlRtcHJJWHZjQ1VWbWQwV0NsTzNpaUdZUlZFUWdCWjBFcWpxeFZVUHFM?=
 =?utf-8?B?aWlha2ZXTTlJYnhLUDJjTjlhZGpLWk5kWFpIOXhVL1daVnlGT3BEbTFEY3ZR?=
 =?utf-8?B?aFVNUU1OL0ExZ2xiNlRMYVRNaHdmSVFjS3lWOHM0SzVYMWpDRHpaUVdSWUpl?=
 =?utf-8?B?NXQwQVZpclIyVGpXc3dKMy9YOUdDZnl3UnRMNXVuRi9hRE03bDZ4U3Fjd1Jm?=
 =?utf-8?B?NG1lcVZGV3Fvd0VGMWw5LzhaTUZ0eWFvOStLUWsxOXI5RGZ2U01IWW1zaEVm?=
 =?utf-8?B?a0VSQklzYy9sQ3V3UGg4NVdsOXNMK2ZhNXROeUk1OWRmOERBOWwxUlo3ZVJC?=
 =?utf-8?B?UmpSQkxhS0xpT1p6a21MczV4bU5lQUhmYm82NmJ0MC9ZbU8xN0VlUm9PV1ZK?=
 =?utf-8?B?MXlJWFh5TGVZN2xJRS8wSEROZnAvaHlFNnNuaGpWQkdKMFdHODArMGs4T25C?=
 =?utf-8?B?RjA2dk0xZCszSyt0VUJqS2RHaVZKbUdmV2FjSkMzU3Vtd2lmZkxtRVQ5djNQ?=
 =?utf-8?B?RVJqMkozMjdYRDFDY1BIN0plNk1SRWg5Ung2TlgzUjRrL2lTOW1ha3dxRnBI?=
 =?utf-8?B?V3BjOGl2R1F0YXd3Y0VJVm13WmU1SkY5MkxXMHBrdUZyZ3h2OFJocEFBaG9o?=
 =?utf-8?B?R3dtV1pwVXV1OXRTem1DZit6YnVDRWorWnlUTk1HTlpNR04wV2tTeE1ERG9T?=
 =?utf-8?B?ZkJacnpVZWpjTDlRRkRJWjZSbWVpdWs0aTYvWFBrOTl0WmNFV3g0KzVwRHZU?=
 =?utf-8?B?VTZiclN2SkxHVzdvOWlwTmpLRVp6bzNqZk53eTM3SE96dHM1eTZFcGRMOFFs?=
 =?utf-8?B?SXRkcjhLbDZSSXdoV2pxTkxoYmxYZzdJVzNQSTBWVDhFa1FXQmVEaFAzVFM1?=
 =?utf-8?B?OHBUaXY3UEJpWXlBZGlnTkovTDl4UTlGOFhlVVN4Qm1sTHF1TDViLzBEZG5H?=
 =?utf-8?B?OUFOV0l4cGhYMXlwbkt4aFBsa3B3cS9sMXBFNEE3a0ZGQVU5WWU4QmVhWTJS?=
 =?utf-8?B?MG1mamJKM2lKdTJzODExeWphZWZXME9IZ0RiRkpEa05OY1lCaitrWVRiTDFv?=
 =?utf-8?B?T2N5b2tseFhCdWhjVHBYVHhWSWV3WXNibXFyZFA1TVhkUWdvV3hnM3FwaEZD?=
 =?utf-8?B?WUlWUmlJT2tGUk9nY2hpWVdjUHhsMnZRay9GY0FncThEbXNPaGxWVGtpSVhn?=
 =?utf-8?B?YVl2K3B3ejUzL0ZaTnBtdGJnQjBBaFhPTXQyTnhzdmFLVG1BWEpoa1dFQzhJ?=
 =?utf-8?B?WFRyVk1BYnNBeUI4bVJPVVgxTUI4YTdYYWtqcENNWHZMbzZRTUdRaTJuR3Uz?=
 =?utf-8?B?MVIrVHpwRmIyaGNBd1lSWVRDQkxYUTdNS0RsRHRRTFlyS2ovZnR4NVhUcWRN?=
 =?utf-8?B?L3I4akFrS0dPbkFZSlY0WUxad3lab3ZOR3E0c3BpRmZnOEpXQkVEM0lhTXcy?=
 =?utf-8?B?M2xTblozbURMc1dJNFcvOXVHeEorMEluSUhBYzlkbVIyNFFxWVZOOXpsSzRa?=
 =?utf-8?B?L0JzVyswdTJwanVWdWdyM1h3V2lUMXgvdlBvQS9jM2NIYVdrT3BEU0xPOWtq?=
 =?utf-8?B?MFpHVmtqVXE2a3V5N2YxNGNoQ1RraFNMeWpldUZmOHV1RHl5TDZEQk1OTGNW?=
 =?utf-8?B?aVNaYkFlVGNBUm5RMXhEcUUzTi9TS2dwMW1yMWh0dm4rTWN1UEFGMzIrZ3Nm?=
 =?utf-8?B?MDNpVVUvNm44VVhucTJialAzYmZSa2gzdWplZWRtT1NkQW5zT0NnVXpPZisy?=
 =?utf-8?B?MlFHc0FTZWFEQTAya1ZTZVVwTUdIM0F3Q1U3NStqWDNXeFRMeENYck1BVEQ2?=
 =?utf-8?Q?sWKYyJr3uKAkHdttV6I9X41B8?=
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: /Nvenpfg4dSJCzXY8CQoB76fwsn5Yh52jbCS8krbD1aVrwLXcPk1YQIq77bQuFecw49BC9XHJw9Rjp0kCZD4UjvhJ/pyZpg/1rkCao/VVBPz4oEzfIloliyK5yMMiHRWvl+0Vw2VjhNANd2xmNCmStUBXPfRXoabCUhKZTfv+kGqG/Ljc1ktMrICiti+JL4cH4Fnq7dEQ9pi1gyzsnLjyIDJpZerl3UmpvWuHL/hSwMtX09wf4k3MlPJ9iYYpYyadQTKco6dkSbDTvGyhLBCWCiBsNgAkXpLgTvH7Vw6epU07ySWGqtCWhM3VljSDryKuFGiJalJGKVhObT1Id8Zk21Kv2TVZhtttinI76SoB2quRicVDD6JhUam1skHaU0eDQfCEQHgorRhQMY6oACAPADi0H0QATCv4NpcNAOFrGLL3rjAY3tNvDNdCu3QaWSTkWavROE3yiTnyUsOu09cG7C9EHVsEvjrR5O5JzD5/7EL/X3X1EHuA5EAQV/Pv00PM92FpXtONB0Snly7DjWoVvCgEJibpmsURKn5feFtyD/IcNlF6YIe55tjHVqVE2NuxkGxZkNGYZmvs62fjPmSUHVPZR3Jvp6f4drme7Duc1QH8RyEX723buQ97O3dLZo5FcYMPqs+jAd2MJuzZV6gFG93Ny50jJLunUaMwA2Bsp1kDFoLZUZpi2DlN+E24HhtwAJIKjspu0S6OmR7BY5vFwWc9UDKK8IXHNEJG2ceQn/rEqjQkBWVQPJmdiYgPC1v8IfOmFUmEqfpgElyGwGMEUhVmEa4V8HcuoDzeivq7t3oJe1hsuHvOch5cYeAbzD69Su0qvc0RluWqhWVDveaug==
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: b96c5941-c180-4dca-0420-08dbbd886f17
X-MS-Exchange-CrossTenant-originalarrivaltime: 25 Sep 2023 05:29:47.9393
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 0Vbom3w/OAxu6aI3V2gDsLwKCYVtD1mC9nHE7QwvsZfrWu0eQYoUXTPRgJQdYjs27NVUnygamXa02ykb2xab2w==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: TYSPR04MB7081
X-Proofpoint-GUID: UAXq9L_wbxTIKT-3sdQ3S4UiliaHgjwL
X-Proofpoint-ORIG-GUID: UAXq9L_wbxTIKT-3sdQ3S4UiliaHgjwL
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: UAXq9L_wbxTIKT-3sdQ3S4UiliaHgjwL
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.267,Aquarius:18.0.980,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-09-25_03,2023-09-21_01,2023-05-22_02
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_NONE,
        RCVD_IN_MSPIKE_H5,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_NONE
        autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-fsdevel.vger.kernel.org>
X-Mailing-List: linux-fsdevel@vger.kernel.org

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDQgKysNCiBmcy9leGZhdC9maWxlLmMgICAgIHwgMTIzICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystDQogZnMvZXhmYXQvaW5vZGUu
YyAgICB8ICA5NCArKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0NCiBmcy9leGZhdC9u
YW1laS5jICAgIHwgICA2ICsrKw0KIDQgZmlsZXMgY2hhbmdlZCwgMjEwIGluc2VydGlvbnMoKyks
IDE3IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZXhmYXRfZnMuaCBiL2Zz
L2V4ZmF0L2V4ZmF0X2ZzLmgNCmluZGV4IDIxOWIxY2Y5ZDA0MS4uMDQxYTVkMGY1MWRlIDEwMDY0
NA0KLS0tIGEvZnMvZXhmYXQvZXhmYXRfZnMuaA0KKysrIGIvZnMvZXhmYXQvZXhmYXRfZnMuaA0K
QEAgLTIxNCw2ICsyMTQsNyBAQCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5IHsNCiAJdW5zaWduZWQg
Y2hhciBmbGFnczsNCiAJdW5zaWduZWQgc2hvcnQgYXR0cjsNCiAJbG9mZl90IHNpemU7DQorCWxv
ZmZfdCB2YWxpZF9zaXplOw0KIAl1bnNpZ25lZCBpbnQgbnVtX3N1YmRpcnM7DQogCXN0cnVjdCB0
aW1lc3BlYzY0IGF0aW1lOw0KIAlzdHJ1Y3QgdGltZXNwZWM2NCBtdGltZTsNCkBAIC0zMjMsNiAr
MzI0LDcgQEAgc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gew0KIAlsb2ZmX3QgaV9zaXplX2FsaWdu
ZWQ7DQogCS8qIG9uLWRpc2sgcG9zaXRpb24gb2YgZGlyZWN0b3J5IGVudHJ5IG9yIDAgKi8NCiAJ
bG9mZl90IGlfcG9zOw0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCiAJLyogaGFzaCBieSBpX2xvY2F0
aW9uICovDQogCXN0cnVjdCBobGlzdF9ub2RlIGlfaGFzaF9mYXQ7DQogCS8qIHByb3RlY3QgYm1h
cCBhZ2FpbnN0IHRydW5jYXRlICovDQpAQCAtNTIxLDYgKzUyMyw4IEBAIGludCBfX2V4ZmF0X3dy
aXRlX2lub2RlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIGludCBzeW5jKTsNCiBpbnQgZXhmYXRfd3Jp
dGVfaW5vZGUoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IHdyaXRlYmFja19jb250cm9sICp3
YmMpOw0KIHZvaWQgZXhmYXRfZXZpY3RfaW5vZGUoc3RydWN0IGlub2RlICppbm9kZSk7DQogaW50
IGV4ZmF0X2Jsb2NrX3RydW5jYXRlX3BhZ2Uoc3RydWN0IGlub2RlICppbm9kZSwgbG9mZl90IGZy
b20pOw0KK2ludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2RlICppbm9kZSwgc2VjdG9yX3Qg
aWJsb2NrLA0KKwkJc3RydWN0IGJ1ZmZlcl9oZWFkICpiaF9yZXN1bHQsIGludCBjcmVhdGUpOw0K
IA0KIC8qIGV4ZmF0L25scy5jICovDQogdW5zaWduZWQgc2hvcnQgZXhmYXRfdG91cHBlcihzdHJ1
Y3Qgc3VwZXJfYmxvY2sgKnNiLCB1bnNpZ25lZCBzaG9ydCBhKTsNCmRpZmYgLS1naXQgYS9mcy9l
eGZhdC9maWxlLmMgYi9mcy9leGZhdC9maWxlLmMNCmluZGV4IGY0NzYyMGVlZjcxYi4uOGU0NWU3
ODJmYWZmIDEwMDY0NA0KLS0tIGEvZnMvZXhmYXQvZmlsZS5jDQorKysgYi9mcy9leGZhdC9maWxl
LmMNCkBAIC0xMCw2ICsxMCw3IEBADQogI2luY2x1ZGUgPGxpbnV4L2Jsa2Rldi5oPg0KICNpbmNs
dWRlIDxsaW51eC9mc25vdGlmeS5oPg0KICNpbmNsdWRlIDxsaW51eC9zZWN1cml0eS5oPg0KKyNp
bmNsdWRlIDxsaW51eC93cml0ZWJhY2suaD4NCiANCiAjaW5jbHVkZSAiZXhmYXRfcmF3LmgiDQog
I2luY2x1ZGUgImV4ZmF0X2ZzLmgiDQpAQCAtMjUsNiArMjYsNyBAQCBzdGF0aWMgaW50IGV4ZmF0
X2NvbnRfZXhwYW5kKHN0cnVjdCBpbm9kZSAqaW5vZGUsIGxvZmZfdCBzaXplKQ0KIAkJcmV0dXJu
IGVycjsNCiANCiAJaW5vZGUtPmlfbXRpbWUgPSBpbm9kZV9zZXRfY3RpbWVfY3VycmVudChpbm9k
ZSk7DQorCUVYRkFUX0koaW5vZGUpLT52YWxpZF9zaXplID0gc2l6ZTsNCiAJbWFya19pbm9kZV9k
aXJ0eShpbm9kZSk7DQogDQogCWlmICghSVNfU1lOQyhpbm9kZSkpDQpAQCAtMTQ1LDYgKzE0Nyw5
IEBAIGludCBfX2V4ZmF0X3RydW5jYXRlKHN0cnVjdCBpbm9kZSAqaW5vZGUpDQogCQllaS0+c3Rh
cnRfY2x1ID0gRVhGQVRfRU9GX0NMVVNURVI7DQogCX0NCiANCisJaWYgKGlfc2l6ZV9yZWFkKGlu
b2RlKSA8IGVpLT52YWxpZF9zaXplKQ0KKwkJZWktPnZhbGlkX3NpemUgPSBpX3NpemVfcmVhZChp
bm9kZSk7DQorDQogCWlmIChlaS0+dHlwZSA9PSBUWVBFX0ZJTEUpDQogCQllaS0+YXR0ciB8PSBB
VFRSX0FSQ0hJVkU7DQogDQpAQCAtNDcyLDE1ICs0NzcsMTI5IEBAIGludCBleGZhdF9maWxlX2Zz
eW5jKHN0cnVjdCBmaWxlICpmaWxwLCBsb2ZmX3Qgc3RhcnQsIGxvZmZfdCBlbmQsIGludCBkYXRh
c3luYykNCiAJcmV0dXJuIGJsa2Rldl9pc3N1ZV9mbHVzaChpbm9kZS0+aV9zYi0+c19iZGV2KTsN
CiB9DQogDQorc3RhdGljIGludCBleGZhdF9maWxlX3plcm9lZF9yYW5nZShzdHJ1Y3QgZmlsZSAq
ZmlsZSwgbG9mZl90IHN0YXJ0LCBsb2ZmX3QgZW5kKQ0KK3sNCisJaW50IGVycjsNCisJc3RydWN0
IGlub2RlICppbm9kZSA9IGZpbGVfaW5vZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9p
bmZvICplaSA9IEVYRkFUX0koaW5vZGUpOw0KKwlzdHJ1Y3QgYWRkcmVzc19zcGFjZSAqbWFwcGlu
ZyA9IGlub2RlLT5pX21hcHBpbmc7DQorCWNvbnN0IHN0cnVjdCBhZGRyZXNzX3NwYWNlX29wZXJh
dGlvbnMgKm9wcyA9IG1hcHBpbmctPmFfb3BzOw0KKw0KKwl3aGlsZSAoc3RhcnQgPCBlbmQpIHsN
CisJCXUzMiB6ZXJvZnJvbSwgbGVuOw0KKwkJc3RydWN0IHBhZ2UgKnBhZ2UgPSBOVUxMOw0KKw0K
KwkJemVyb2Zyb20gPSBzdGFydCAmIChQQUdFX1NJWkUgLSAxKTsNCisJCWxlbiA9IFBBR0VfU0la
RSAtIHplcm9mcm9tOw0KKwkJaWYgKHN0YXJ0ICsgbGVuID4gZW5kKQ0KKwkJCWxlbiA9IGVuZCAt
IHN0YXJ0Ow0KKw0KKwkJZXJyID0gYmxvY2tfd3JpdGVfYmVnaW4obWFwcGluZywgc3RhcnQsIGxl
biwgJnBhZ2UsDQorCQkJCWV4ZmF0X2dldF9ibG9jayk7DQorCQlpZiAoZXJyKQ0KKwkJCWdvdG8g
b3V0Ow0KKw0KKwkJemVyb191c2VyX3NlZ21lbnQocGFnZSwgemVyb2Zyb20sIHplcm9mcm9tICsg
bGVuKTsNCisNCisJCWVyciA9IG9wcy0+d3JpdGVfZW5kKGZpbGUsIG1hcHBpbmcsIHN0YXJ0LCBs
ZW4sIGxlbiwgcGFnZSwgTlVMTCk7DQorCQlpZiAoZXJyIDwgMCkNCisJCQlnb3RvIG91dDsNCisJ
CXN0YXJ0ICs9IGxlbjsNCisNCisJCWJhbGFuY2VfZGlydHlfcGFnZXNfcmF0ZWxpbWl0ZWQobWFw
cGluZyk7DQorCQljb25kX3Jlc2NoZWQoKTsNCisJfQ0KKw0KKwllaS0+dmFsaWRfc2l6ZSA9IGVu
ZDsNCisJbWFya19pbm9kZV9kaXJ0eShpbm9kZSk7DQorDQorb3V0Og0KKwlyZXR1cm4gZXJyOw0K
K30NCisNCitzdGF0aWMgc3NpemVfdCBleGZhdF9maWxlX3dyaXRlX2l0ZXIoc3RydWN0IGtpb2Ni
ICppb2NiLCBzdHJ1Y3QgaW92X2l0ZXIgKml0ZXIpDQorew0KKwlzc2l6ZV90IHJldDsNCisJc3Ry
dWN0IGZpbGUgKmZpbGUgPSBpb2NiLT5raV9maWxwOw0KKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0g
ZmlsZV9pbm9kZShmaWxlKTsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRf
SShpbm9kZSk7DQorCWxvZmZfdCBwb3MgPSBpb2NiLT5raV9wb3M7DQorCWxvZmZfdCB2YWxpZF9z
aXplOw0KKw0KKwlpbm9kZV9sb2NrKGlub2RlKTsNCisNCisJdmFsaWRfc2l6ZSA9IGVpLT52YWxp
ZF9zaXplOw0KKw0KKwlyZXQgPSBnZW5lcmljX3dyaXRlX2NoZWNrcyhpb2NiLCBpdGVyKTsNCisJ
aWYgKHJldCA8IDApDQorCQlnb3RvIHVubG9jazsNCisNCisJaWYgKHBvcyA+IHZhbGlkX3NpemUp
IHsNCisJCXJldCA9IGV4ZmF0X2ZpbGVfemVyb2VkX3JhbmdlKGZpbGUsIHZhbGlkX3NpemUsIHBv
cyk7DQorCQlpZiAocmV0IDwgMCAmJiByZXQgIT0gLUVOT1NQQykgew0KKwkJCWV4ZmF0X2Vycihp
bm9kZS0+aV9zYiwNCisJCQkJIndyaXRlOiBmYWlsIHRvIHplcm8gZnJvbSAlbGx1IHRvICVsbHUo
JWxkKSIsDQorCQkJCXZhbGlkX3NpemUsIHBvcywgcmV0KTsNCisJCX0NCisJCWlmIChyZXQgPCAw
KQ0KKwkJCWdvdG8gdW5sb2NrOw0KKwl9DQorDQorCXJldCA9IF9fZ2VuZXJpY19maWxlX3dyaXRl
X2l0ZXIoaW9jYiwgaXRlcik7DQorCWlmIChyZXQgPCAwKQ0KKwkJZ290byB1bmxvY2s7DQorDQor
CWlub2RlX3VubG9jayhpbm9kZSk7DQorDQorCWlmIChwb3MgPiB2YWxpZF9zaXplICYmIGlvY2Jf
aXNfZHN5bmMoaW9jYikpIHsNCisJCXNzaXplX3QgZXJyID0gdmZzX2ZzeW5jX3JhbmdlKGZpbGUs
IHZhbGlkX3NpemUsIHBvcyAtIDEsDQorCQkJCWlvY2ItPmtpX2ZsYWdzICYgSU9DQl9TWU5DKTsN
CisJCWlmIChlcnIgPCAwKQ0KKwkJCXJldHVybiBlcnI7DQorCX0NCisNCisJaWYgKHJldCkNCisJ
CXJldCA9IGdlbmVyaWNfd3JpdGVfc3luYyhpb2NiLCByZXQpOw0KKw0KKwlyZXR1cm4gcmV0Ow0K
Kw0KK3VubG9jazoNCisJaW5vZGVfdW5sb2NrKGlub2RlKTsNCisNCisJcmV0dXJuIHJldDsNCit9
DQorDQorc3RhdGljIGludCBleGZhdF9maWxlX21tYXAoc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVj
dCB2bV9hcmVhX3N0cnVjdCAqdm1hKQ0KK3sNCisJaW50IHJldDsNCisJc3RydWN0IGlub2RlICpp
bm9kZSA9IGZpbGVfaW5vZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9
IEVYRkFUX0koaW5vZGUpOw0KKwlsb2ZmX3Qgc3RhcnQgPSAoKGxvZmZfdCl2bWEtPnZtX3Bnb2Zm
IDw8IFBBR0VfU0hJRlQpOw0KKwlsb2ZmX3QgZW5kID0gbWluX3QobG9mZl90LCBpX3NpemVfcmVh
ZChpbm9kZSksDQorCQkJc3RhcnQgKyB2bWEtPnZtX2VuZCAtIHZtYS0+dm1fc3RhcnQpOw0KKw0K
KwlpZiAoKHZtYS0+dm1fZmxhZ3MgJiBWTV9XUklURSkgJiYgZWktPnZhbGlkX3NpemUgPCBlbmQp
IHsNCisJCXJldCA9IGV4ZmF0X2ZpbGVfemVyb2VkX3JhbmdlKGZpbGUsIGVpLT52YWxpZF9zaXpl
LCBlbmQpOw0KKwkJaWYgKHJldCA8IDApIHsNCisJCQlleGZhdF9lcnIoaW5vZGUtPmlfc2IsDQor
CQkJCSAgIm1tYXA6IGZhaWwgdG8gemVybyBmcm9tICVsbHUgdG8gJWxsdSglZCkiLA0KKwkJCQkg
IHN0YXJ0LCBlbmQsIHJldCk7DQorCQkJcmV0dXJuIHJldDsNCisJCX0NCisJfQ0KKw0KKwlyZXR1
cm4gZ2VuZXJpY19maWxlX21tYXAoZmlsZSwgdm1hKTsNCit9DQorDQogY29uc3Qgc3RydWN0IGZp
bGVfb3BlcmF0aW9ucyBleGZhdF9maWxlX29wZXJhdGlvbnMgPSB7DQogCS5sbHNlZWsJCT0gZ2Vu
ZXJpY19maWxlX2xsc2VlaywNCiAJLnJlYWRfaXRlcgk9IGdlbmVyaWNfZmlsZV9yZWFkX2l0ZXIs
DQotCS53cml0ZV9pdGVyCT0gZ2VuZXJpY19maWxlX3dyaXRlX2l0ZXIsDQorCS53cml0ZV9pdGVy
CT0gZXhmYXRfZmlsZV93cml0ZV9pdGVyLA0KIAkudW5sb2NrZWRfaW9jdGwgPSBleGZhdF9pb2N0
bCwNCiAjaWZkZWYgQ09ORklHX0NPTVBBVA0KIAkuY29tcGF0X2lvY3RsID0gZXhmYXRfY29tcGF0
X2lvY3RsLA0KICNlbmRpZg0KLQkubW1hcAkJPSBnZW5lcmljX2ZpbGVfbW1hcCwNCisJLm1tYXAJ
CT0gZXhmYXRfZmlsZV9tbWFwLA0KIAkuZnN5bmMJCT0gZXhmYXRfZmlsZV9mc3luYywNCiAJLnNw
bGljZV9yZWFkCT0gZmlsZW1hcF9zcGxpY2VfcmVhZCwNCiAJLnNwbGljZV93cml0ZQk9IGl0ZXJf
ZmlsZV9zcGxpY2Vfd3JpdGUsDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvaW5vZGUuYyBiL2ZzL2V4
ZmF0L2lub2RlLmMNCmluZGV4IDEzMzI5YmFlYWZiYy4uZmI4YzE3OTk2YjM1IDEwMDY0NA0KLS0t
IGEvZnMvZXhmYXQvaW5vZGUuYw0KKysrIGIvZnMvZXhmYXQvaW5vZGUuYw0KQEAgLTcyLDggKzcy
LDcgQEAgaW50IF9fZXhmYXRfd3JpdGVfaW5vZGUoc3RydWN0IGlub2RlICppbm9kZSwgaW50IHN5
bmMpDQogCWlmIChlaS0+c3RhcnRfY2x1ID09IEVYRkFUX0VPRl9DTFVTVEVSKQ0KIAkJb25fZGlz
a19zaXplID0gMDsNCiANCi0JZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUgPSBjcHVfdG9f
bGU2NChvbl9kaXNrX3NpemUpOw0KLQllcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSA9IGVwMi0+ZGVu
dHJ5LnN0cmVhbS52YWxpZF9zaXplOw0KKwllcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSA9IGNwdV90
b19sZTY0KG9uX2Rpc2tfc2l6ZSk7DQogCWlmIChvbl9kaXNrX3NpemUpIHsNCiAJCWVwMi0+ZGVu
dHJ5LnN0cmVhbS5mbGFncyA9IGVpLT5mbGFnczsNCiAJCWVwMi0+ZGVudHJ5LnN0cmVhbS5zdGFy
dF9jbHUgPSBjcHVfdG9fbGUzMihlaS0+c3RhcnRfY2x1KTsNCkBAIC04Miw2ICs4MSw4IEBAIGlu
dCBfX2V4ZmF0X3dyaXRlX2lub2RlKHN0cnVjdCBpbm9kZSAqaW5vZGUsIGludCBzeW5jKQ0KIAkJ
ZXAyLT5kZW50cnkuc3RyZWFtLnN0YXJ0X2NsdSA9IEVYRkFUX0ZSRUVfQ0xVU1RFUjsNCiAJfQ0K
IA0KKwllcDItPmRlbnRyeS5zdHJlYW0udmFsaWRfc2l6ZSA9IGNwdV90b19sZTY0KGVpLT52YWxp
ZF9zaXplKTsNCisNCiAJZXhmYXRfdXBkYXRlX2Rpcl9jaGtzdW1fd2l0aF9lbnRyeV9zZXQoJmVz
KTsNCiAJcmV0dXJuIGV4ZmF0X3B1dF9kZW50cnlfc2V0KCZlcywgc3luYyk7DQogfQ0KQEAgLTI2
Myw3ICsyNjQsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X21hcF9uZXdfYnVmZmVyKHN0cnVjdCBleGZh
dF9pbm9kZV9pbmZvICplaSwNCiAJcmV0dXJuIDA7DQogfQ0KIA0KLXN0YXRpYyBpbnQgZXhmYXRf
Z2V0X2Jsb2NrKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHNlY3Rvcl90IGlibG9jaywNCitpbnQgZXhm
YXRfZ2V0X2Jsb2NrKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHNlY3Rvcl90IGlibG9jaywNCiAJCXN0
cnVjdCBidWZmZXJfaGVhZCAqYmhfcmVzdWx0LCBpbnQgY3JlYXRlKQ0KIHsNCiAJc3RydWN0IGV4
ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShpbm9kZSk7DQpAQCAtMzAzLDE3ICszMDQsMjUg
QEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2RlICppbm9kZSwgc2VjdG9y
X3QgaWJsb2NrLA0KIAltYXBwZWRfYmxvY2tzID0gc2JpLT5zZWN0X3Blcl9jbHVzIC0gc2VjX29m
ZnNldDsNCiAJbWF4X2Jsb2NrcyA9IG1pbihtYXBwZWRfYmxvY2tzLCBtYXhfYmxvY2tzKTsNCiAN
Ci0JLyogVHJlYXQgbmV3bHkgYWRkZWQgYmxvY2sgLyBjbHVzdGVyICovDQotCWlmIChpYmxvY2sg
PCBsYXN0X2Jsb2NrKQ0KLQkJY3JlYXRlID0gMDsNCi0NCi0JaWYgKGNyZWF0ZSB8fCBidWZmZXJf
ZGVsYXkoYmhfcmVzdWx0KSkgew0KLQkJcG9zID0gRVhGQVRfQkxLX1RPX0IoKGlibG9jayArIDEp
LCBzYik7DQorCXBvcyA9IEVYRkFUX0JMS19UT19CKChpYmxvY2sgKyAxKSwgc2IpOw0KKwlpZiAo
KGNyZWF0ZSAmJiBpYmxvY2sgPj0gbGFzdF9ibG9jaykgfHwgYnVmZmVyX2RlbGF5KGJoX3Jlc3Vs
dCkpIHsNCiAJCWlmIChlaS0+aV9zaXplX29uZGlzayA8IHBvcykNCiAJCQllaS0+aV9zaXplX29u
ZGlzayA9IHBvczsNCiAJfQ0KIA0KKwltYXBfYmgoYmhfcmVzdWx0LCBzYiwgcGh5cyk7DQorCWlm
IChidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkNCisJCWNsZWFyX2J1ZmZlcl9kZWxheShiaF9yZXN1
bHQpOw0KKw0KIAlpZiAoY3JlYXRlKSB7DQorCQlzZWN0b3JfdCB2YWxpZF9ibGtzOw0KKw0KKwkJ
dmFsaWRfYmxrcyA9IEVYRkFUX0JfVE9fQkxLX1JPVU5EX1VQKGVpLT52YWxpZF9zaXplLCBzYik7
DQorCQlpZiAoaWJsb2NrIDwgdmFsaWRfYmxrcyAmJiBpYmxvY2sgKyBtYXhfYmxvY2tzID49IHZh
bGlkX2Jsa3MpIHsNCisJCQltYXhfYmxvY2tzID0gdmFsaWRfYmxrcyAtIGlibG9jazsNCisJCQln
b3RvIGRvbmU7DQorCQl9DQorDQogCQllcnIgPSBleGZhdF9tYXBfbmV3X2J1ZmZlcihlaSwgYmhf
cmVzdWx0LCBwb3MpOw0KIAkJaWYgKGVycikgew0KIAkJCWV4ZmF0X2ZzX2Vycm9yKHNiLA0KQEAg
LTMyMSwxMSArMzMwLDM1IEBAIHN0YXRpYyBpbnQgZXhmYXRfZ2V0X2Jsb2NrKHN0cnVjdCBpbm9k
ZSAqaW5vZGUsIHNlY3Rvcl90IGlibG9jaywNCiAJCQkJCXBvcywgZWktPmlfc2l6ZV9hbGlnbmVk
KTsNCiAJCQlnb3RvIHVubG9ja19yZXQ7DQogCQl9DQorCX0gZWxzZSB7DQorCQlzaXplX3QgYl9z
aXplID0gRVhGQVRfQkxLX1RPX0IobWF4X2Jsb2Nrcywgc2IpOw0KKw0KKwkJcG9zIC09IHNiLT5z
X2Jsb2Nrc2l6ZTsNCisJCWlmIChwb3MgPj0gZWktPnZhbGlkX3NpemUpIHsNCisJCQkvKiBSZWFk
IG91dCBvZiB2YWxpZCBkYXRhICovDQorCQkJY2xlYXJfYnVmZmVyX21hcHBlZChiaF9yZXN1bHQp
Ow0KKwkJfSBlbHNlIGlmIChwb3MgKyBiX3NpemUgPD0gZWktPnZhbGlkX3NpemUpIHsNCisJCQkv
KiBOb3JtYWwgcmVhZCAqLw0KKwkJfSBlbHNlIGlmIChwb3MgKyBzYi0+c19ibG9ja3NpemUgPD0g
ZWktPnZhbGlkX3NpemUpIHsNCisJCQkvKiBOb3JtYWwgc2hvcnQgcmVhZCAqLw0KKwkJCW1heF9i
bG9ja3MgPSAxOw0KKwkJfSBlbHNlIHsNCisJCQkvKiBSZWFkIGFjcm9zcyB2YWxpZCBzaXplICov
DQorCQkJaWYgKGJoX3Jlc3VsdC0+Yl9mb2xpbykgew0KKwkJCQlsb2ZmX3Qgc2l6ZSA9IGVpLT52
YWxpZF9zaXplIC0gcG9zOw0KKwkJCQlsb2ZmX3Qgb2ZmID0gcG9zICYgKFBBR0VfU0laRSAtIDEp
Ow0KKw0KKwkJCQlmb2xpb19zZXRfYmgoYmhfcmVzdWx0LCBiaF9yZXN1bHQtPmJfZm9saW8sIG9m
Zik7DQorCQkJCWVyciA9IGJoX3JlYWQoYmhfcmVzdWx0LCAwKTsNCisJCQkJaWYgKGVyciA8IDAp
DQorCQkJCQlnb3RvIHVubG9ja19yZXQ7DQorDQorCQkJCWZvbGlvX3plcm9fc2VnbWVudChiaF9y
ZXN1bHQtPmJfZm9saW8sIG9mZiArIHNpemUsDQorCQkJCQkJb2ZmICsgc2ItPnNfYmxvY2tzaXpl
KTsNCisJCQl9DQorCQkJbWF4X2Jsb2NrcyA9IDE7DQorCQl9DQogCX0NCi0NCi0JaWYgKGJ1ZmZl
cl9kZWxheShiaF9yZXN1bHQpKQ0KLQkJY2xlYXJfYnVmZmVyX2RlbGF5KGJoX3Jlc3VsdCk7DQot
CW1hcF9iaChiaF9yZXN1bHQsIHNiLCBwaHlzKTsNCiBkb25lOg0KIAliaF9yZXN1bHQtPmJfc2l6
ZSA9IEVYRkFUX0JMS19UT19CKG1heF9ibG9ja3MsIHNiKTsNCiB1bmxvY2tfcmV0Og0KQEAgLTM0
MCw2ICszNzMsMTcgQEAgc3RhdGljIGludCBleGZhdF9yZWFkX2ZvbGlvKHN0cnVjdCBmaWxlICpm
aWxlLCBzdHJ1Y3QgZm9saW8gKmZvbGlvKQ0KIA0KIHN0YXRpYyB2b2lkIGV4ZmF0X3JlYWRhaGVh
ZChzdHJ1Y3QgcmVhZGFoZWFkX2NvbnRyb2wgKnJhYykNCiB7DQorCXN0cnVjdCBhZGRyZXNzX3Nw
YWNlICptYXBwaW5nID0gcmFjLT5tYXBwaW5nOw0KKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gbWFw
cGluZy0+aG9zdDsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShpbm9k
ZSk7DQorCWxvZmZfdCBwb3MgPSByZWFkYWhlYWRfcG9zKHJhYyk7DQorDQorCS8qIFJhbmdlIGNy
b3NzIHZhbGlkX3NpemUsIHJlYWQgaXQgcGFnZSBieSBwYWdlLiAqLw0KKwlpZiAoZWktPnZhbGlk
X3NpemUgPCBpX3NpemVfcmVhZChpbm9kZSkgJiYNCisJICAgIHBvcyA8PSBlaS0+dmFsaWRfc2l6
ZSAmJg0KKwkgICAgZWktPnZhbGlkX3NpemUgPCBwb3MgKyByZWFkYWhlYWRfbGVuZ3RoKHJhYykp
DQorCQlyZXR1cm47DQorDQogCW1wYWdlX3JlYWRhaGVhZChyYWMsIGV4ZmF0X2dldF9ibG9jayk7
DQogfQ0KIA0KQEAgLTM5Nyw2ICs0NDEsMTEgQEAgc3RhdGljIGludCBleGZhdF93cml0ZV9lbmQo
c3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nLA0KIAlpZiAo
ZXJyIDwgbGVuKQ0KIAkJZXhmYXRfd3JpdGVfZmFpbGVkKG1hcHBpbmcsIHBvcytsZW4pOw0KIA0K
KwlpZiAoIShlcnIgPCAwKSAmJiBwb3MgKyBlcnIgPiBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJZWkt
PnZhbGlkX3NpemUgPSBwb3MgKyBlcnI7DQorCQltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCisJ
fQ0KKw0KIAlpZiAoIShlcnIgPCAwKSAmJiAhKGVpLT5hdHRyICYgQVRUUl9BUkNISVZFKSkgew0K
IAkJaW5vZGUtPmlfbXRpbWUgPSBpbm9kZV9zZXRfY3RpbWVfY3VycmVudChpbm9kZSk7DQogCQll
aS0+YXR0ciB8PSBBVFRSX0FSQ0hJVkU7DQpAQCAtNDEwLDYgKzQ1OSw4IEBAIHN0YXRpYyBzc2l6
ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAq
aXRlcikNCiB7DQogCXN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nID0gaW9jYi0+a2lfZmls
cC0+Zl9tYXBwaW5nOw0KIAlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gbWFwcGluZy0+aG9zdDsNCisJ
c3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShpbm9kZSk7DQorCWxvZmZfdCBw
b3MgPSBpb2NiLT5raV9wb3M7DQogCWxvZmZfdCBzaXplID0gaW9jYi0+a2lfcG9zICsgaW92X2l0
ZXJfY291bnQoaXRlcik7DQogCWludCBydyA9IGlvdl9pdGVyX3J3KGl0ZXIpOw0KIAlzc2l6ZV90
IHJldDsNCkBAIC00MzMsOCArNDg0LDIwIEBAIHN0YXRpYyBzc2l6ZV90IGV4ZmF0X2RpcmVjdF9J
TyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCiAJICogY29uZGl0
aW9uIG9mIGV4ZmF0X2dldF9ibG9jaygpIGFuZCAtPnRydW5jYXRlKCkuDQogCSAqLw0KIAlyZXQg
PSBibG9ja2Rldl9kaXJlY3RfSU8oaW9jYiwgaW5vZGUsIGl0ZXIsIGV4ZmF0X2dldF9ibG9jayk7
DQotCWlmIChyZXQgPCAwICYmIChydyAmIFdSSVRFKSkNCi0JCWV4ZmF0X3dyaXRlX2ZhaWxlZCht
YXBwaW5nLCBzaXplKTsNCisJaWYgKHJldCA8IDApIHsNCisJCWlmIChydyAmIFdSSVRFKQ0KKwkJ
CWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBzaXplKTsNCisNCisJCWlmIChyZXQgIT0gLUVJ
T0NCUVVFVUVEKQ0KKwkJCXJldHVybiByZXQ7DQorCX0gZWxzZQ0KKwkJc2l6ZSA9IHBvcyArIHJl
dDsNCisNCisJaWYgKChydyAmIFJFQUQpICYmIHBvcyA8IGVpLT52YWxpZF9zaXplICYmIGVpLT52
YWxpZF9zaXplIDwgc2l6ZSkgew0KKwkJaW92X2l0ZXJfcmV2ZXJ0KGl0ZXIsIHNpemUgLSBlaS0+
dmFsaWRfc2l6ZSk7DQorCQlpb3ZfaXRlcl96ZXJvKHNpemUgLSBlaS0+dmFsaWRfc2l6ZSwgaXRl
cik7DQorCX0NCisNCiAJcmV0dXJuIHJldDsNCiB9DQogDQpAQCAtNTM0LDYgKzU5Nyw3IEBAIHN0
YXRpYyBpbnQgZXhmYXRfZmlsbF9pbm9kZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZXhm
YXRfZGlyX2VudHJ5ICppbmZvKQ0KIAllaS0+c3RhcnRfY2x1ID0gaW5mby0+c3RhcnRfY2x1Ow0K
IAllaS0+ZmxhZ3MgPSBpbmZvLT5mbGFnczsNCiAJZWktPnR5cGUgPSBpbmZvLT50eXBlOw0KKwll
aS0+dmFsaWRfc2l6ZSA9IGluZm8tPnZhbGlkX3NpemU7DQogDQogCWVpLT52ZXJzaW9uID0gMDsN
CiAJZWktPmhpbnRfc3RhdC5laWR4ID0gMDsNCmRpZmYgLS1naXQgYS9mcy9leGZhdC9uYW1laS5j
IGIvZnMvZXhmYXQvbmFtZWkuYw0KaW5kZXggMWUxZmZkYTI3OWNmLi4wYzEyMWYyY2VhZjUgMTAw
NjQ0DQotLS0gYS9mcy9leGZhdC9uYW1laS5jDQorKysgYi9mcy9leGZhdC9uYW1laS5jDQpAQCAt
NDA2LDYgKzQwNiw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZF9lbXB0eV9lbnRyeShzdHJ1Y3Qg
aW5vZGUgKmlub2RlLA0KIAkJaV9zaXplX3dyaXRlKGlub2RlLCBzaXplKTsNCiAJCWVpLT5pX3Np
emVfb25kaXNrICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KIAkJZWktPmlfc2l6ZV9hbGlnbmVkICs9
IHNiaS0+Y2x1c3Rlcl9zaXplOw0KKwkJZWktPnZhbGlkX3NpemUgKz0gc2JpLT5jbHVzdGVyX3Np
emU7DQogCQllaS0+ZmxhZ3MgPSBwX2Rpci0+ZmxhZ3M7DQogCQlpbm9kZS0+aV9ibG9ja3MgKz0g
c2JpLT5jbHVzdGVyX3NpemUgPj4gOTsNCiAJfQ0KQEAgLTU1OCw2ICs1NTksOCBAQCBzdGF0aWMg
aW50IGV4ZmF0X2FkZF9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBjb25zdCBjaGFyICpwYXRo
LA0KIAkJaW5mby0+c2l6ZSA9IGNsdV9zaXplOw0KIAkJaW5mby0+bnVtX3N1YmRpcnMgPSBFWEZB
VF9NSU5fU1VCRElSOw0KIAl9DQorCWluZm8tPnZhbGlkX3NpemUgPSBpbmZvLT5zaXplOw0KKw0K
IAltZW1zZXQoJmluZm8tPmNydGltZSwgMCwgc2l6ZW9mKGluZm8tPmNydGltZSkpOw0KIAltZW1z
ZXQoJmluZm8tPm10aW1lLCAwLCBzaXplb2YoaW5mby0+bXRpbWUpKTsNCiAJbWVtc2V0KCZpbmZv
LT5hdGltZSwgMCwgc2l6ZW9mKGluZm8tPmF0aW1lKSk7DQpAQCAtNjU5LDYgKzY2Miw4IEBAIHN0
YXRpYyBpbnQgZXhmYXRfZmluZChzdHJ1Y3QgaW5vZGUgKmRpciwgc3RydWN0IHFzdHIgKnFuYW1l
LA0KIAlpbmZvLT50eXBlID0gZXhmYXRfZ2V0X2VudHJ5X3R5cGUoZXApOw0KIAlpbmZvLT5hdHRy
ID0gbGUxNl90b19jcHUoZXAtPmRlbnRyeS5maWxlLmF0dHIpOw0KIAlpbmZvLT5zaXplID0gbGU2
NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUpOw0KKwlpbmZvLT52YWxpZF9z
aXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUpOw0KKwlpbmZv
LT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnNpemUpOw0KIAlpZiAoaW5m
by0+c2l6ZSA9PSAwKSB7DQogCQlpbmZvLT5mbGFncyA9IEFMTE9DX05PX0ZBVF9DSEFJTjsNCiAJ
CWluZm8tPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVSOw0KQEAgLTEyODcsNiArMTI5Miw3
IEBAIHN0YXRpYyBpbnQgX19leGZhdF9yZW5hbWUoc3RydWN0IGlub2RlICpvbGRfcGFyZW50X2lu
b2RlLA0KIAkJCX0NCiANCiAJCQlpX3NpemVfd3JpdGUobmV3X2lub2RlLCAwKTsNCisJCQluZXdf
ZWktPnZhbGlkX3NpemUgPSAwOw0KIAkJCW5ld19laS0+c3RhcnRfY2x1ID0gRVhGQVRfRU9GX0NM
VVNURVI7DQogCQkJbmV3X2VpLT5mbGFncyA9IEFMTE9DX05PX0ZBVF9DSEFJTjsNCiAJCX0NCi0t
IA0KMi4yNS4xDQo=
