Return-Path: <linux-fsdevel-owner@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 0CC98730E2A
	for <lists+linux-fsdevel@lfdr.de>; Thu, 15 Jun 2023 06:33:27 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S243036AbjFOEdY (ORCPT <rfc822;lists+linux-fsdevel@lfdr.de>);
        Thu, 15 Jun 2023 00:33:24 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:37104 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229944AbjFOEdW (ORCPT
        <rfc822;linux-fsdevel@vger.kernel.org>);
        Thu, 15 Jun 2023 00:33:22 -0400
Received: from mx07-001d1705.pphosted.com (mx07-001d1705.pphosted.com [185.132.183.11])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id C32D71BDB
        for <linux-fsdevel@vger.kernel.org>; Wed, 14 Jun 2023 21:33:20 -0700 (PDT)
Received: from pps.filterd (m0209326.ppops.net [127.0.0.1])
        by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 35ENLK1U030487;
        Thu, 15 Jun 2023 03:29:18 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : mime-version : content-type :
 content-transfer-encoding; s=S1;
 bh=F4c8hw/QvO78bZtYo+SYTaR3BglNGnRcIp4w1WXNDXk=;
 b=m7BWKkeQXLNUqJYuCDS9XeRc3ZuanZOOhHp+qjfFNKPrhmvJru3zbdafyH12RPX86oEq
 KkSepq9fSgmhxbh/kv2Fe3YvCbn7vE81RkN+RZpfnFB2f0A6KW2w5TXRm8R8uEnto3r1
 7sm5VW7HJ6b/49Hik8IYPzUS+2CpEMK2+59ls5dDM6Wol4b/uhamI076QJMQpdzf1sP4
 VfjuIPqJ4jnfhrDNDb11ozc7d0xWiOpioLy0itKoQ1B/MjRsrPjmvmN3cV7PGDS/M8RV
 JM60jlDNyniuJ7KEDvejkQ4CuzTjhww2jQNPC3VjOS0BEre84RVvufO3uHYC0USjks0j Zg== 
Received: from apc01-sg2-obe.outbound.protection.outlook.com (mail-sgaapc01lp2106.outbound.protection.outlook.com [104.47.26.106])
        by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3r6uunsna5-1
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
        Thu, 15 Jun 2023 03:29:17 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=eWASmDJKWZEbtR2rppbrr01J4KHdWOSqefklLzO1YBTu8LRrCrv4QB9/53x1OXFyBV/bC5vAgCndEd7Jh+U06RUPCIoXrEgF8yUYGQ4VmOKG/uFtb9k6znt+TvLSJJXqGKDe+HDsABZ2RC2fsOWTZic1oDfq4IRquODqLOjMEZivQ8y4UKgMdiftuvYuinglfqWyCLQ264pzUxEB94vuvrLwsegF1xlA7UMZf0lufGr0lp3ENcQ7B8GM5maGIUb9SE2JbGqsoZG/rLjsp5TwHLaAPi5rFyVzqzlTBiOiAhKwqsSm++vxYJE20QtBdfwRZRt9Wca0qIykLoF5H52M3g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=F4c8hw/QvO78bZtYo+SYTaR3BglNGnRcIp4w1WXNDXk=;
 b=ntFaaFyirapb23nOl6mztGY+igLgnzMWNyWCIOMnLLqUzvFbZyT4jXvcjG2qOusqRvzJGk46cptmazery6YLjBFtYWfn+bqJ2xIEpOom7U0ezUVJW2/G2uu5IKn26bvmwh3ilUKsbey3txUwVG/wRMl/eZnxoffblpUEjqbWcSaUetTgMLC7SUXlRWjAglSN7TyVQ4NYV8SW2TuxI//+MShFvw+06tkxOD6zoKS9H+5mLsgVre91LjNaiuOmvy/OlATocWuwdd+oUM969OTW5Jg5q1dZwzyJXirNKZ4TTrN7fh44XdJ/vsDCPJ85VtqVpgafDFCLQgFO/CnSLNE2sQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by KL1PR0401MB4212.apcprd04.prod.outlook.com (2603:1096:820:27::14) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6500.25; Thu, 15 Jun
 2023 03:29:11 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::ce2d:a9dc:4955:5275]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::ce2d:a9dc:4955:5275%5]) with mapi id 15.20.6455.037; Thu, 15 Jun 2023
 03:29:11 +0000
From:   "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To:     "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com" <sj1557.seo@samsung.com>
CC:     "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com" <Wataru.Aoyama@sony.com>
Subject: [PATCH v1 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v1 1/2] exfat: change to get file size from DataLength
Thread-Index: AdmfOM+RRg1waKiWT3mEw2cVv4oUyg==
Date:   Thu, 15 Jun 2023 03:29:11 +0000
Message-ID: <PUZPR04MB631638CDDD5DAC677018E2AB815BA@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|KL1PR0401MB4212:EE_
x-ms-office365-filtering-correlation-id: 433e14b8-3824-45b7-ba45-08db6d50afc2
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: J5D59+4hBFbvHP80d2B0czS94fwSwKVdItKC2KDGmuPeSKMGGHps6Na+8uXm1qOtPFPhVWhkl/PQ6b1q0PyUXzwc7HpEL+rKsJ646SM3h0QlMSss9bUxDt4awBI7WDjuA/JBjHAjb88No9uIBoqjHKznsmNE8h1zX3Us1W/kN/MnEjVWJWHnpSHgOKGtN3iJ0YNtTwIyQeP/MvM9YgGu4oijUsdbHVaxexQe85GhU7TWG4rO7to4PHOPojX14a5XY4vayTw2xAru5po6c9Wt9hlagBpO9i5ZEODRZMJM/V39Cj2hSYQHBc96XrPNQXNY2/bGRll1N99s6ViFqF6NF9mUZZQsoPCdz4ndqVvWQSywPq/JA9lXEMXVMLL38LSQ++C9Q1b475nMbqnb2IB/aKNqu9iNmimC22YN+F6F7sbg27OtyhV/+OUk95RT8UnBmGCt6qdAEjLW/z4U4ZLK16ShGtl8U9dP3v3VT/qhIm+YLf0kqpSwYorye8AcHTCEj1O9IIEMqDIPnImwjhLviK9oloqChRGX7lwyx2IZRkUOl0gPhEFLDg23uvZ7UJicAAjCUQyY6tdAoXW/qEF4in6uS031CF1Cu7TpieJ0rcAxNr2YtU8v9BakkAQ5SzgS
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230028)(4636009)(396003)(366004)(136003)(346002)(39860400002)(376002)(451199021)(76116006)(4326008)(30864003)(2906002)(86362001)(38070700005)(316002)(64756008)(66446008)(66476007)(66556008)(66946007)(41300700001)(110136005)(5660300002)(52536014)(8936002)(8676002)(54906003)(38100700002)(478600001)(122000001)(82960400001)(7696005)(71200400001)(83380400001)(107886003)(55016003)(9686003)(26005)(6506007)(186003)(33656002);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?MVVyZXhkRTVpNjdvS1UxcDR1OGdaOFNsTkxvZnBHYlR2OHJOMmI3UHVXNUhU?=
 =?utf-8?B?eHcyZVN6Y2EyeGlQc2hKdDhjczB0cGNYd2VkT202N1lFQ0FKcWN6T3ltS2dQ?=
 =?utf-8?B?WDNZQ2xHQkRObmV3bk5RV1pYbzBBNDZ5ZXlrbzUzOGc1VUdmV01remsvMVVH?=
 =?utf-8?B?QmZib1hicHlBS1hLMlR3L3lBT1JyUk5ZKzhHOFJxNkNiUmc5czdtS29naUJj?=
 =?utf-8?B?NGtTQkNiUW8vUjFyS0UzN3hPQ1hiQVhDcUtXLys3anh5MUw3djJrOEVLTS9R?=
 =?utf-8?B?Zmt3MStOd2ZPeHhPTWV5ZWpKeHJvQ2xCQ0hmS3VObnEreW5WYWpLYnpNd1J3?=
 =?utf-8?B?MlFjbGVZL1RtbHRPWEp5SXV2TjI2Q1YwVWlFMjcrTmtKOGJGR05VMStxTVI2?=
 =?utf-8?B?ZlliNGtESmZaSXEyMGs0MmhBdXl4MitlVExuZmNGVlBGZVQ4OWdraldpN25Q?=
 =?utf-8?B?MkVqT1R0TVJXM3dCdzJSL0VZaTdSNXVRZjR2SDNMUEpjZThrNndWWVdxYTlH?=
 =?utf-8?B?WnF0YTZWZkdsRzR3VXpuOXRzY0NHRFJ6UDBuK2RlRlRsK0F1RlN4c2ZPSjBC?=
 =?utf-8?B?eGpsQlFEZk5VakJUZ1B5aWxIS2lpSm5EU1F5MTExNit4T2wxZE5VcHJreGIv?=
 =?utf-8?B?MUtPVUQxWGdXaVB0MUxlUUY0U0ozUFNxYndZd1JLVDU4N3AyVXdDTE1vbGEx?=
 =?utf-8?B?bDlrUjc4L2RtWFlMQ0dqM25leUx5cXBqdi9yaFBBTHA0VDJsU2FXei9tZ1Rs?=
 =?utf-8?B?QlpSbTNieENEd3R0MTNyL2wxVGFkYitCVGN2alI3cGY4VlJCZHFoMGZtVUNS?=
 =?utf-8?B?SWtVc0UxdzZod3c4aFc1bjdtNXRSY1FoRXBuQWZqVkRhY21zaW92c1pmNk9L?=
 =?utf-8?B?ZUllQ1FmR292d2ptZUtRcFQweUc1RFBhRmpZZjJMY2R6TVpLdWdlanZMMHpM?=
 =?utf-8?B?a1U5VS85VnY5eFlHOVZzcUtUVXhFWHhJL1RMeFR5UTM5Q0MzS1VJblE3R3Jw?=
 =?utf-8?B?V2JMS1VCVWFrWXdIYm15Z3o4UzdSZ3dPd2E4M092QlltSmxNZFJ4UU52dE5R?=
 =?utf-8?B?NllVbEtIcldKdkg0bFl5RUhhcU4wRnRDK0lkcnhoRm93UXRYZUxRam83NTFn?=
 =?utf-8?B?a3MzbmtYS0V1YkVnVmRIWUdMYlVQMzI4Z3Y5UWxLbU5xU0FBWlI1QVFrYWdU?=
 =?utf-8?B?QXhSNUFrMkR5czBVQlJxZzdZUzNVeVZPVFlPZ01RTkZmQ1RILzVlSmJwTTlk?=
 =?utf-8?B?RjhWNzdvZUJ3KzVyMkMrbDJmcDBEdzhkSi9lblhRSDN2R0plMUhkbm5Dbjcx?=
 =?utf-8?B?alNMTDhxaVpGaEMvWFM0aTJLbzROY2V6bU9Ta2VqalhieUVyQkRQby9RRHZK?=
 =?utf-8?B?WlhTeDZHMFpYRkxjL0dQZ1RhaFBydGhWSXFGbDQ3M3diTklSOWd3VEt1YnNj?=
 =?utf-8?B?eEthd3FXTFpzVVpMZDFIN201dXpjdEJKbzRDVFl6Z3NOdEQxUFZSRlMyVnFr?=
 =?utf-8?B?WGNhQ083eVlidUsvSlFqSGt5TWltQms1RGQyaExGWFNWTkQwTDNiQXZ3U05y?=
 =?utf-8?B?NDd1cE5KTk9SVERiZkQ1K2hnZGNHQVI1YkEyNmRGR1haV3ZqVkZWaWdBeCtp?=
 =?utf-8?B?SzVQb3I4aVFDS1gxUEJuZHVaQlNFMmdnUk1EQWpUVDdPWG5aaTkzczR0MmZN?=
 =?utf-8?B?V1JWVEcwMmdhbDhWZnNzeE05TEpXUlAyY3pmWGR1UUFxQ2hERE9pb0lnZkN2?=
 =?utf-8?B?eHgyNlV1ZjVuenFxS1ZJQU4ralRzaS8vQTdRSE85MUVMK2pqV2ZpTUFIVFUv?=
 =?utf-8?B?YW5tMHB5bG5zbEp1ZUNwRjQ4eDdQSHFIMHkzWExKOWpDZjBzNUJYdGtKcm5B?=
 =?utf-8?B?U0NTejJRMWprdDlZWjVGUGhrZWcxSWdocDVkTTc5ODZSOXNVNDBuSGEzYTFB?=
 =?utf-8?B?T2QveE9RYXROSkEwUHVVeC92bElsNFYyeUh2MlRwWHNnTDM1cmZIN1hCOGJJ?=
 =?utf-8?B?bTQwL2dHaXQ4NzBybXdLeWpiSFM2eVY4TWZwT1pYbWZ5QjhIYUZBb1lZZUZI?=
 =?utf-8?B?cHMza0RnSlFtc0VoYnlTTmNxSTRRMHR3aFBleTQrc1ZUc3llVHBLMTdGVm1P?=
 =?utf-8?Q?0VfoDT3+dAvOkgS7l5S6Ei/XR?=
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: 44Mfj9jZ2ATBozhU67O/KQmoYn/1S85MBR71rr+zW8pWDi6TSE65vaTbL/GvzrHANPddLUccIJHBaI6leAO2adOlecSIumF622y8tRAzC+JfPsOgi1vMXYHLGpZZcRsp5cRLKdSK0DAaOroHuF+0Y4YV1cEFf1KZ340T3sGEXajhB1bFiWfaylXzgzRudVIlY6YpI91I4eNYq2tFd1nhAMU/vXEFqTTexVqX4CehSnItDiDz5iFKW87r0yzF7R2T644sbTQX3dJUc9PQS8b1owRaK6SPDx7PrnZqLruDmCkxFAFCSr6eJTzjFhZ0EmrWs2w5puh4Le3SAFkjfXNAWTuZuhwYSAytZP37uKaWIimpmaDPXOP5OpFu5Dx2V8iTYbv+j6u16+9k7wcR0L9vEckx21a3xtsnkd1Q4XWWUqJaG1Z5i8ojmvPRnkIt0Yo5d9JBMkvPZfVg2B7tUHVteZuDQZjrkUHIwGuYCk+FcjE0D0VTOdYtZnOL/CDw96G252xzAxCX6Tt88b8iqdTO7zoKvI8FgU7R/166LHl+z8PD3vhKWDW+B0qefz/Zc3uOxStYWEi45Tc1POYiYrkkY++YCUyD5VGaAN5aegiaESPw6zkUtmptnLAURboYamzIVk+P2EJ/9dBilpPRhcP3pzmFnkjIdAfJ2dF7Mgj00zoyFWNxXB0+rg7TtSzpq1DpKfutWlUPQ/gFZB+OL6yJya3lVb9tQM2+8u5djhbAsK44HIYH3jDhN8USVI8VY74l/gv4dqfxefu89JEMyWkDgqEdKfqq2cvnZaUJcQKkG0veObX2IKTb2hiwelczBvypKXj8R59OnorVTWTNh/hSXg==
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 433e14b8-3824-45b7-ba45-08db6d50afc2
X-MS-Exchange-CrossTenant-originalarrivaltime: 15 Jun 2023 03:29:11.6571
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: XCV6neeJWGlsqVqJmPkMIwZpLp8P2ZSXml3BLEeilOc2NnJaovWfMqufEZCEN7khgHtQpdRGnizl3JS6zF1MxA==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: KL1PR0401MB4212
X-Proofpoint-ORIG-GUID: FgG6EyIlyd715H7_7traVuy1BqMupbms
X-Proofpoint-GUID: FgG6EyIlyd715H7_7traVuy1BqMupbms
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: FgG6EyIlyd715H7_7traVuy1BqMupbms
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.254,Aquarius:18.0.957,Hydra:6.0.573,FMLib:17.11.176.26
 definitions=2023-06-14_14,2023-06-14_02,2023-05-22_02
X-Spam-Status: No, score=-2.8 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_LOW,
        RCVD_IN_MSPIKE_H5,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_NONE,
        T_SCC_BODY_TEXT_LINE autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-fsdevel.vger.kernel.org>
X-Mailing-List: linux-fsdevel@vger.kernel.org

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDIgKw0KIGZzL2V4ZmF0L2ZpbGUuYyAgICAgfCAxMzkgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0NCiBmcy9leGZhdC9pbm9kZS5j
ICAgIHwgMTA4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0NCiBmcy9leGZhdC9u
YW1laS5jICAgIHwgICA3ICsrLQ0KIDQgZmlsZXMgY2hhbmdlZCwgMjM2IGluc2VydGlvbnMoKyks
IDIwIGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZXhmYXRfZnMuaCBiL2Zz
L2V4ZmF0L2V4ZmF0X2ZzLmgNCmluZGV4IDcyOWFkYTllMjZlOC4uOGQ2MjQ4MzY3NDMzIDEwMDY0
NA0KLS0tIGEvZnMvZXhmYXQvZXhmYXRfZnMuaA0KKysrIGIvZnMvZXhmYXQvZXhmYXRfZnMuaA0K
QEAgLTIwOCw2ICsyMDgsNyBAQCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5IHsNCiAJdW5zaWduZWQg
Y2hhciBmbGFnczsNCiAJdW5zaWduZWQgc2hvcnQgYXR0cjsNCiAJbG9mZl90IHNpemU7DQorCWxv
ZmZfdCB2YWxpZF9zaXplOw0KIAl1bnNpZ25lZCBpbnQgbnVtX3N1YmRpcnM7DQogCXN0cnVjdCB0
aW1lc3BlYzY0IGF0aW1lOw0KIAlzdHJ1Y3QgdGltZXNwZWM2NCBtdGltZTsNCkBAIC0zMTcsNiAr
MzE4LDcgQEAgc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gew0KIAlsb2ZmX3QgaV9zaXplX2FsaWdu
ZWQ7DQogCS8qIG9uLWRpc2sgcG9zaXRpb24gb2YgZGlyZWN0b3J5IGVudHJ5IG9yIDAgKi8NCiAJ
bG9mZl90IGlfcG9zOw0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCiAJLyogaGFzaCBieSBpX2xvY2F0
aW9uICovDQogCXN0cnVjdCBobGlzdF9ub2RlIGlfaGFzaF9mYXQ7DQogCS8qIHByb3RlY3QgYm1h
cCBhZ2FpbnN0IHRydW5jYXRlICovDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvZmlsZS5jIGIvZnMv
ZXhmYXQvZmlsZS5jDQppbmRleCBlOTkxODNhNzQ2MTEuLjY4MDU5N2YzMjM3ZCAxMDA2NDQNCi0t
LSBhL2ZzL2V4ZmF0L2ZpbGUuYw0KKysrIGIvZnMvZXhmYXQvZmlsZS5jDQpAQCAtOCwxMSArOCwx
MiBAQA0KICNpbmNsdWRlIDxsaW51eC9jcmVkLmg+DQogI2luY2x1ZGUgPGxpbnV4L2J1ZmZlcl9o
ZWFkLmg+DQogI2luY2x1ZGUgPGxpbnV4L2Jsa2Rldi5oPg0KKyNpbmNsdWRlIDxsaW51eC93cml0
ZWJhY2suaD4NCiANCiAjaW5jbHVkZSAiZXhmYXRfcmF3LmgiDQogI2luY2x1ZGUgImV4ZmF0X2Zz
LmgiDQogDQotc3RhdGljIGludCBleGZhdF9jb250X2V4cGFuZChzdHJ1Y3QgaW5vZGUgKmlub2Rl
LCBsb2ZmX3Qgc2l6ZSkNCitzdGF0aWMgaW50IGV4ZmF0X2NvbnRfZXhwYW5kKHN0cnVjdCBpbm9k
ZSAqaW5vZGUsIGxvZmZfdCBzaXplLCBib29sIHN5bmMpDQogew0KIAlzdHJ1Y3QgYWRkcmVzc19z
cGFjZSAqbWFwcGluZyA9IGlub2RlLT5pX21hcHBpbmc7DQogCWxvZmZfdCBzdGFydCA9IGlfc2l6
ZV9yZWFkKGlub2RlKSwgY291bnQgPSBzaXplIC0gaV9zaXplX3JlYWQoaW5vZGUpOw0KQEAgLTIz
LDkgKzI0LDEwIEBAIHN0YXRpYyBpbnQgZXhmYXRfY29udF9leHBhbmQoc3RydWN0IGlub2RlICpp
bm9kZSwgbG9mZl90IHNpemUpDQogCQlyZXR1cm4gZXJyOw0KIA0KIAlpbm9kZS0+aV9jdGltZSA9
IGlub2RlLT5pX210aW1lID0gY3VycmVudF90aW1lKGlub2RlKTsNCisJRVhGQVRfSShpbm9kZSkt
PnZhbGlkX3NpemUgPSBzaXplOw0KIAltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCiANCi0JaWYg
KCFJU19TWU5DKGlub2RlKSkNCisJaWYgKCFzeW5jKQ0KIAkJcmV0dXJuIDA7DQogDQogCWVyciA9
IGZpbGVtYXBfZmRhdGF3cml0ZV9yYW5nZShtYXBwaW5nLCBzdGFydCwgc3RhcnQgKyBjb3VudCAt
IDEpOw0KQEAgLTE0Myw2ICsxNDUsOSBAQCBpbnQgX19leGZhdF90cnVuY2F0ZShzdHJ1Y3QgaW5v
ZGUgKmlub2RlKQ0KIAkJZWktPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVSOw0KIAl9DQog
DQorCWlmIChpX3NpemVfcmVhZChpbm9kZSkgPCBlaS0+dmFsaWRfc2l6ZSkNCisJCWVpLT52YWxp
ZF9zaXplID0gaV9zaXplX3JlYWQoaW5vZGUpOw0KKw0KIAlpZiAoZWktPnR5cGUgPT0gVFlQRV9G
SUxFKQ0KIAkJZWktPmF0dHIgfD0gQVRUUl9BUkNISVZFOw0KIA0KQEAgLTI1MSw3ICsyNTYsNyBA
QCBpbnQgZXhmYXRfc2V0YXR0cihzdHJ1Y3QgbW50X2lkbWFwICppZG1hcCwgc3RydWN0IGRlbnRy
eSAqZGVudHJ5LA0KIA0KIAlpZiAoKGF0dHItPmlhX3ZhbGlkICYgQVRUUl9TSVpFKSAmJg0KIAkg
ICAgYXR0ci0+aWFfc2l6ZSA+IGlfc2l6ZV9yZWFkKGlub2RlKSkgew0KLQkJZXJyb3IgPSBleGZh
dF9jb250X2V4cGFuZChpbm9kZSwgYXR0ci0+aWFfc2l6ZSk7DQorCQllcnJvciA9IGV4ZmF0X2Nv
bnRfZXhwYW5kKGlub2RlLCBhdHRyLT5pYV9zaXplLCBJU19TWU5DKGlub2RlKSk7DQogCQlpZiAo
ZXJyb3IgfHwgYXR0ci0+aWFfdmFsaWQgPT0gQVRUUl9TSVpFKQ0KIAkJCXJldHVybiBlcnJvcjsN
CiAJCWF0dHItPmlhX3ZhbGlkICY9IH5BVFRSX1NJWkU7DQpAQCAtMzc5LDE1ICszODQsMTM5IEBA
IGludCBleGZhdF9maWxlX2ZzeW5jKHN0cnVjdCBmaWxlICpmaWxwLCBsb2ZmX3Qgc3RhcnQsIGxv
ZmZfdCBlbmQsIGludCBkYXRhc3luYykNCiAJcmV0dXJuIGJsa2Rldl9pc3N1ZV9mbHVzaChpbm9k
ZS0+aV9zYi0+c19iZGV2KTsNCiB9DQogDQorc3RhdGljIGludCBleGZhdF9maWxlX3plcm9lZF9y
YW5nZShzdHJ1Y3QgZmlsZSAqZmlsZSwgbG9mZl90IHN0YXJ0LCBsb2ZmX3QgZW5kKQ0KK3sNCisJ
aW50IGVycjsNCisJc3RydWN0IGlub2RlICppbm9kZSA9IGZpbGVfaW5vZGUoZmlsZSk7DQorCXN0
cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9IEVYRkFUX0koaW5vZGUpOw0KKwlzdHJ1Y3QgYWRk
cmVzc19zcGFjZSAqbWFwcGluZyA9IGlub2RlLT5pX21hcHBpbmc7DQorCWNvbnN0IHN0cnVjdCBh
ZGRyZXNzX3NwYWNlX29wZXJhdGlvbnMgKm9wcyA9IG1hcHBpbmctPmFfb3BzOw0KKw0KKwl3aGls
ZSAoc3RhcnQgPCBlbmQpIHsNCisJCXUzMiB6ZXJvZnJvbSwgbGVuOw0KKwkJc3RydWN0IHBhZ2Ug
KnBhZ2U7DQorDQorCQl6ZXJvZnJvbSA9IHN0YXJ0ICYgKFBBR0VfU0laRSAtIDEpOw0KKwkJbGVu
ID0gUEFHRV9TSVpFIC0gemVyb2Zyb207DQorCQlpZiAoc3RhcnQgKyBsZW4gPiBlbmQpDQorCQkJ
bGVuID0gZW5kIC0gc3RhcnQ7DQorDQorCQllcnIgPSBvcHMtPndyaXRlX2JlZ2luKGZpbGUsIG1h
cHBpbmcsIHN0YXJ0LCBsZW4sICZwYWdlLCBOVUxMKTsNCisJCWlmIChlcnIpDQorCQkJZ290byBv
dXQ7DQorDQorCQl6ZXJvX3VzZXJfc2VnbWVudChwYWdlLCB6ZXJvZnJvbSwgemVyb2Zyb20gKyBs
ZW4pOw0KKw0KKwkJZXJyID0gb3BzLT53cml0ZV9lbmQoZmlsZSwgbWFwcGluZywgc3RhcnQsIGxl
biwgbGVuLCBwYWdlLCBOVUxMKTsNCisJCWlmIChlcnIgPCAwKQ0KKwkJCWdvdG8gb3V0Ow0KKwkJ
c3RhcnQgKz0gbGVuOw0KKw0KKwkJYmFsYW5jZV9kaXJ0eV9wYWdlc19yYXRlbGltaXRlZChtYXBw
aW5nKTsNCisJCWNvbmRfcmVzY2hlZCgpOw0KKwl9DQorDQorCWVpLT52YWxpZF9zaXplID0gZW5k
Ow0KKwltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCisNCitvdXQ6DQorCXJldHVybiBlcnI7DQor
fQ0KKw0KK3N0YXRpYyBzc2l6ZV90IGV4ZmF0X2ZpbGVfd3JpdGVfaXRlcihzdHJ1Y3Qga2lvY2Ig
KmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCit7DQorCXNzaXplX3QgcmV0Ow0KKwlzdHJ1
Y3QgZmlsZSAqZmlsZSA9IGlvY2ItPmtpX2ZpbHA7DQorCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBm
aWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9J
KGlub2RlKTsNCisJbG9mZl90IHBvcyA9IGlvY2ItPmtpX3BvczsNCisJbG9mZl90IHZhbGlkX3Np
emU7DQorCWxvZmZfdCBzaXplOw0KKwlzaXplX3QgY291bnQgPSBpb3ZfaXRlcl9jb3VudChpdGVy
KTsNCisNCisJaW5vZGVfbG9jayhpbm9kZSk7DQorDQorCXNpemUgPSBpX3NpemVfcmVhZChpbm9k
ZSk7DQorCXZhbGlkX3NpemUgPSBlaS0+dmFsaWRfc2l6ZTsNCisNCisJcmV0ID0gZ2VuZXJpY193
cml0ZV9jaGVja3MoaW9jYiwgaXRlcik7DQorCWlmIChyZXQgPCAwKQ0KKwkJZ290byB1bmxvY2s7
DQorDQorCWlmIChwb3MgKyBjb3VudCA+IHNpemUpIHsNCisJCXJldCA9IGV4ZmF0X2NvbnRfZXhw
YW5kKGlub2RlLCBwb3MgKyBjb3VudCwgZmFsc2UpOw0KKwkJaWYgKHJldCA8IDApDQorCQkJZ290
byB1bmxvY2s7DQorCX0NCisNCisJaWYgKHBvcyA+IHZhbGlkX3NpemUpIHsNCisJCXJldCA9IGV4
ZmF0X2ZpbGVfemVyb2VkX3JhbmdlKGZpbGUsIHZhbGlkX3NpemUsIHBvcyk7DQorCQlpZiAocmV0
IDwgMCkgew0KKwkJCWV4ZmF0X2Vycihpbm9kZS0+aV9zYiwNCisJCQkJIndyaXRlOiBmYWlsIHRv
IHplcm8gZnJvbSAlbGx1IHRvICVsbHUoJWxkKSIsDQorCQkJCXZhbGlkX3NpemUsIHBvcywgcmV0
KTsNCisNCisJCQlnb3RvIHVubG9jazsNCisJCX0NCisJfQ0KKw0KKwlyZXQgPSBfX2dlbmVyaWNf
ZmlsZV93cml0ZV9pdGVyKGlvY2IsIGl0ZXIpOw0KKwlpZiAocmV0IDw9IDApDQorCQlnb3RvIHVu
bG9jazsNCisNCisJaWYgKChpb2NiLT5raV9mbGFncyAmIElPQ0JfRElSRUNUKSAmJiBwb3MgKyBy
ZXQgPiBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJZWktPnZhbGlkX3NpemUgPSBwb3MgKyByZXQ7DQor
CQltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCisJfQ0KKw0KKwlpbm9kZV91bmxvY2soaW5vZGUp
Ow0KKw0KKwlpZiAocG9zID4gdmFsaWRfc2l6ZSAmJiBpb2NiX2lzX2RzeW5jKGlvY2IpKSB7DQor
CQlzc2l6ZV90IGVyciA9IHZmc19mc3luY19yYW5nZShmaWxlLCB2YWxpZF9zaXplLCBwb3MgLSAx
LA0KKwkJCQlpb2NiLT5raV9mbGFncyAmIElPQ0JfU1lOQyk7DQorCQlpZiAoZXJyIDwgMCkNCisJ
CQlyZXR1cm4gZXJyOw0KKwl9DQorDQorCXJldHVybiBnZW5lcmljX3dyaXRlX3N5bmMoaW9jYiwg
cmV0KTsNCisNCit1bmxvY2s6DQorCWlub2RlX3VubG9jayhpbm9kZSk7DQorDQorCXJldHVybiBy
ZXQ7DQorfQ0KKw0KK3N0YXRpYyBpbnQgZXhmYXRfZmlsZV9tbWFwKHN0cnVjdCBmaWxlICpmaWxl
LCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkNCit7DQorCWludCByZXQ7DQorCXN0cnVjdCBp
bm9kZSAqaW5vZGUgPSBmaWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5m
byAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHN0YXJ0ID0gKChsb2ZmX3Qpdm1hLT52
bV9wZ29mZiA8PCBQQUdFX1NISUZUKTsNCisJbG9mZl90IGVuZCA9IG1pbl90KGxvZmZfdCwgaV9z
aXplX3JlYWQoaW5vZGUpLA0KKwkJCXN0YXJ0ICsgdm1hLT52bV9lbmQgLSB2bWEtPnZtX3N0YXJ0
KTsNCisNCisJaWYgKCh2bWEtPnZtX2ZsYWdzICYgVk1fV1JJVEUpICYmIGVpLT52YWxpZF9zaXpl
IDwgZW5kKSB7DQorCQlyZXQgPSBleGZhdF9maWxlX3plcm9lZF9yYW5nZShmaWxlLCBlaS0+dmFs
aWRfc2l6ZSwgZW5kKTsNCisJCWlmIChyZXQgPCAwKSB7DQorCQkJZXhmYXRfZXJyKGlub2RlLT5p
X3NiLA0KKwkJCQkgICJtbWFwOiBmYWlsIHRvIHplcm8gZnJvbSAlbGx1IHRvICVsbHUoJWQpIiwN
CisJCQkJICBzdGFydCwgZW5kLCByZXQpOw0KKwkJCXJldHVybiByZXQ7DQorCQl9DQorCX0NCisN
CisJcmV0dXJuIGdlbmVyaWNfZmlsZV9tbWFwKGZpbGUsIHZtYSk7DQorfQ0KKw0KIGNvbnN0IHN0
cnVjdCBmaWxlX29wZXJhdGlvbnMgZXhmYXRfZmlsZV9vcGVyYXRpb25zID0gew0KIAkubGxzZWVr
CQk9IGdlbmVyaWNfZmlsZV9sbHNlZWssDQogCS5yZWFkX2l0ZXIJPSBnZW5lcmljX2ZpbGVfcmVh
ZF9pdGVyLA0KLQkud3JpdGVfaXRlcgk9IGdlbmVyaWNfZmlsZV93cml0ZV9pdGVyLA0KKwkud3Jp
dGVfaXRlcgk9IGV4ZmF0X2ZpbGVfd3JpdGVfaXRlciwNCiAJLnVubG9ja2VkX2lvY3RsID0gZXhm
YXRfaW9jdGwsDQogI2lmZGVmIENPTkZJR19DT01QQVQNCiAJLmNvbXBhdF9pb2N0bCA9IGV4ZmF0
X2NvbXBhdF9pb2N0bCwNCiAjZW5kaWYNCi0JLm1tYXAJCT0gZ2VuZXJpY19maWxlX21tYXAsDQor
CS5tbWFwCQk9IGV4ZmF0X2ZpbGVfbW1hcCwNCiAJLmZzeW5jCQk9IGV4ZmF0X2ZpbGVfZnN5bmMs
DQogCS5zcGxpY2VfcmVhZAk9IGdlbmVyaWNfZmlsZV9zcGxpY2VfcmVhZCwNCiAJLnNwbGljZV93
cml0ZQk9IGl0ZXJfZmlsZV9zcGxpY2Vfd3JpdGUsDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvaW5v
ZGUuYyBiL2ZzL2V4ZmF0L2lub2RlLmMNCmluZGV4IDQ4MWRkMzM4ZjJiOC4uYjg1YTgwMzBiODY2
IDEwMDY0NA0KLS0tIGEvZnMvZXhmYXQvaW5vZGUuYw0KKysrIGIvZnMvZXhmYXQvaW5vZGUuYw0K
QEAgLTcyLDggKzcyLDggQEAgaW50IF9fZXhmYXRfd3JpdGVfaW5vZGUoc3RydWN0IGlub2RlICpp
bm9kZSwgaW50IHN5bmMpDQogCWlmIChlaS0+c3RhcnRfY2x1ID09IEVYRkFUX0VPRl9DTFVTVEVS
KQ0KIAkJb25fZGlza19zaXplID0gMDsNCiANCi0JZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3Np
emUgPSBjcHVfdG9fbGU2NChvbl9kaXNrX3NpemUpOw0KLQllcDItPmRlbnRyeS5zdHJlYW0uc2l6
ZSA9IGVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplOw0KKwllcDItPmRlbnRyeS5zdHJlYW0u
dmFsaWRfc2l6ZSA9IGNwdV90b19sZTY0KGVpLT52YWxpZF9zaXplKTsNCisJZXAyLT5kZW50cnku
c3RyZWFtLnNpemUgPSBjcHVfdG9fbGU2NChvbl9kaXNrX3NpemUpOw0KIAlpZiAob25fZGlza19z
aXplKSB7DQogCQllcDItPmRlbnRyeS5zdHJlYW0uZmxhZ3MgPSBlaS0+ZmxhZ3M7DQogCQllcDIt
PmRlbnRyeS5zdHJlYW0uc3RhcnRfY2x1ID0gY3B1X3RvX2xlMzIoZWktPnN0YXJ0X2NsdSk7DQpA
QCAtMjc2LDYgKzI3Niw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZ2V0X2Jsb2NrKHN0cnVjdCBpbm9k
ZSAqaW5vZGUsIHNlY3Rvcl90IGlibG9jaywNCiAJc2VjdG9yX3QgbGFzdF9ibG9jazsNCiAJc2Vj
dG9yX3QgcGh5cyA9IDA7DQogCWxvZmZfdCBwb3M7DQorCXNpemVfdCBiX3NpemUgPSBiaF9yZXN1
bHQtPmJfc2l6ZTsNCiANCiAJbXV0ZXhfbG9jaygmc2JpLT5zX2xvY2spOw0KIAlsYXN0X2Jsb2Nr
ID0gRVhGQVRfQl9UT19CTEtfUk9VTkRfVVAoaV9zaXplX3JlYWQoaW5vZGUpLCBzYik7DQpAQCAt
MzAzLDE3ICszMDQsMjUgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2Rl
ICppbm9kZSwgc2VjdG9yX3QgaWJsb2NrLA0KIAltYXBwZWRfYmxvY2tzID0gc2JpLT5zZWN0X3Bl
cl9jbHVzIC0gc2VjX29mZnNldDsNCiAJbWF4X2Jsb2NrcyA9IG1pbihtYXBwZWRfYmxvY2tzLCBt
YXhfYmxvY2tzKTsNCiANCi0JLyogVHJlYXQgbmV3bHkgYWRkZWQgYmxvY2sgLyBjbHVzdGVyICov
DQotCWlmIChpYmxvY2sgPCBsYXN0X2Jsb2NrKQ0KLQkJY3JlYXRlID0gMDsNCi0NCi0JaWYgKGNy
ZWF0ZSB8fCBidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkgew0KLQkJcG9zID0gRVhGQVRfQkxLX1RP
X0IoKGlibG9jayArIDEpLCBzYik7DQorCXBvcyA9IEVYRkFUX0JMS19UT19CKChpYmxvY2sgKyAx
KSwgc2IpOw0KKwlpZiAoKGNyZWF0ZSAmJiBpYmxvY2sgPj0gbGFzdF9ibG9jaykgfHwgYnVmZmVy
X2RlbGF5KGJoX3Jlc3VsdCkpIHsNCiAJCWlmIChlaS0+aV9zaXplX29uZGlzayA8IHBvcykNCiAJ
CQllaS0+aV9zaXplX29uZGlzayA9IHBvczsNCiAJfQ0KIA0KKwltYXBfYmgoYmhfcmVzdWx0LCBz
YiwgcGh5cyk7DQorCWlmIChidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkNCisJCWNsZWFyX2J1ZmZl
cl9kZWxheShiaF9yZXN1bHQpOw0KKw0KIAlpZiAoY3JlYXRlKSB7DQorCQlzZWN0b3JfdCB2YWxp
ZF9ibGtzOw0KKw0KKwkJdmFsaWRfYmxrcyA9IEVYRkFUX0JfVE9fQkxLX1JPVU5EX1VQKGVpLT52
YWxpZF9zaXplLCBzYik7DQorCQlpZiAoaWJsb2NrIDwgdmFsaWRfYmxrcyAmJiBpYmxvY2sgKyBt
YXhfYmxvY2tzID49IHZhbGlkX2Jsa3MpIHsNCisJCQltYXhfYmxvY2tzID0gdmFsaWRfYmxrcyAt
IGlibG9jazsNCisJCQlnb3RvIGRvbmU7DQorCQl9DQorDQogCQllcnIgPSBleGZhdF9tYXBfbmV3
X2J1ZmZlcihlaSwgYmhfcmVzdWx0LCBwb3MpOw0KIAkJaWYgKGVycikgew0KIAkJCWV4ZmF0X2Zz
X2Vycm9yKHNiLA0KQEAgLTMyMSwxMSArMzMwLDQwIEBAIHN0YXRpYyBpbnQgZXhmYXRfZ2V0X2Js
b2NrKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHNlY3Rvcl90IGlibG9jaywNCiAJCQkJCXBvcywgZWkt
Pmlfc2l6ZV9hbGlnbmVkKTsNCiAJCQlnb3RvIHVubG9ja19yZXQ7DQogCQl9DQotCX0NCiANCi0J
aWYgKGJ1ZmZlcl9kZWxheShiaF9yZXN1bHQpKQ0KLQkJY2xlYXJfYnVmZmVyX2RlbGF5KGJoX3Jl
c3VsdCk7DQotCW1hcF9iaChiaF9yZXN1bHQsIHNiLCBwaHlzKTsNCisJCWlmIChwb3MgLSBzYi0+
c19ibG9ja3NpemUgKyBiX3NpemUgPiBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJCWVpLT52YWxpZF9z
aXplID0gcG9zIC0gc2ItPnNfYmxvY2tzaXplICsgYl9zaXplOw0KKwkJCW1hcmtfaW5vZGVfZGly
dHkoaW5vZGUpOw0KKwkJfQ0KKwl9IGVsc2Ugew0KKwkJc2l6ZV90IGJfc2l6ZSA9IEVYRkFUX0JM
S19UT19CKG1heF9ibG9ja3MsIHNiKTsNCisNCisJCXBvcyA9IEVYRkFUX0JMS19UT19CKGlibG9j
aywgc2IpOw0KKwkJaWYgKHBvcyA+PSBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJCS8qIFJlYWQgb3V0
IG9mIHZhbGlkIGRhdGEgKi8NCisJCQljbGVhcl9idWZmZXJfbWFwcGVkKGJoX3Jlc3VsdCk7DQor
CQl9IGVsc2UgaWYgKHBvcyArIGJfc2l6ZSA8PSBlaS0+dmFsaWRfc2l6ZSkgew0KKwkJCS8qIE5v
cm1hbCByZWFkICovDQorCQl9IGVsc2UgaWYgKHBvcyArIHNiLT5zX2Jsb2Nrc2l6ZSA8PSBlaS0+
dmFsaWRfc2l6ZSkgew0KKwkJCS8qIE5vcm1hbCBzaG9ydCByZWFkICovDQorCQkJbWF4X2Jsb2Nr
cyA9IDE7DQorCQl9IGVsc2Ugew0KKwkJCS8qIFJlYWQgYWNyb3NzIHZhbGlkIHNpemUgKi8NCisJ
CQlpZiAoYmhfcmVzdWx0LT5iX3BhZ2UpIHsNCisJCQkJbG9mZl90IHNpemUgPSBlaS0+dmFsaWRf
c2l6ZSAtIHBvczsNCisJCQkJbG9mZl90IG9mZiA9IHBvcyAmIChQQUdFX1NJWkUgLSAxKTsNCisN
CisJCQkJc2V0X2JoX3BhZ2UoYmhfcmVzdWx0LCBiaF9yZXN1bHQtPmJfcGFnZSwgb2ZmKTsNCisJ
CQkJZXJyID0gYmhfcmVhZChiaF9yZXN1bHQsIDApOw0KKwkJCQlpZiAoZXJyIDwgMCkNCisJCQkJ
CWdvdG8gdW5sb2NrX3JldDsNCisNCisJCQkJemVyb191c2VyX3NlZ21lbnQoYmhfcmVzdWx0LT5i
X3BhZ2UsIG9mZiArIHNpemUsDQorCQkJCQkJb2ZmICsgc2ItPnNfYmxvY2tzaXplKTsNCisJCQl9
DQorCQkJbWF4X2Jsb2NrcyA9IDE7DQorCQl9DQorCX0NCiBkb25lOg0KIAliaF9yZXN1bHQtPmJf
c2l6ZSA9IEVYRkFUX0JMS19UT19CKG1heF9ibG9ja3MsIHNiKTsNCiB1bmxvY2tfcmV0Og0KQEAg
LTM0MCw2ICszNzgsMTcgQEAgc3RhdGljIGludCBleGZhdF9yZWFkX2ZvbGlvKHN0cnVjdCBmaWxl
ICpmaWxlLCBzdHJ1Y3QgZm9saW8gKmZvbGlvKQ0KIA0KIHN0YXRpYyB2b2lkIGV4ZmF0X3JlYWRh
aGVhZChzdHJ1Y3QgcmVhZGFoZWFkX2NvbnRyb2wgKnJhYykNCiB7DQorCXN0cnVjdCBhZGRyZXNz
X3NwYWNlICptYXBwaW5nID0gcmFjLT5tYXBwaW5nOw0KKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0g
bWFwcGluZy0+aG9zdDsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShp
bm9kZSk7DQorCWxvZmZfdCBwb3MgPSByZWFkYWhlYWRfcG9zKHJhYyk7DQorDQorCS8qIFJhbmdl
IGNyb3NzIHZhbGlkX3NpemUsIHJlYWQgaXQgcGFnZSBieSBwYWdlLiAqLw0KKwlpZiAoZWktPnZh
bGlkX3NpemUgPCBpX3NpemVfcmVhZChpbm9kZSkgJiYNCisJICAgIHBvcyA8PSBlaS0+dmFsaWRf
c2l6ZSAmJg0KKwkgICAgZWktPnZhbGlkX3NpemUgPCBwb3MgKyByZWFkYWhlYWRfbGVuZ3RoKHJh
YykpDQorCQlyZXR1cm47DQorDQogCW1wYWdlX3JlYWRhaGVhZChyYWMsIGV4ZmF0X2dldF9ibG9j
ayk7DQogfQ0KIA0KQEAgLTQwMyw2ICs0NTIsMjIgQEAgc3RhdGljIGludCBleGZhdF93cml0ZV9l
bmQoc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nLA0KIAkJ
bWFya19pbm9kZV9kaXJ0eShpbm9kZSk7DQogCX0NCiANCisJaWYgKGVyciA+PSAwKSB7DQorCQlp
ZiAocG9zICsgZXJyID4gZWktPnZhbGlkX3NpemUpIHsNCisJCQllaS0+dmFsaWRfc2l6ZSA9IHBv
cyArIGVycjsNCisJCQltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCisJCX0NCisNCisJCS8qDQor
CQkgKiB2YWxpZF9zaXplIGlzIGV4dGVuZGVkIHdpdGggc2VjdG9yLWFsaWduZWQgbGVuZ3RoIGlu
DQorCQkgKiBleGZhdF9nZXRfYmxvY2soKSwgc2V0IHRvIHRoZSB3cml0cmVuIGxlbmd0aC4NCisJ
CSAqLw0KKwkJaWYgKGVpLT52YWxpZF9zaXplID4gaV9zaXplX3JlYWQoaW5vZGUpKSB7DQorCQkJ
ZWktPnZhbGlkX3NpemUgPSBpX3NpemVfcmVhZChpbm9kZSk7DQorCQkJbWFya19pbm9kZV9kaXJ0
eShpbm9kZSk7DQorCQl9DQorCX0NCisNCiAJcmV0dXJuIGVycjsNCiB9DQogDQpAQCAtNDEwLDYg
KzQ3NSw4IEBAIHN0YXRpYyBzc2l6ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlv
Y2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCiB7DQogCXN0cnVjdCBhZGRyZXNzX3NwYWNlICpt
YXBwaW5nID0gaW9jYi0+a2lfZmlscC0+Zl9tYXBwaW5nOw0KIAlzdHJ1Y3QgaW5vZGUgKmlub2Rl
ID0gbWFwcGluZy0+aG9zdDsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRf
SShpbm9kZSk7DQorCWxvZmZfdCBwb3MgPSBpb2NiLT5raV9wb3M7DQogCWxvZmZfdCBzaXplID0g
aW9jYi0+a2lfcG9zICsgaW92X2l0ZXJfY291bnQoaXRlcik7DQogCWludCBydyA9IGlvdl9pdGVy
X3J3KGl0ZXIpOw0KIAlzc2l6ZV90IHJldDsNCkBAIC00MzMsOCArNTAwLDIwIEBAIHN0YXRpYyBz
c2l6ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRl
ciAqaXRlcikNCiAJICogY29uZGl0aW9uIG9mIGV4ZmF0X2dldF9ibG9jaygpIGFuZCAtPnRydW5j
YXRlKCkuDQogCSAqLw0KIAlyZXQgPSBibG9ja2Rldl9kaXJlY3RfSU8oaW9jYiwgaW5vZGUsIGl0
ZXIsIGV4ZmF0X2dldF9ibG9jayk7DQotCWlmIChyZXQgPCAwICYmIChydyAmIFdSSVRFKSkNCi0J
CWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBzaXplKTsNCisJaWYgKHJldCA8IDApIHsNCisJ
CWlmIChydyAmIFdSSVRFKQ0KKwkJCWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBzaXplKTsN
CisNCisJCWlmIChyZXQgIT0gLUVJT0NCUVVFVUVEKQ0KKwkJCXJldHVybiByZXQ7DQorCX0gZWxz
ZQ0KKwkJc2l6ZSA9IHBvcyArIHJldDsNCisNCisJaWYgKChydyAmIFJFQUQpICYmIHBvcyA8IGVp
LT52YWxpZF9zaXplICYmIGVpLT52YWxpZF9zaXplIDwgc2l6ZSkgew0KKwkJaW92X2l0ZXJfcmV2
ZXJ0KGl0ZXIsIHNpemUgLSBlaS0+dmFsaWRfc2l6ZSk7DQorCQlpb3ZfaXRlcl96ZXJvKHNpemUg
LSBlaS0+dmFsaWRfc2l6ZSwgaXRlcik7DQorCX0NCisNCiAJcmV0dXJuIHJldDsNCiB9DQogDQpA
QCAtNTM0LDYgKzYxMyw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmlsbF9pbm9kZShzdHJ1Y3QgaW5v
ZGUgKmlub2RlLCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5ICppbmZvKQ0KIAllaS0+c3RhcnRfY2x1
ID0gaW5mby0+c3RhcnRfY2x1Ow0KIAllaS0+ZmxhZ3MgPSBpbmZvLT5mbGFnczsNCiAJZWktPnR5
cGUgPSBpbmZvLT50eXBlOw0KKwllaS0+dmFsaWRfc2l6ZSA9IGluZm8tPnZhbGlkX3NpemU7DQog
DQogCWVpLT52ZXJzaW9uID0gMDsNCiAJZWktPmhpbnRfc3RhdC5laWR4ID0gMDsNCmRpZmYgLS1n
aXQgYS9mcy9leGZhdC9uYW1laS5jIGIvZnMvZXhmYXQvbmFtZWkuYw0KaW5kZXggZTBmZjlkMTU2
ZjZmLi5jZWFhNzIwODA0YjkgMTAwNjQ0DQotLS0gYS9mcy9leGZhdC9uYW1laS5jDQorKysgYi9m
cy9leGZhdC9uYW1laS5jDQpAQCAtMzk1LDYgKzM5NSw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmlu
ZF9lbXB0eV9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlub2RlLA0KIAkJaV9zaXplX3dyaXRlKGlub2Rl
LCBzaXplKTsNCiAJCWVpLT5pX3NpemVfb25kaXNrICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KIAkJ
ZWktPmlfc2l6ZV9hbGlnbmVkICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KKwkJZWktPnZhbGlkX3Np
emUgKz0gc2JpLT5jbHVzdGVyX3NpemU7DQogCQllaS0+ZmxhZ3MgPSBwX2Rpci0+ZmxhZ3M7DQog
CQlpbm9kZS0+aV9ibG9ja3MgKz0gc2JpLT5jbHVzdGVyX3NpemUgPj4gOTsNCiAJfQ0KQEAgLTU0
NCw2ICs1NDUsOCBAQCBzdGF0aWMgaW50IGV4ZmF0X2FkZF9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlu
b2RlLCBjb25zdCBjaGFyICpwYXRoLA0KIAkJaW5mby0+c2l6ZSA9IGNsdV9zaXplOw0KIAkJaW5m
by0+bnVtX3N1YmRpcnMgPSBFWEZBVF9NSU5fU1VCRElSOw0KIAl9DQorCWluZm8tPnZhbGlkX3Np
emUgPSBpbmZvLT5zaXplOw0KKw0KIAltZW1zZXQoJmluZm8tPmNydGltZSwgMCwgc2l6ZW9mKGlu
Zm8tPmNydGltZSkpOw0KIAltZW1zZXQoJmluZm8tPm10aW1lLCAwLCBzaXplb2YoaW5mby0+bXRp
bWUpKTsNCiAJbWVtc2V0KCZpbmZvLT5hdGltZSwgMCwgc2l6ZW9mKGluZm8tPmF0aW1lKSk7DQpA
QCAtNjQ1LDcgKzY0OCw4IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZChzdHJ1Y3QgaW5vZGUgKmRp
ciwgc3RydWN0IHFzdHIgKnFuYW1lLA0KIA0KIAlpbmZvLT50eXBlID0gZXhmYXRfZ2V0X2VudHJ5
X3R5cGUoZXApOw0KIAlpbmZvLT5hdHRyID0gbGUxNl90b19jcHUoZXAtPmRlbnRyeS5maWxlLmF0
dHIpOw0KLQlpbmZvLT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlk
X3NpemUpOw0KKwlpbmZvLT52YWxpZF9zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3Ry
ZWFtLnZhbGlkX3NpemUpOw0KKwlpbmZvLT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnku
c3RyZWFtLnNpemUpOw0KIAlpZiAoKGluZm8tPnR5cGUgPT0gVFlQRV9GSUxFKSAmJiAoaW5mby0+
c2l6ZSA9PSAwKSkgew0KIAkJaW5mby0+ZmxhZ3MgPSBBTExPQ19OT19GQVRfQ0hBSU47DQogCQlp
bmZvLT5zdGFydF9jbHUgPSBFWEZBVF9FT0ZfQ0xVU1RFUjsNCkBAIC0xMjcxLDYgKzEyNzUsNyBA
QCBzdGF0aWMgaW50IF9fZXhmYXRfcmVuYW1lKHN0cnVjdCBpbm9kZSAqb2xkX3BhcmVudF9pbm9k
ZSwNCiAJCQl9DQogDQogCQkJaV9zaXplX3dyaXRlKG5ld19pbm9kZSwgMCk7DQorCQkJbmV3X2Vp
LT52YWxpZF9zaXplID0gMDsNCiAJCQluZXdfZWktPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVT
VEVSOw0KIAkJCW5ld19laS0+ZmxhZ3MgPSBBTExPQ19OT19GQVRfQ0hBSU47DQogCQl9DQotLSAN
CjIuMjUuMQ0K
