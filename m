Return-Path: <linux-fsdevel+bounces-4864-lists+linux-fsdevel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [147.75.199.223])
	by mail.lfdr.de (Postfix) with ESMTPS id A67C6805081
	for <lists+linux-fsdevel@lfdr.de>; Tue,  5 Dec 2023 11:37:37 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id C78BC1C20C21
	for <lists+linux-fsdevel@lfdr.de>; Tue,  5 Dec 2023 10:37:36 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 2FB7655771
	for <lists+linux-fsdevel@lfdr.de>; Tue,  5 Dec 2023 10:37:36 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=sony.com header.i=@sony.com header.b="nQHqZI1v"
X-Original-To: linux-fsdevel@vger.kernel.org
Received: from mx08-001d1705.pphosted.com (mx08-001d1705.pphosted.com [185.183.30.70])
	by lindbergh.monkeyblade.net (Postfix) with ESMTPS id A7C9F170B
	for <linux-fsdevel@vger.kernel.org>; Tue,  5 Dec 2023 02:16:49 -0800 (PST)
Received: from pps.filterd (m0209319.ppops.net [127.0.0.1])
	by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 3B56Qawh013397;
	Tue, 5 Dec 2023 10:16:36 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : mime-version :
 content-type : content-transfer-encoding; s=S1;
 bh=XYERbMOHgZgZDWwdeNt+LmB8iB+nd26oRVMFfd9kXvA=;
 b=nQHqZI1vN7f9AyQSPGtVAVto+Tbp4IGXF3DEi6E2cMA+qTE0EgaCRYlgY1oxBnvmm80y
 E2+9OTZOz+1yXJVojPDvw9TIaDlGZxmDvQ3a9sp9q6Yujnt+g75+N3E98FBKlWN7jEO2
 twjL+mFiiTJ6KPj1kLVHEOsJdIq2ERzAmUHBh9V4lmkz4nSTmo9EEIyZrzKqGN+PBVoi
 wDYDnqo8DoVGisNRFJiXKoDKVOkcdUIHzmnR5w3BNVQUVEQZaoEZXWztiT/MW6ai13Sg
 zxwlQXEczotsGYqfnyiUdRqJL/61yzLAT/uZYj9H6P+Z4mM0ApiscSgHnKqggbKruKbZ ng== 
Received: from apc01-tyz-obe.outbound.protection.outlook.com (mail-tyzapc01lp2041.outbound.protection.outlook.com [104.47.110.41])
	by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3uqvytjnux-1
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
	Tue, 05 Dec 2023 10:16:35 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=igPY/MXEacaDruh/L//kRitV7bSYOp3htc4hNlLwEFIGDNEvAQBfIHxFIKPjP8n4E3F57ZANuzz+GqaQcZ4eCXKkERYuOFRmixNbBrCRpgwARkSRHN99KJT7SzJc7IZw+Eacb21T3XzCzhk2uQzF/1uWv29UcTSB84No3hUbL1qFsA1uwRR3RjRkC41mAW8rmKjZRl9Ma3qox86IuSE3pHQrqvc59plfezsbH3/StqkcgNpGXCTLo4chctZraV0KAA5zsiZsl/1zyU6negX72Lx/vrq0CJ8HebKdyH7Q75bvVnTYvthQFf8ZR8JmZ4ZCk6ZussO0nRtrfon7ZH8o3g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=XYERbMOHgZgZDWwdeNt+LmB8iB+nd26oRVMFfd9kXvA=;
 b=BhfqWNIcPLC76j5WmlwLnMRD3J+4wFrwTgIwfnAJBY1m1ZbCLgcvQUH8dLw63FXKpWOzTQ1vJXB6ZsnyXh0lFmIEYM9rKs+46daScfCdQRfIihsnNGSrcj53CXCf/fnwVJC/f3BpldSMsFYups96299z2wt2oiGvsOc3D0xtbH6O/t0eHO8YLSap5aun3qqydKQYXboaN0lunCFYD6PWWK54g4BLlHSQLyFIDhYWzighiM2Pr3SN0OnREEAPE59HqzrZ26+f2XShIy7ZMKKFAujl8RkF8A8sun9Ma9KcF8M4BG2AFa7zmN9CrUcai6Hb7qzEs4LAtWeRBwNB5dZwYA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by TY0PR04MB5633.apcprd04.prod.outlook.com (2603:1096:400:1ae::12) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7046.34; Tue, 5 Dec
 2023 10:16:28 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::2fd0:f20f:14a9:a95a%4]) with mapi id 15.20.7046.034; Tue, 5 Dec 2023
 10:16:27 +0000
From: "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To: "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com"
	<sj1557.seo@samsung.com>
CC: "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com"
	<Wataru.Aoyama@sony.com>,
        "cpgs@samsung.com" <cpgs@samsung.com>,
        Dan
 Carpenter <dan.carpenter@linaro.org>
Subject: [PATCH v6 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v6 1/2] exfat: change to get file size from DataLength
Thread-Index: AQHaJ2QbZwnpliBo30q9nKENpufiDg==
Date: Tue, 5 Dec 2023 10:16:27 +0000
Message-ID: 
 <PUZPR04MB6316167A6FE0C2356AFCDFFD8185A@PUZPR04MB6316.apcprd04.prod.outlook.com>
References: 
 <PUZPR04MB6316D39C9404C34756CA368981A6A@PUZPR04MB6316.apcprd04.prod.outlook.com>
 <PUZPR04MB63164691A5119414706F66998182A@PUZPR04MB6316.apcprd04.prod.outlook.com>
In-Reply-To: 
 <PUZPR04MB63164691A5119414706F66998182A@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|TY0PR04MB5633:EE_
x-ms-office365-filtering-correlation-id: 42b90f35-900d-4ba6-bbf0-08dbf57b3e54
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 
 0Ktn3LvRzVMZVX8FjtnjQ9AzME6aCogzaAlZSGe+EopjFJKlNqnRVvc/Yn303wfKaZRaJIFhxgom6KZCEwXTICIWKTEYYiS9GbQivS6bixbXq2z/68y54N5ZNCpoVbv5CGgpEXx5aW6ZdYi77UhbdqRIpW2W6rwwVcmlEOVTPhN1Q9w4MZg/eIkbRemNjTf3oBAmZK+GkwuXkto71k94sSsC+UWiX//WW3v0vcajzKnCGkSCqypjgnT7RVsEY6lMTLs7dAIZ6mPSqcLSwcoaYoA17u7xQx8X8STD7OLcMxHsWQSLe0n+evrarJnrM0U8UQ7D64HHsR55eDRyiZ/deov3pcs/Ef/TAFgxiueYsQtUxn0bgiadJFRO84a563NyUgY4ckkHZi67JDWQWYJJP86TV5lF3+REG4KkY/J525dr9K4TMddajl7kEpofGlRt6OK+lsPRaPAYOUolMJYWXKkDobchwNIHfitYIRZepC9jy7nadvxHNu+3GPHGrHyAyK+fOn7+yOzr+YSfCgRy9HC4sAcZP8qYYjrFzjvUFBpIumdm1tZpeCAiFqCAPrW0NnQZuu4SzWel29GkuRXQkh0GhrDLrSbWkbZrOILPRu66XBoBTabeyXCQeBGgmr95
x-forefront-antispam-report: 
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(376002)(39860400002)(346002)(396003)(366004)(136003)(230922051799003)(64100799003)(186009)(1800799012)(451199024)(76116006)(110136005)(122000001)(83380400001)(71200400001)(478600001)(6506007)(7696005)(82960400001)(66446008)(38100700002)(8936002)(8676002)(4326008)(66556008)(54906003)(66476007)(64756008)(316002)(9686003)(55016003)(26005)(66946007)(86362001)(52536014)(5660300002)(2906002)(30864003)(41300700001)(38070700009)(33656002);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: 
 =?utf-8?B?czZlZXl0RlJtWTdwbGhialBGT3ZpWnVzYnh6QWw0QkpiNzc4SUFRdytaa3FE?=
 =?utf-8?B?V1JCMXY2WTZJU2o2dHpySXhTc3AydklpRi9McGtsRVYwUUVNbFdCcXI5aTd0?=
 =?utf-8?B?VHE4b09NNTRHazBZeG9LZVJQTmFOcm96cVhpSTB2aHl3NUxMQnJ1ZXV3bUJN?=
 =?utf-8?B?VEl3WTc4NGs1V2lzZDdkR0dtNWk2dE9XdzdUS1IxeGFFTUdXWXJuMkpYa3Q1?=
 =?utf-8?B?cEVib0RMcUxDSFlMTzZxNEp5Sk9OTFR6WDZyMngySGk1MWIzTEF3aEZKWGJa?=
 =?utf-8?B?c0JDZzR0VlR6aFpqTlJFR2YrVk15c3VGcDJZNFZ0MGZ2SHBza1dTN3hBNDJn?=
 =?utf-8?B?ZkxkRU8xRGU0L3ZxZUYyMFMxR25GOG1mbFVxU3JDTERKOFlrKzAvOXJ3c1RB?=
 =?utf-8?B?OXRscTBjUXo1aG0zamhXT2N1SWdKT1pzWVBqalpWdm0rUWVUWjRUcytZemc3?=
 =?utf-8?B?NXlDTXM3VG5BN2dpb2NsMzlZL3RnczBlWm5oRDIvcGV0L0FkaktaQW82VmZE?=
 =?utf-8?B?N0dpdXArb3pxVzlFa3V5S3haMEdsTmcra0Y1c1dKc3ZqTUFSM2s0SUFFbW43?=
 =?utf-8?B?UXRSbXN5SER1aE9NYVQwR213SW1xeHFBeFdETTQ0K1hOUVJGRlZmQUtXMzE4?=
 =?utf-8?B?anF2ZFgzVzRsS0tBOWp2d3FuVmkvVnRId2JZd0gzUlczQklKeGg3OCt5L09z?=
 =?utf-8?B?eldJVkZwZkxXNHFHYTFTMXRkdlJnOTlWdHZueVhud1pxYm93QjBWT0VaSHV4?=
 =?utf-8?B?cFZDdnJQaHZzVXpMeFpoL0NqL1hsRGtHM21GNTBvRFpRcXR1Q08vZkZIaVVX?=
 =?utf-8?B?QklSM2RHbEw5NjRFSUMrb3duVlNRYkc4cTIxaTBpbGVFRTl4VlArVXA0OUtz?=
 =?utf-8?B?M0F4WUh0V3U2NU9RZ3UzNFR0dTBxdW1FMktlaWVNR0NpRzJlS3orV2FFZk1l?=
 =?utf-8?B?L2lxeU93UmErbEdXZmsvbUZsLzdwdGZLUEJyN29yUzc5WFQ4TEJMVWNMYWlY?=
 =?utf-8?B?eDJVYWpKUjlYRXp0ZnZIVVg3NVVIYi9YT3BSSVJmT0JSOUV3U0ZtMjZ1NzQ1?=
 =?utf-8?B?U1FIK1Zpc3JwdVppSDBFa2dVRm5PME9icVRGTVo5ajhPZUQ0Qm14WkZWdzFi?=
 =?utf-8?B?VDdzMEhkV3QxSEZkdnNlbzhYbUdtbndSTlNEL1gwNE1oV2kzNjc0bVJHTGVr?=
 =?utf-8?B?Z2VUVHZsSVRhbnd1TEgrRXAyWVY0aTVtUEtuZmVtYzdFRS8vZ1o3cE1aMjNG?=
 =?utf-8?B?SmR5TU10TjdPZW1UR2tuaTdNVmp0WjhHdWxSbHo4bjJVZGFndzdQUmV3NXhP?=
 =?utf-8?B?MTJCNzR0TTQxYk0yNUcvaHZhSUNETlRMUis2MGE2VVA0RVptK0JiUEpxMnk2?=
 =?utf-8?B?YTRvcmRYa2k5L082S0Vnbk95WDNvQkpMQUhaNCtTM21waVpWRWlIT0lOb3cw?=
 =?utf-8?B?SlhJUHRoaUVGN253QVpzUksvaXRoWjVUSktJc3FjdWtrU292Q0ZpNzVFSEdm?=
 =?utf-8?B?T0RzMjZqV3hmNnpYQlN5cE5HbVFSbC8rdEE5bG9QeVNwR0h3YmZEdm16TDZT?=
 =?utf-8?B?V1NZU2F6YzdsbGNpa1EwcHBhaFhBUndZUjF1YVlrNEY0R3k1NjBtZmMyMmZn?=
 =?utf-8?B?Q05PNHJPV0c5QlRCd0VzWURlU1FiVSsyQzBBQjlwcTZPSzRpOUt5SFVtMXVn?=
 =?utf-8?B?VS80SkpxNjVPSzUzZTZ6THBUYUY0S0s4TWpTWHJLT3ZDNktPWVNsQ0RHMWpi?=
 =?utf-8?B?cHBONCt2WWxzSmVyaHBGWEpYdGMvcGtiZ3JBdXBxSWdTd0tXekxaQVZ0VVZX?=
 =?utf-8?B?azd4QlBJS0RDdE04eTNqQVlPN3FVbm04MExXMWU5Q0NEeVo3ZUxZVWtoT29u?=
 =?utf-8?B?RXFaRlVmcnYyQ2ZHcitQdlMrTXljQ3I3K2FlVllTV2Rid3o3TUdGUlNZTWNW?=
 =?utf-8?B?azF4RE1FYmgxeUNhWjBINHFlMm1rWEgrbmdmSFhOUHZFenpUcjRkclpqUnlB?=
 =?utf-8?B?Rm93UEN0K01CV0hydWliY2pGYklkVmh0NWZGYWQxQmpLejZVakdiSHcrN3I4?=
 =?utf-8?B?TTJHM2lIMDJjQk1IWDRaTHNWWXpyTGZSMnZ6S3FsOCtVOGQwVFJXeXoyK3VW?=
 =?utf-8?Q?M16TvNvbS3D5dvxwthCDF1uxe?=
Precedence: bulk
X-Mailing-List: linux-fsdevel@vger.kernel.org
List-Id: <linux-fsdevel.vger.kernel.org>
List-Subscribe: <mailto:linux-fsdevel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-fsdevel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: 
	m6kOEFj4pgGp6b/eZgrDo950gxxnkBR4N4QVNBn28aYWDVUSK05tLdSZPm65h7KdI+IWs8yz7Xw7uM8dVtT1qiggd38+RCRn9Sh4nCht4jUfeAnwk3AzpNTzql7AZhUYEsJVIqZB17+GgPpzUdTFKJKbasjSkmoMPSpv6STiQyMjpUhOGxU1RCDA3wp86tWKsHHhUaIfZL5StbTOCjwfNPp6Y/OTfF3SAYVH7WVwPH/gd9jfpezcvOlvaKBTlaf/4vfimTByygx/5pV5fWrWMoYfyxiIlhkt0RXxsL120YbLleaoaoLO/MA06FL7W6tf+AO0gIf86WR8lEJtmWn3fWnVgsY49R0l0iKFS+nkCzLJpI150hcDahkg3ZXcUmffgJbDVefJZkDoeMOVmNpKOfcjI8ibkA6B4u6pdDvYKDuBIYTDkQ9is5O1AdkHJO8fJfWQg8jUXTnMdWDCa/2uuyQfkkCN72brNYPLf58PH0GWrlmxIxwwPD394hYjMhdL9IHybJeONtysVNDRyW+PgBVN7SrP1A8hVSnaaL/++GVtYbir1ckJbJ+xsHWL6sAaH81WIlsR6GT3on1nIgYiq7AbA1qU52uqIv2ny614lETOLOwIBHtwsRri6l2cOF4UddPOoeReGSgu4+agGqHy1fXStwL2nDKgtdh/cIjQZJe651uNv4+Vf2zsYmXCUlsNxWSrKCxZ1/rFAuFem6o8V0XCM8Z74uv14kxflh94Pp5qOlall/xkfvCD0xQ3j83AryPksjkNcN9f5ZildUYOY9j1/m7uKa+P+BPkJB5FLnk7E+EDv9R6Noy2eSh2iTP4TVjqzI/dBUjPHb4//NEUf7JQ57x4n9RZxXZ76NGS2fKrPgBO1i2eYupG2Y+uq2eW
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 42b90f35-900d-4ba6-bbf0-08dbf57b3e54
X-MS-Exchange-CrossTenant-originalarrivaltime: 05 Dec 2023 10:16:27.8494
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: Ti77zojOCuin/W2UBlVPHFcxFdbE6Jt8TmIopGr+dTuTVkgh+GrR+koneJqnfK7os/FDXFjDOU7xznDGfe1ZRw==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: TY0PR04MB5633
X-Proofpoint-GUID: EfsI7DZk9uD2akoj5FGVQYLTANQCQvmr
X-Proofpoint-ORIG-GUID: EfsI7DZk9uD2akoj5FGVQYLTANQCQvmr
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: EfsI7DZk9uD2akoj5FGVQYLTANQCQvmr
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-12-05_04,2023-12-05_01,2023-05-22_02

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDIgKw0KIGZzL2V4ZmF0L2ZpbGUuYyAgICAgfCAxMTggKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0NCiBmcy9leGZhdC9pbm9kZS5jICAg
IHwgMTI0ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tDQogZnMv
ZXhmYXQvbmFtZWkuYyAgICB8ICAgNiArKysNCiA0IGZpbGVzIGNoYW5nZWQsIDIzMSBpbnNlcnRp
b25zKCspLCAxOSBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2ZzL2V4ZmF0L2V4ZmF0X2Zz
LmggYi9mcy9leGZhdC9leGZhdF9mcy5oDQppbmRleCBhN2EyYzM1ZDc0ZmIuLmUzYjFmOGUwMjJk
ZiAxMDA2NDQNCi0tLSBhL2ZzL2V4ZmF0L2V4ZmF0X2ZzLmgNCisrKyBiL2ZzL2V4ZmF0L2V4ZmF0
X2ZzLmgNCkBAIC0yMDgsNiArMjA4LDcgQEAgc3RydWN0IGV4ZmF0X2Rpcl9lbnRyeSB7DQogCXVu
c2lnbmVkIGNoYXIgZmxhZ3M7DQogCXVuc2lnbmVkIHNob3J0IGF0dHI7DQogCWxvZmZfdCBzaXpl
Ow0KKwlsb2ZmX3QgdmFsaWRfc2l6ZTsNCiAJdW5zaWduZWQgaW50IG51bV9zdWJkaXJzOw0KIAlz
dHJ1Y3QgdGltZXNwZWM2NCBhdGltZTsNCiAJc3RydWN0IHRpbWVzcGVjNjQgbXRpbWU7DQpAQCAt
MzE3LDYgKzMxOCw3IEBAIHN0cnVjdCBleGZhdF9pbm9kZV9pbmZvIHsNCiAJbG9mZl90IGlfc2l6
ZV9hbGlnbmVkOw0KIAkvKiBvbi1kaXNrIHBvc2l0aW9uIG9mIGRpcmVjdG9yeSBlbnRyeSBvciAw
ICovDQogCWxvZmZfdCBpX3BvczsNCisJbG9mZl90IHZhbGlkX3NpemU7DQogCS8qIGhhc2ggYnkg
aV9sb2NhdGlvbiAqLw0KIAlzdHJ1Y3QgaGxpc3Rfbm9kZSBpX2hhc2hfZmF0Ow0KIAkvKiBwcm90
ZWN0IGJtYXAgYWdhaW5zdCB0cnVuY2F0ZSAqLw0KZGlmZiAtLWdpdCBhL2ZzL2V4ZmF0L2ZpbGUu
YyBiL2ZzL2V4ZmF0L2ZpbGUuYw0KaW5kZXggYmZkZmFmZTAwOTkzLi4yNzBlMmY5MzQxMjQgMTAw
NjQ0DQotLS0gYS9mcy9leGZhdC9maWxlLmMNCisrKyBiL2ZzL2V4ZmF0L2ZpbGUuYw0KQEAgLTEx
LDYgKzExLDcgQEANCiAjaW5jbHVkZSA8bGludXgvZnNub3RpZnkuaD4NCiAjaW5jbHVkZSA8bGlu
dXgvc2VjdXJpdHkuaD4NCiAjaW5jbHVkZSA8bGludXgvbXNkb3NfZnMuaD4NCisjaW5jbHVkZSA8
bGludXgvd3JpdGViYWNrLmg+DQogDQogI2luY2x1ZGUgImV4ZmF0X3Jhdy5oIg0KICNpbmNsdWRl
ICJleGZhdF9mcy5oIg0KQEAgLTI2LDYgKzI3LDcgQEAgc3RhdGljIGludCBleGZhdF9jb250X2V4
cGFuZChzdHJ1Y3QgaW5vZGUgKmlub2RlLCBsb2ZmX3Qgc2l6ZSkNCiAJCXJldHVybiBlcnI7DQog
DQogCWlub2RlX3NldF9tdGltZV90b190cyhpbm9kZSwgaW5vZGVfc2V0X2N0aW1lX2N1cnJlbnQo
aW5vZGUpKTsNCisJRVhGQVRfSShpbm9kZSktPnZhbGlkX3NpemUgPSBzaXplOw0KIAltYXJrX2lu
b2RlX2RpcnR5KGlub2RlKTsNCiANCiAJaWYgKCFJU19TWU5DKGlub2RlKSkNCkBAIC0xNDYsNiAr
MTQ4LDkgQEAgaW50IF9fZXhmYXRfdHJ1bmNhdGUoc3RydWN0IGlub2RlICppbm9kZSkNCiAJCWVp
LT5zdGFydF9jbHUgPSBFWEZBVF9FT0ZfQ0xVU1RFUjsNCiAJfQ0KIA0KKwlpZiAoaV9zaXplX3Jl
YWQoaW5vZGUpIDwgZWktPnZhbGlkX3NpemUpDQorCQllaS0+dmFsaWRfc2l6ZSA9IGlfc2l6ZV9y
ZWFkKGlub2RlKTsNCisNCiAJaWYgKGVpLT50eXBlID09IFRZUEVfRklMRSkNCiAJCWVpLT5hdHRy
IHw9IEVYRkFUX0FUVFJfQVJDSElWRTsNCiANCkBAIC00NzQsMTUgKzQ3OSwxMjQgQEAgaW50IGV4
ZmF0X2ZpbGVfZnN5bmMoc3RydWN0IGZpbGUgKmZpbHAsIGxvZmZfdCBzdGFydCwgbG9mZl90IGVu
ZCwgaW50IGRhdGFzeW5jKQ0KIAlyZXR1cm4gYmxrZGV2X2lzc3VlX2ZsdXNoKGlub2RlLT5pX3Ni
LT5zX2JkZXYpOw0KIH0NCiANCitzdGF0aWMgaW50IGV4ZmF0X2ZpbGVfemVyb2VkX3JhbmdlKHN0
cnVjdCBmaWxlICpmaWxlLCBsb2ZmX3Qgc3RhcnQsIGxvZmZfdCBlbmQpDQorew0KKwlpbnQgZXJy
Ow0KKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gZmlsZV9pbm9kZShmaWxlKTsNCisJc3RydWN0IGFk
ZHJlc3Nfc3BhY2UgKm1hcHBpbmcgPSBpbm9kZS0+aV9tYXBwaW5nOw0KKwljb25zdCBzdHJ1Y3Qg
YWRkcmVzc19zcGFjZV9vcGVyYXRpb25zICpvcHMgPSBtYXBwaW5nLT5hX29wczsNCisNCisJd2hp
bGUgKHN0YXJ0IDwgZW5kKSB7DQorCQl1MzIgemVyb2Zyb20sIGxlbjsNCisJCXN0cnVjdCBwYWdl
ICpwYWdlID0gTlVMTDsNCisNCisJCXplcm9mcm9tID0gc3RhcnQgJiAoUEFHRV9TSVpFIC0gMSk7
DQorCQlsZW4gPSBQQUdFX1NJWkUgLSB6ZXJvZnJvbTsNCisJCWlmIChzdGFydCArIGxlbiA+IGVu
ZCkNCisJCQlsZW4gPSBlbmQgLSBzdGFydDsNCisNCisJCWVyciA9IG9wcy0+d3JpdGVfYmVnaW4o
ZmlsZSwgbWFwcGluZywgc3RhcnQsIGxlbiwgJnBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVycikNCisJ
CQlnb3RvIG91dDsNCisNCisJCXplcm9fdXNlcl9zZWdtZW50KHBhZ2UsIHplcm9mcm9tLCB6ZXJv
ZnJvbSArIGxlbik7DQorDQorCQllcnIgPSBvcHMtPndyaXRlX2VuZChmaWxlLCBtYXBwaW5nLCBz
dGFydCwgbGVuLCBsZW4sIHBhZ2UsIE5VTEwpOw0KKwkJaWYgKGVyciA8IDApDQorCQkJZ290byBv
dXQ7DQorCQlzdGFydCArPSBsZW47DQorDQorCQliYWxhbmNlX2RpcnR5X3BhZ2VzX3JhdGVsaW1p
dGVkKG1hcHBpbmcpOw0KKwkJY29uZF9yZXNjaGVkKCk7DQorCX0NCisNCitvdXQ6DQorCXJldHVy
biBlcnI7DQorfQ0KKw0KK3N0YXRpYyBzc2l6ZV90IGV4ZmF0X2ZpbGVfd3JpdGVfaXRlcihzdHJ1
Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCit7DQorCXNzaXplX3QgcmV0
Ow0KKwlzdHJ1Y3QgZmlsZSAqZmlsZSA9IGlvY2ItPmtpX2ZpbHA7DQorCXN0cnVjdCBpbm9kZSAq
aW5vZGUgPSBmaWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyAqZWkg
PSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBvcyA9IGlvY2ItPmtpX3BvczsNCisJbG9mZl90
IHZhbGlkX3NpemU7DQorDQorCWlub2RlX2xvY2soaW5vZGUpOw0KKw0KKwl2YWxpZF9zaXplID0g
ZWktPnZhbGlkX3NpemU7DQorDQorCXJldCA9IGdlbmVyaWNfd3JpdGVfY2hlY2tzKGlvY2IsIGl0
ZXIpOw0KKwlpZiAocmV0IDwgMCkNCisJCWdvdG8gdW5sb2NrOw0KKw0KKwlpZiAocG9zID4gdmFs
aWRfc2l6ZSkgew0KKwkJcmV0ID0gZXhmYXRfZmlsZV96ZXJvZWRfcmFuZ2UoZmlsZSwgdmFsaWRf
c2l6ZSwgcG9zKTsNCisJCWlmIChyZXQgPCAwICYmIHJldCAhPSAtRU5PU1BDKSB7DQorCQkJZXhm
YXRfZXJyKGlub2RlLT5pX3NiLA0KKwkJCQkid3JpdGU6IGZhaWwgdG8gemVybyBmcm9tICVsbHUg
dG8gJWxsdSglemQpIiwNCisJCQkJdmFsaWRfc2l6ZSwgcG9zLCByZXQpOw0KKwkJfQ0KKwkJaWYg
KHJldCA8IDApDQorCQkJZ290byB1bmxvY2s7DQorCX0NCisNCisJcmV0ID0gX19nZW5lcmljX2Zp
bGVfd3JpdGVfaXRlcihpb2NiLCBpdGVyKTsNCisJaWYgKHJldCA8IDApDQorCQlnb3RvIHVubG9j
azsNCisNCisJaW5vZGVfdW5sb2NrKGlub2RlKTsNCisNCisJaWYgKHBvcyA+IHZhbGlkX3NpemUp
DQorCQlwb3MgPSB2YWxpZF9zaXplOw0KKw0KKwlpZiAoaW9jYl9pc19kc3luYyhpb2NiKSAmJiBp
b2NiLT5raV9wb3MgPiBwb3MpIHsNCisJCXNzaXplX3QgZXJyID0gdmZzX2ZzeW5jX3JhbmdlKGZp
bGUsIHBvcywgaW9jYi0+a2lfcG9zIC0gMSwNCisJCQkJaW9jYi0+a2lfZmxhZ3MgJiBJT0NCX1NZ
TkMpOw0KKwkJaWYgKGVyciA8IDApDQorCQkJcmV0dXJuIGVycjsNCisJfQ0KKw0KKwlyZXR1cm4g
cmV0Ow0KKw0KK3VubG9jazoNCisJaW5vZGVfdW5sb2NrKGlub2RlKTsNCisNCisJcmV0dXJuIHJl
dDsNCit9DQorDQorc3RhdGljIGludCBleGZhdF9maWxlX21tYXAoc3RydWN0IGZpbGUgKmZpbGUs
IHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQ0KK3sNCisJaW50IHJldDsNCisJc3RydWN0IGlu
b2RlICppbm9kZSA9IGZpbGVfaW5vZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZv
ICplaSA9IEVYRkFUX0koaW5vZGUpOw0KKwlsb2ZmX3Qgc3RhcnQgPSAoKGxvZmZfdCl2bWEtPnZt
X3Bnb2ZmIDw8IFBBR0VfU0hJRlQpOw0KKwlsb2ZmX3QgZW5kID0gbWluX3QobG9mZl90LCBpX3Np
emVfcmVhZChpbm9kZSksDQorCQkJc3RhcnQgKyB2bWEtPnZtX2VuZCAtIHZtYS0+dm1fc3RhcnQp
Ow0KKw0KKwlpZiAoKHZtYS0+dm1fZmxhZ3MgJiBWTV9XUklURSkgJiYgZWktPnZhbGlkX3NpemUg
PCBlbmQpIHsNCisJCXJldCA9IGV4ZmF0X2ZpbGVfemVyb2VkX3JhbmdlKGZpbGUsIGVpLT52YWxp
ZF9zaXplLCBlbmQpOw0KKwkJaWYgKHJldCA8IDApIHsNCisJCQlleGZhdF9lcnIoaW5vZGUtPmlf
c2IsDQorCQkJCSAgIm1tYXA6IGZhaWwgdG8gemVybyBmcm9tICVsbHUgdG8gJWxsdSglZCkiLA0K
KwkJCQkgIHN0YXJ0LCBlbmQsIHJldCk7DQorCQkJcmV0dXJuIHJldDsNCisJCX0NCisJfQ0KKw0K
KwlyZXR1cm4gZ2VuZXJpY19maWxlX21tYXAoZmlsZSwgdm1hKTsNCit9DQorDQogY29uc3Qgc3Ry
dWN0IGZpbGVfb3BlcmF0aW9ucyBleGZhdF9maWxlX29wZXJhdGlvbnMgPSB7DQogCS5sbHNlZWsJ
CT0gZ2VuZXJpY19maWxlX2xsc2VlaywNCiAJLnJlYWRfaXRlcgk9IGdlbmVyaWNfZmlsZV9yZWFk
X2l0ZXIsDQotCS53cml0ZV9pdGVyCT0gZ2VuZXJpY19maWxlX3dyaXRlX2l0ZXIsDQorCS53cml0
ZV9pdGVyCT0gZXhmYXRfZmlsZV93cml0ZV9pdGVyLA0KIAkudW5sb2NrZWRfaW9jdGwgPSBleGZh
dF9pb2N0bCwNCiAjaWZkZWYgQ09ORklHX0NPTVBBVA0KIAkuY29tcGF0X2lvY3RsID0gZXhmYXRf
Y29tcGF0X2lvY3RsLA0KICNlbmRpZg0KLQkubW1hcAkJPSBnZW5lcmljX2ZpbGVfbW1hcCwNCisJ
Lm1tYXAJCT0gZXhmYXRfZmlsZV9tbWFwLA0KIAkuZnN5bmMJCT0gZXhmYXRfZmlsZV9mc3luYywN
CiAJLnNwbGljZV9yZWFkCT0gZmlsZW1hcF9zcGxpY2VfcmVhZCwNCiAJLnNwbGljZV93cml0ZQk9
IGl0ZXJfZmlsZV9zcGxpY2Vfd3JpdGUsDQpkaWZmIC0tZ2l0IGEvZnMvZXhmYXQvaW5vZGUuYyBi
L2ZzL2V4ZmF0L2lub2RlLmMNCmluZGV4IGU3ZmY1OGI4ZTY4Yy4uYjAyNjc3YzlmZDQ1IDEwMDY0
NA0KLS0tIGEvZnMvZXhmYXQvaW5vZGUuYw0KKysrIGIvZnMvZXhmYXQvaW5vZGUuYw0KQEAgLTc1
LDggKzc1LDggQEAgaW50IF9fZXhmYXRfd3JpdGVfaW5vZGUoc3RydWN0IGlub2RlICppbm9kZSwg
aW50IHN5bmMpDQogCWlmIChlaS0+c3RhcnRfY2x1ID09IEVYRkFUX0VPRl9DTFVTVEVSKQ0KIAkJ
b25fZGlza19zaXplID0gMDsNCiANCi0JZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3NpemUgPSBj
cHVfdG9fbGU2NChvbl9kaXNrX3NpemUpOw0KLQllcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSA9IGVw
Mi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplOw0KKwllcDItPmRlbnRyeS5zdHJlYW0udmFsaWRf
c2l6ZSA9IGNwdV90b19sZTY0KGVpLT52YWxpZF9zaXplKTsNCisJZXAyLT5kZW50cnkuc3RyZWFt
LnNpemUgPSBjcHVfdG9fbGU2NChvbl9kaXNrX3NpemUpOw0KIAlpZiAob25fZGlza19zaXplKSB7
DQogCQllcDItPmRlbnRyeS5zdHJlYW0uZmxhZ3MgPSBlaS0+ZmxhZ3M7DQogCQllcDItPmRlbnRy
eS5zdHJlYW0uc3RhcnRfY2x1ID0gY3B1X3RvX2xlMzIoZWktPnN0YXJ0X2NsdSk7DQpAQCAtMjc4
LDYgKzI3OCw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZ2V0X2Jsb2NrKHN0cnVjdCBpbm9kZSAqaW5v
ZGUsIHNlY3Rvcl90IGlibG9jaywNCiAJdW5zaWduZWQgaW50IGNsdXN0ZXIsIHNlY19vZmZzZXQ7
DQogCXNlY3Rvcl90IGxhc3RfYmxvY2s7DQogCXNlY3Rvcl90IHBoeXMgPSAwOw0KKwlzZWN0b3Jf
dCB2YWxpZF9ibGtzOw0KIAlsb2ZmX3QgcG9zOw0KIA0KIAltdXRleF9sb2NrKCZzYmktPnNfbG9j
ayk7DQpAQCAtMzA2LDE3ICszMDcsMzIgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3Ry
dWN0IGlub2RlICppbm9kZSwgc2VjdG9yX3QgaWJsb2NrLA0KIAltYXBwZWRfYmxvY2tzID0gc2Jp
LT5zZWN0X3Blcl9jbHVzIC0gc2VjX29mZnNldDsNCiAJbWF4X2Jsb2NrcyA9IG1pbihtYXBwZWRf
YmxvY2tzLCBtYXhfYmxvY2tzKTsNCiANCi0JLyogVHJlYXQgbmV3bHkgYWRkZWQgYmxvY2sgLyBj
bHVzdGVyICovDQotCWlmIChpYmxvY2sgPCBsYXN0X2Jsb2NrKQ0KLQkJY3JlYXRlID0gMDsNCi0N
Ci0JaWYgKGNyZWF0ZSB8fCBidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkgew0KLQkJcG9zID0gRVhG
QVRfQkxLX1RPX0IoKGlibG9jayArIDEpLCBzYik7DQorCXBvcyA9IEVYRkFUX0JMS19UT19CKChp
YmxvY2sgKyAxKSwgc2IpOw0KKwlpZiAoKGNyZWF0ZSAmJiBpYmxvY2sgPj0gbGFzdF9ibG9jaykg
fHwgYnVmZmVyX2RlbGF5KGJoX3Jlc3VsdCkpIHsNCiAJCWlmIChlaS0+aV9zaXplX29uZGlzayA8
IHBvcykNCiAJCQllaS0+aV9zaXplX29uZGlzayA9IHBvczsNCiAJfQ0KIA0KKwltYXBfYmgoYmhf
cmVzdWx0LCBzYiwgcGh5cyk7DQorCWlmIChidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkNCisJCWNs
ZWFyX2J1ZmZlcl9kZWxheShiaF9yZXN1bHQpOw0KKw0KIAlpZiAoY3JlYXRlKSB7DQorCQl2YWxp
ZF9ibGtzID0gRVhGQVRfQl9UT19CTEtfUk9VTkRfVVAoZWktPnZhbGlkX3NpemUsIHNiKTsNCisN
CisJCWlmIChpYmxvY2sgKyBtYXhfYmxvY2tzIDwgdmFsaWRfYmxrcykgew0KKwkJCS8qIFRoZSBy
YW5nZSBoYXMgYmVlbiB3cml0dGVuLCBtYXAgaXQgKi8NCisJCQlnb3RvIGRvbmU7DQorCQl9IGVs
c2UgaWYgKGlibG9jayA8IHZhbGlkX2Jsa3MpIHsNCisJCQkvKg0KKwkJCSAqIFRoZSByYW5nZSBo
YXMgYmVlbiBwYXJ0aWFsbHkgd3JpdHRlbiwNCisJCQkgKiBtYXAgdGhlIHdyaXR0ZW4gcGFydC4N
CisJCQkgKi8NCisJCQltYXhfYmxvY2tzID0gdmFsaWRfYmxrcyAtIGlibG9jazsNCisJCQlnb3Rv
IGRvbmU7DQorCQl9DQorDQorCQkvKiBUaGUgYXJlYSBoYXMgbm90IGJlZW4gd3JpdHRlbiwgbWFw
IGFuZCBtYXJrIGFzIG5ldy4gKi8NCiAJCWVyciA9IGV4ZmF0X21hcF9uZXdfYnVmZmVyKGVpLCBi
aF9yZXN1bHQsIHBvcyk7DQogCQlpZiAoZXJyKSB7DQogCQkJZXhmYXRfZnNfZXJyb3Ioc2IsDQpA
QCAtMzI0LDExICszNDAsNTUgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlu
b2RlICppbm9kZSwgc2VjdG9yX3QgaWJsb2NrLA0KIAkJCQkJcG9zLCBlaS0+aV9zaXplX2FsaWdu
ZWQpOw0KIAkJCWdvdG8gdW5sb2NrX3JldDsNCiAJCX0NCisJfSBlbHNlIHsNCisJCXZhbGlkX2Js
a3MgPSBFWEZBVF9CX1RPX0JMSyhlaS0+dmFsaWRfc2l6ZSwgc2IpOw0KKw0KKwkJaWYgKGlibG9j
ayArIG1heF9ibG9ja3MgPCB2YWxpZF9ibGtzKSB7DQorCQkJLyogVGhlIHJhbmdlIGhhcyBiZWVu
IHdyaXR0ZW4sIG1hcCBpdCAqLw0KKwkJCWdvdG8gZG9uZTsNCisJCX0gZWxzZSBpZiAoaWJsb2Nr
IDwgdmFsaWRfYmxrcykgew0KKwkJCS8qDQorCQkJICogVGhlIGFyZWEgaGFzIGJlZW4gcGFydGlh
bGx5IHdyaXR0ZW4sDQorCQkJICogbWFwIHRoZSB3cml0dGVuIHBhcnQuDQorCQkJICovDQorCQkJ
bWF4X2Jsb2NrcyA9IHZhbGlkX2Jsa3MgLSBpYmxvY2s7DQorCQkJZ290byBkb25lOw0KKwkJfSBl
bHNlIGlmIChpYmxvY2sgPT0gdmFsaWRfYmxrcyAmJg0KKwkJCSAgIChlaS0+dmFsaWRfc2l6ZSAm
IChzYi0+c19ibG9ja3NpemUgLSAxKSkpIHsNCisJCQkvKg0KKwkJCSAqIFRoZSBibG9jayBoYXMg
YmVlbiBwYXJ0aWFsbHkgd3JpdHRlbiwNCisJCQkgKiB6ZXJvIHRoZSB1bndyaXR0ZW4gcGFydCBh
bmQgbWFwIHRoZSBibG9jay4NCisJCQkgKi8NCisJCQlsb2ZmX3Qgc2l6ZSwgb2ZmOw0KKw0KKwkJ
CW1heF9ibG9ja3MgPSAxOw0KKw0KKwkJCS8qDQorCQkJICogRm9yIGRpcmVjdCByZWFkLCB0aGUg
dW53cml0dGVuIHBhcnQgd2lsbCBiZSB6ZXJvZWQgaW4NCisJCQkgKiBleGZhdF9kaXJlY3RfSU8o
KQ0KKwkJCSAqLw0KKwkJCWlmICghYmhfcmVzdWx0LT5iX2ZvbGlvKQ0KKwkJCQlnb3RvIGRvbmU7
DQorDQorCQkJcG9zIC09IHNiLT5zX2Jsb2Nrc2l6ZTsNCisJCQlzaXplID0gZWktPnZhbGlkX3Np
emUgLSBwb3M7DQorCQkJb2ZmID0gcG9zICYgKFBBR0VfU0laRSAtIDEpOw0KKw0KKwkJCWZvbGlv
X3NldF9iaChiaF9yZXN1bHQsIGJoX3Jlc3VsdC0+Yl9mb2xpbywgb2ZmKTsNCisJCQllcnIgPSBi
aF9yZWFkKGJoX3Jlc3VsdCwgMCk7DQorCQkJaWYgKGVyciA8IDApDQorCQkJCWdvdG8gdW5sb2Nr
X3JldDsNCisNCisJCQlmb2xpb196ZXJvX3NlZ21lbnQoYmhfcmVzdWx0LT5iX2ZvbGlvLCBvZmYg
KyBzaXplLA0KKwkJCQkJb2ZmICsgc2ItPnNfYmxvY2tzaXplKTsNCisJCX0gZWxzZSB7DQorCQkJ
LyoNCisJCQkgKiBUaGUgcmFuZ2UgaGFzIG5vdCBiZWVuIHdyaXR0ZW4sIGNsZWFyIHRoZSBtYXBw
ZWQgZmxhZw0KKwkJCSAqIHRvIG9ubHkgemVybyB0aGUgY2FjaGUgYW5kIGRvIG5vdCByZWFkIGZy
b20gZGlzay4NCisJCQkgKi8NCisJCQljbGVhcl9idWZmZXJfbWFwcGVkKGJoX3Jlc3VsdCk7DQor
CQl9DQogCX0NCi0NCi0JaWYgKGJ1ZmZlcl9kZWxheShiaF9yZXN1bHQpKQ0KLQkJY2xlYXJfYnVm
ZmVyX2RlbGF5KGJoX3Jlc3VsdCk7DQotCW1hcF9iaChiaF9yZXN1bHQsIHNiLCBwaHlzKTsNCiBk
b25lOg0KIAliaF9yZXN1bHQtPmJfc2l6ZSA9IEVYRkFUX0JMS19UT19CKG1heF9ibG9ja3MsIHNi
KTsNCiB1bmxvY2tfcmV0Og0KQEAgLTM0Myw2ICs0MDMsMTcgQEAgc3RhdGljIGludCBleGZhdF9y
ZWFkX2ZvbGlvKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3QgZm9saW8gKmZvbGlvKQ0KIA0KIHN0
YXRpYyB2b2lkIGV4ZmF0X3JlYWRhaGVhZChzdHJ1Y3QgcmVhZGFoZWFkX2NvbnRyb2wgKnJhYykN
CiB7DQorCXN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nID0gcmFjLT5tYXBwaW5nOw0KKwlz
dHJ1Y3QgaW5vZGUgKmlub2RlID0gbWFwcGluZy0+aG9zdDsNCisJc3RydWN0IGV4ZmF0X2lub2Rl
X2luZm8gKmVpID0gRVhGQVRfSShpbm9kZSk7DQorCWxvZmZfdCBwb3MgPSByZWFkYWhlYWRfcG9z
KHJhYyk7DQorDQorCS8qIFJhbmdlIGNyb3NzIHZhbGlkX3NpemUsIHJlYWQgaXQgcGFnZSBieSBw
YWdlLiAqLw0KKwlpZiAoZWktPnZhbGlkX3NpemUgPCBpX3NpemVfcmVhZChpbm9kZSkgJiYNCisJ
ICAgIHBvcyA8PSBlaS0+dmFsaWRfc2l6ZSAmJg0KKwkgICAgZWktPnZhbGlkX3NpemUgPCBwb3Mg
KyByZWFkYWhlYWRfbGVuZ3RoKHJhYykpDQorCQlyZXR1cm47DQorDQogCW1wYWdlX3JlYWRhaGVh
ZChyYWMsIGV4ZmF0X2dldF9ibG9jayk7DQogfQ0KIA0KQEAgLTM3MCw5ICs0NDEsNyBAQCBzdGF0
aWMgaW50IGV4ZmF0X3dyaXRlX2JlZ2luKHN0cnVjdCBmaWxlICpmaWxlLCBzdHJ1Y3QgYWRkcmVz
c19zcGFjZSAqbWFwcGluZywNCiAJaW50IHJldDsNCiANCiAJKnBhZ2VwID0gTlVMTDsNCi0JcmV0
ID0gY29udF93cml0ZV9iZWdpbihmaWxlLCBtYXBwaW5nLCBwb3MsIGxlbiwgcGFnZXAsIGZzZGF0
YSwNCi0JCQkgICAgICAgZXhmYXRfZ2V0X2Jsb2NrLA0KLQkJCSAgICAgICAmRVhGQVRfSShtYXBw
aW5nLT5ob3N0KS0+aV9zaXplX29uZGlzayk7DQorCXJldCA9IGJsb2NrX3dyaXRlX2JlZ2luKG1h
cHBpbmcsIHBvcywgbGVuLCBwYWdlcCwgZXhmYXRfZ2V0X2Jsb2NrKTsNCiANCiAJaWYgKHJldCA8
IDApDQogCQlleGZhdF93cml0ZV9mYWlsZWQobWFwcGluZywgcG9zK2xlbik7DQpAQCAtNDAwLDYg
KzQ2OSwxMSBAQCBzdGF0aWMgaW50IGV4ZmF0X3dyaXRlX2VuZChzdHJ1Y3QgZmlsZSAqZmlsZSwg
c3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcsDQogCWlmIChlcnIgPCBsZW4pDQogCQlleGZh
dF93cml0ZV9mYWlsZWQobWFwcGluZywgcG9zK2xlbik7DQogDQorCWlmICghKGVyciA8IDApICYm
IHBvcyArIGVyciA+IGVpLT52YWxpZF9zaXplKSB7DQorCQllaS0+dmFsaWRfc2l6ZSA9IHBvcyAr
IGVycjsNCisJCW1hcmtfaW5vZGVfZGlydHkoaW5vZGUpOw0KKwl9DQorDQogCWlmICghKGVyciA8
IDApICYmICEoZWktPmF0dHIgJiBFWEZBVF9BVFRSX0FSQ0hJVkUpKSB7DQogCQlpbm9kZV9zZXRf
bXRpbWVfdG9fdHMoaW5vZGUsIGlub2RlX3NldF9jdGltZV9jdXJyZW50KGlub2RlKSk7DQogCQll
aS0+YXR0ciB8PSBFWEZBVF9BVFRSX0FSQ0hJVkU7DQpAQCAtNDEzLDYgKzQ4Nyw4IEBAIHN0YXRp
YyBzc2l6ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3Zf
aXRlciAqaXRlcikNCiB7DQogCXN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBwaW5nID0gaW9jYi0+
a2lfZmlscC0+Zl9tYXBwaW5nOw0KIAlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gbWFwcGluZy0+aG9z
dDsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShpbm9kZSk7DQorCWxv
ZmZfdCBwb3MgPSBpb2NiLT5raV9wb3M7DQogCWxvZmZfdCBzaXplID0gaW9jYi0+a2lfcG9zICsg
aW92X2l0ZXJfY291bnQoaXRlcik7DQogCWludCBydyA9IGlvdl9pdGVyX3J3KGl0ZXIpOw0KIAlz
c2l6ZV90IHJldDsNCkBAIC00MzYsOCArNTEyLDIxIEBAIHN0YXRpYyBzc2l6ZV90IGV4ZmF0X2Rp
cmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCiAJICog
Y29uZGl0aW9uIG9mIGV4ZmF0X2dldF9ibG9jaygpIGFuZCAtPnRydW5jYXRlKCkuDQogCSAqLw0K
IAlyZXQgPSBibG9ja2Rldl9kaXJlY3RfSU8oaW9jYiwgaW5vZGUsIGl0ZXIsIGV4ZmF0X2dldF9i
bG9jayk7DQotCWlmIChyZXQgPCAwICYmIChydyAmIFdSSVRFKSkNCi0JCWV4ZmF0X3dyaXRlX2Zh
aWxlZChtYXBwaW5nLCBzaXplKTsNCisJaWYgKHJldCA8IDApIHsNCisJCWlmIChydyA9PSBXUklU
RSkNCisJCQlleGZhdF93cml0ZV9mYWlsZWQobWFwcGluZywgc2l6ZSk7DQorDQorCQlpZiAocmV0
ICE9IC1FSU9DQlFVRVVFRCkNCisJCQlyZXR1cm4gcmV0Ow0KKwl9IGVsc2UNCisJCXNpemUgPSBw
b3MgKyByZXQ7DQorDQorCS8qIHplcm8gdGhlIHVud3JpdHRlbiBwYXJ0IGluIHRoZSBwYXJ0aWFs
bHkgd3JpdHRlbiBibG9jayAqLw0KKwlpZiAocncgPT0gUkVBRCAmJiBwb3MgPCBlaS0+dmFsaWRf
c2l6ZSAmJiBlaS0+dmFsaWRfc2l6ZSA8IHNpemUpIHsNCisJCWlvdl9pdGVyX3JldmVydChpdGVy
LCBzaXplIC0gZWktPnZhbGlkX3NpemUpOw0KKwkJaW92X2l0ZXJfemVybyhzaXplIC0gZWktPnZh
bGlkX3NpemUsIGl0ZXIpOw0KKwl9DQorDQogCXJldHVybiByZXQ7DQogfQ0KIA0KQEAgLTUzNyw2
ICs2MjYsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X2ZpbGxfaW5vZGUoc3RydWN0IGlub2RlICppbm9k
ZSwgc3RydWN0IGV4ZmF0X2Rpcl9lbnRyeSAqaW5mbykNCiAJZWktPnN0YXJ0X2NsdSA9IGluZm8t
PnN0YXJ0X2NsdTsNCiAJZWktPmZsYWdzID0gaW5mby0+ZmxhZ3M7DQogCWVpLT50eXBlID0gaW5m
by0+dHlwZTsNCisJZWktPnZhbGlkX3NpemUgPSBpbmZvLT52YWxpZF9zaXplOw0KIA0KIAllaS0+
dmVyc2lvbiA9IDA7DQogCWVpLT5oaW50X3N0YXQuZWlkeCA9IDA7DQpkaWZmIC0tZ2l0IGEvZnMv
ZXhmYXQvbmFtZWkuYyBiL2ZzL2V4ZmF0L25hbWVpLmMNCmluZGV4IDVkNzM3ZTBiNjM5YS4uOWM1
NDlmZDExZmM4IDEwMDY0NA0KLS0tIGEvZnMvZXhmYXQvbmFtZWkuYw0KKysrIGIvZnMvZXhmYXQv
bmFtZWkuYw0KQEAgLTQwNiw2ICs0MDYsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X2ZpbmRfZW1wdHlf
ZW50cnkoc3RydWN0IGlub2RlICppbm9kZSwNCiAJCWlfc2l6ZV93cml0ZShpbm9kZSwgc2l6ZSk7
DQogCQllaS0+aV9zaXplX29uZGlzayArPSBzYmktPmNsdXN0ZXJfc2l6ZTsNCiAJCWVpLT5pX3Np
emVfYWxpZ25lZCArPSBzYmktPmNsdXN0ZXJfc2l6ZTsNCisJCWVpLT52YWxpZF9zaXplICs9IHNi
aS0+Y2x1c3Rlcl9zaXplOw0KIAkJZWktPmZsYWdzID0gcF9kaXItPmZsYWdzOw0KIAkJaW5vZGUt
PmlfYmxvY2tzICs9IHNiaS0+Y2x1c3Rlcl9zaXplID4+IDk7DQogCX0NCkBAIC01NTgsNiArNTU5
LDggQEAgc3RhdGljIGludCBleGZhdF9hZGRfZW50cnkoc3RydWN0IGlub2RlICppbm9kZSwgY29u
c3QgY2hhciAqcGF0aCwNCiAJCWluZm8tPnNpemUgPSBjbHVfc2l6ZTsNCiAJCWluZm8tPm51bV9z
dWJkaXJzID0gRVhGQVRfTUlOX1NVQkRJUjsNCiAJfQ0KKwlpbmZvLT52YWxpZF9zaXplID0gaW5m
by0+c2l6ZTsNCisNCiAJbWVtc2V0KCZpbmZvLT5jcnRpbWUsIDAsIHNpemVvZihpbmZvLT5jcnRp
bWUpKTsNCiAJbWVtc2V0KCZpbmZvLT5tdGltZSwgMCwgc2l6ZW9mKGluZm8tPm10aW1lKSk7DQog
CW1lbXNldCgmaW5mby0+YXRpbWUsIDAsIHNpemVvZihpbmZvLT5hdGltZSkpOw0KQEAgLTY2MCw2
ICs2NjMsOCBAQCBzdGF0aWMgaW50IGV4ZmF0X2ZpbmQoc3RydWN0IGlub2RlICpkaXIsIHN0cnVj
dCBxc3RyICpxbmFtZSwNCiAJaW5mby0+dHlwZSA9IGV4ZmF0X2dldF9lbnRyeV90eXBlKGVwKTsN
CiAJaW5mby0+YXR0ciA9IGxlMTZfdG9fY3B1KGVwLT5kZW50cnkuZmlsZS5hdHRyKTsNCiAJaW5m
by0+c2l6ZSA9IGxlNjRfdG9fY3B1KGVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplKTsNCisJ
aW5mby0+dmFsaWRfc2l6ZSA9IGxlNjRfdG9fY3B1KGVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9z
aXplKTsNCisJaW5mby0+c2l6ZSA9IGxlNjRfdG9fY3B1KGVwMi0+ZGVudHJ5LnN0cmVhbS5zaXpl
KTsNCiAJaWYgKGluZm8tPnNpemUgPT0gMCkgew0KIAkJaW5mby0+ZmxhZ3MgPSBBTExPQ19OT19G
QVRfQ0hBSU47DQogCQlpbmZvLT5zdGFydF9jbHUgPSBFWEZBVF9FT0ZfQ0xVU1RFUjsNCkBAIC0x
Mjg4LDYgKzEyOTMsNyBAQCBzdGF0aWMgaW50IF9fZXhmYXRfcmVuYW1lKHN0cnVjdCBpbm9kZSAq
b2xkX3BhcmVudF9pbm9kZSwNCiAJCQl9DQogDQogCQkJaV9zaXplX3dyaXRlKG5ld19pbm9kZSwg
MCk7DQorCQkJbmV3X2VpLT52YWxpZF9zaXplID0gMDsNCiAJCQluZXdfZWktPnN0YXJ0X2NsdSA9
IEVYRkFUX0VPRl9DTFVTVEVSOw0KIAkJCW5ld19laS0+ZmxhZ3MgPSBBTExPQ19OT19GQVRfQ0hB
SU47DQogCQl9DQotLSANCjIuMjUuMQ0K

