Return-Path: <linux-fsdevel-owner@vger.kernel.org>
X-Original-To: lists+linux-fsdevel@lfdr.de
Delivered-To: lists+linux-fsdevel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id E91CE7407D0
	for <lists+linux-fsdevel@lfdr.de>; Wed, 28 Jun 2023 03:53:09 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S231167AbjF1BxH (ORCPT <rfc822;lists+linux-fsdevel@lfdr.de>);
        Tue, 27 Jun 2023 21:53:07 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:54134 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S231163AbjF1BxG (ORCPT
        <rfc822;linux-fsdevel@vger.kernel.org>);
        Tue, 27 Jun 2023 21:53:06 -0400
Received: from mx08-001d1705.pphosted.com (mx08-001d1705.pphosted.com [185.183.30.70])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 77FF02111
        for <linux-fsdevel@vger.kernel.org>; Tue, 27 Jun 2023 18:53:04 -0700 (PDT)
Received: from pps.filterd (m0209320.ppops.net [127.0.0.1])
        by mx08-001d1705.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id 35RN1xoZ006382;
        Wed, 28 Jun 2023 01:52:49 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=sony.com; h=from : to : cc :
 subject : date : message-id : mime-version : content-type :
 content-transfer-encoding; s=S1;
 bh=Ni3R7osGpPeMIBApZcw0D3jOBzZVUQ1CIoCb7NuFltI=;
 b=Z07ndWh7+Zdnon4PSuOdCitZC00UYRitbPn7VcZlSYjb3MBTLiE2VfRvF0cnTpbPr0o5
 93pPwO/MY4VTI6JZG+It+cYIYj+6bIFKvnggG2xOHWcEin1TJ5sTHGJo+iMzLy+zRnBm
 EVdU2n6F1FjWjd/vHZXSfqNNrkJPWTxIBbJKD+aOffewopbAVchOLdOoxyLoDhTXCd/p
 F9xrvOqs1R0yHw0RveSNDfXwkQAVTP4BnuplVvhJZt6+XeYlaKi4WQxVJaHXnjYgl4JZ
 iAm3/I99duxzMpxK+CmMz/O/4J2svpWgZyHHmyeIXsV3XBpUoSjbpWGf8UYrLOvynY9v Hg== 
Received: from apc01-psa-obe.outbound.protection.outlook.com (mail-psaapc01lp2040.outbound.protection.outlook.com [104.47.26.40])
        by mx08-001d1705.pphosted.com (PPS) with ESMTPS id 3rdpcm3kb3-2
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
        Wed, 28 Jun 2023 01:52:49 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=YbeVEpoL8AYjbuPfnnF7/YK/3FOEwZCECkj+PlcetNHimHb83VAK1lcKyV7yGbSrOGLFv9h1V5r3wkecgMgIlYnfyxA6pxmOpjmZL94yhxdlZxUtjWCZbc97SsL2FRR6fu2fqZFUUISGkndI8x6DLxnr6LkyYwiZqhKdUI4wtTA5GFbmDgFzqePmEcUaSpRAeLCoP+9FkJFHZBT08Vp15O05vrXymvrS/noSkxXkbFyWG7wXzqAGWqHT2VC+ul3t77YfqUyzt881+TlsMvW7dw3DMYjcjUWThEBxZqIt8SSKhV12QAfc9lF6sijTR9OIjyauMYBKePWzqi1k/xHg9A==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=Ni3R7osGpPeMIBApZcw0D3jOBzZVUQ1CIoCb7NuFltI=;
 b=lzvGZ8Nu/j1+xWCgQ2F74OzLdDAyR0g4pLpgHd8PnS0D6pu/N2hIiSn371Avgzq0W/tM1yLXlMc6TClKuruXm2kKYNIB2FkzZ+dZJwpCDaZVfeSok6OWeAJNAK+sirXG9e5rTGjPLYH0unv/JkNm6610LCfgLZCl4jCVjMdieYnRsWDwNKT6K/zrgVkWnuMvoQfDztsSolYDfkW11YdKFMj9jDgowhkPbH8jyxOmZXc+U3/fC+M+wTBTyETsHNWHJNF/Qv9dTLn2dVGAgatjMdoEB4ib+7YuIRVy7iZ2+qX3wLF/Bh9lGFRa/4z0YwHsPbotGgqv2L5T74Q3Pq17tA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=sony.com; dmarc=pass action=none header.from=sony.com;
 dkim=pass header.d=sony.com; arc=none
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com (2603:1096:301:fc::7)
 by PSAPR04MB4389.apcprd04.prod.outlook.com (2603:1096:301:3f::14) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6544.15; Wed, 28 Jun
 2023 01:52:45 +0000
Received: from PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::ce2d:a9dc:4955:5275]) by PUZPR04MB6316.apcprd04.prod.outlook.com
 ([fe80::ce2d:a9dc:4955:5275%5]) with mapi id 15.20.6521.026; Wed, 28 Jun 2023
 01:52:45 +0000
From:   "Yuezhang.Mo@sony.com" <Yuezhang.Mo@sony.com>
To:     "linkinjeon@kernel.org" <linkinjeon@kernel.org>,
        "sj1557.seo@samsung.com" <sj1557.seo@samsung.com>
CC:     "linux-fsdevel@vger.kernel.org" <linux-fsdevel@vger.kernel.org>,
        "Andy.Wu@sony.com" <Andy.Wu@sony.com>,
        "Wataru.Aoyama@sony.com" <Wataru.Aoyama@sony.com>
Subject: [PATCH v2 1/2] exfat: change to get file size from DataLength
Thread-Topic: [PATCH v2 1/2] exfat: change to get file size from DataLength
Thread-Index: AdmpYuJ0V9XHhCJETaqF4XX9XJpueg==
Date:   Wed, 28 Jun 2023 01:52:45 +0000
Message-ID: <PUZPR04MB631612A7F55F8B5523E631BA8124A@PUZPR04MB6316.apcprd04.prod.outlook.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: PUZPR04MB6316:EE_|PSAPR04MB4389:EE_
x-ms-office365-filtering-correlation-id: f273b820-30ba-4096-145a-08db777a5e75
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: oIypL9Gf7qLZChNTnDt63SKl5B/Ju9up9yFte+3RQmC9HNi5z2OxKBHyJAQSaSLMSbsp4+uchud1g/otNxcY/UQ8FCcOK2PlfqxBlRVtjwkaQb+ciQafGA6toUdRUQYxc+TdySZUiMcffPImFwb2F1G+UvgO1lp4TXIAoABV1Bubck/DfCRiBM/arquydd/z29hZz3TxLlOIp1FU0sUZOMDmmcE2oQucVI+SFyuHtA7zQ3A2gH9w95K5xL9a5wSIakU7u9jX12A8q7zFrZfGs9C542gZ9P/d+GKs1676/K3utj0L7jQgc5UhPsBCQmAAqbUEV5uNrTDdeRZ+3p1taNlXRK62eipRhKfFHQrG143OK8vKc9GQ4x3wYfKCZ2F2XegXNFd8prumaubj34aRK9CTBssxB+g8wlqy1hLAJmVHB5fUC7beAjf2uPD+5oD1C2fIWR1AUbHP1hY8XqgId25V8QPPgbETSrqTpjiHImNBcfaMrwNBV1Ey7rLEToRQ1tYxF1XCcMavsib29OzPaWcaqcE/g2+ZV+zWXfuz6aOKliRGtkWHEVwnPKGWApNWuO1PGTTgI5qUsjy1fgcoB3xi5db2OEE4myKXFl50ftM+8B+5hqmG8JyEt+VmW/sG
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:PUZPR04MB6316.apcprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230028)(4636009)(396003)(136003)(346002)(366004)(376002)(39860400002)(451199021)(5660300002)(66946007)(41300700001)(52536014)(76116006)(64756008)(66446008)(66476007)(66556008)(8936002)(8676002)(4326008)(316002)(478600001)(83380400001)(38070700005)(55016003)(26005)(6506007)(2906002)(33656002)(30864003)(107886003)(9686003)(186003)(54906003)(110136005)(122000001)(38100700002)(86362001)(82960400001)(71200400001)(7696005);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?V1dHSG9OQ2lDU0NCY1IybzU3ay9TZEdtRThPSE5KL2pVWDBjcU9sZXVBaWlU?=
 =?utf-8?B?Z2JwSFh5Q0NOaTR6YXQ4QllKK2Z4N0FxN1pkUEpTblNPNlJBMmZySzJqdXQ5?=
 =?utf-8?B?cGFtWngrWnpGSE40dkMyOFdwbE1zbWIrRE9ySW5mYzdrTXJJUGZtd2dGNzFI?=
 =?utf-8?B?ZThza1pFS1pUdlh2ZlNIWFM3RmZXNVVFMk5vditHVUFWdy9aZGNZNTNyZGN4?=
 =?utf-8?B?OXU0NzRqZ0h6Uis4a2wzQ3Q0cDJMbmhDb05Mc3Fza09HREpZRFRYVExONmgr?=
 =?utf-8?B?aGF2dW5uQTNRMmluMjE0bXRXRXdmWU90VHp6YzhvRjJFQXB2ZHBEV1o0ZlBY?=
 =?utf-8?B?SGt1UjlDUnZscDcxVmt3ZW1KcU0xeUw1bTFKOW8vM3U1TkxhWEh4NXZwdUJr?=
 =?utf-8?B?VEJ4SXJsbjl2UUlBVTQ2MHNucEUwRnQ4QzlQUm1kRTAzQ3F2b0NjSGJVZ2hG?=
 =?utf-8?B?VkFJN29WV0ZSbG5KMTdXcDIxbUk2MWMrZElLempvVllxSDZYVGFOQjdFSHBv?=
 =?utf-8?B?SG1NMWlRSTFQWUpnQ0pKRUVDWThHd21rbHdwNTJLd3lFK3o5Njl1dTJqR0ly?=
 =?utf-8?B?T2FybVZ4Ymh6SU5ONy9kaHhMcENSWlk1bm42Q1dxc2M5c0cvNjkzczh0cjNn?=
 =?utf-8?B?M2lyaUUranNKcjdqY1dVMG9iVkpCcTYrQ0c0MGcvbkxKRithakl1TjBoNWFx?=
 =?utf-8?B?VVBUd1B2N2VzU0xiQWlQRnNBQ01ocEtBMkJzcFVjN3VhOFhBUnVtcVMxSGZz?=
 =?utf-8?B?N1dIa1JLamlmNU1yMjdycnZkcTBtTHpxUGJvZlF1eVp6SzhYbW5hUlVGK2M0?=
 =?utf-8?B?SVRMdUZPYXFVSXlSZ2k5RVBrYURPSmdSdEpoZUlDdCswZnptQkpXZWROUE9t?=
 =?utf-8?B?WWUwenlZb1R5aFBtZkRmWEdad3kyazhQcUx4dHB0QTNYMXhkcXBmRDVRd2Ey?=
 =?utf-8?B?bjY2ZDFXTGl4UjVrMWlGZFhueTBJaXV5TUtGSGQxd2lhb2IwYURlUmJBcGZW?=
 =?utf-8?B?ZEhwRmxrUFBMN3FUbjQvQ0kveU5UQWl5MlBRMks2cGJ0STZnNEhud3J4dGdX?=
 =?utf-8?B?NGIrOFBnYVlxcFQ3cGN6ZkhtWXpRaVFaZHNxS09XdUdjVTNRTDZub3h2UjI0?=
 =?utf-8?B?Y3ppOC8yZ0NiaXVCOXQ1OGY3YlMxVllBV0xVY0RVQzl4QUpvbzNOdTF5U1Mv?=
 =?utf-8?B?RS8vcmpacXF5bHRXMStiNG16d0xPNG5EZmYwb05VTjJSSklsVkVZTWp2eVA0?=
 =?utf-8?B?bDlEZzNFbGh4bWZXUnh2VjZRYmVWY1Y3elA2RlBOam1DUzZMUzh1c0J5aU1q?=
 =?utf-8?B?Y000QS9IZld2MlJBVFZvbVhXYXBOLzZrV1Y3cSt2Tm9FRVF2TkE1RTlhdlFK?=
 =?utf-8?B?R3ltOS9BdE1tVzc3OHE1UkpwelgwQmtQSlNQc2d2K2ZBcmJXSDllaTI1dTBy?=
 =?utf-8?B?T3RZSU0rWU5UTzJFc2dTbk9Hd251N1lkbk94UlF3eG9jZVk1Wkw2b1pUWG1x?=
 =?utf-8?B?R3RaSVdyY1Z0bkE0aDRSWEF6cW1pd0ZCOWpnTnE1QUtKbVdNbnBpRmVjUEts?=
 =?utf-8?B?NUFFRS8zcy8xLzFRQnYxSmR0cFY0RU1BRERydFlGdjNRa1hkL2paMTRUS0xq?=
 =?utf-8?B?VGJ0NUNEMHk0YjBBYnkyT0x1NVVyd0YyTVMzWUpKdzJkL1dxYy90bklhY2d5?=
 =?utf-8?B?eHJFeFhwdzBEZGFqektMQ2tGZ3kyVElIWk5KQUFqMk1kUTZ0YjRncEZtMTcv?=
 =?utf-8?B?SGtxSDFrM1BCcnJkdU90ajg0WUtOM294RDhHa3pOVlBoL3dGVTFzZXJjV1Bt?=
 =?utf-8?B?azVXdE9McCt0SlhGSjNKMW5kY3U2aTNpVVptOVcycjVNYmVLbGJtL2puN0I4?=
 =?utf-8?B?YjFUYmViMVNKcjRQeEJMWWlSNWc2allOeTNPY1lvWHV4bG12d0lTQUROR0Ix?=
 =?utf-8?B?TUhXYklwOXVVamN5UkdMQWRvUVhWdjFtZXJPY2pHUVVFOUVnVHpDL1E3Sjdh?=
 =?utf-8?B?UDkrM2h3Q2NBUFY0aVdXSXVTanlXRkhnTm9XVlpwNElHbGRYaUZvV0JveFhW?=
 =?utf-8?B?YW0vaGdiMEN6Y0FzLzVzSURXaFkyUXpscThPRm5uWVBvak1acFMvM1BvbnlT?=
 =?utf-8?Q?j+3hPnFGTYb8FvovmRB6S5H/T?=
MIME-Version: 1.0
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-ChunkCount: 1
X-MS-Exchange-AntiSpam-ExternalHop-MessageData-0: B6HZiYUU8L4Eu6rDMFtYiMieWUnpCtu/m7d4ojtY0GKAnX1nMwfPIbj8KMfaTiG78b1oeYCGKk17QPaCgJO3vDsgUITNfhi1EWJe3qVBfnKtT/vv785ZK9ZLKYaxVLXX284SX5h3IRRQiGcvYi5j4QQm/jyPCeMA52LUP1Dt6VO3ONBaRiK7KfwrA3rq1iordJCCZAioV6bzLimjKkiSO/70QOxc2ef+yKcddAj8DN63LEkCNjNj4iWk6zkfubbj38fwiw8IrvwLY447vbb3QPHdF740Y2EP217S6RTGGSVijT9wYo5rz92IsSFZhgAvGeJl5kMOJsrwd7fMj+HWtxVCCwTAQIp26P47idtapjD3IqD0BWisJu0VO8o9nokY4Vqkt//OVQlpWzPh3Eu8FpzajcZbr0L9Hi0RsnqNjVRYj1DGSwktNF/J7VNshLOLdE5WqWjyjH0nd26RuDGHgqy/pjKOEC6uoLH80AI9x25j/mtD40aOzpqfPIQz1WWHYCzl+jnIJDCYi/t16h6IvfAySwLak3oRrFq7JfTGA/ndhwvedh4vHkc3ZJxLdfhlY2HRgv28OZdOxu69R1Z2kXRXUZp3ji6gZHnF6x4hjuCNxysjOyenJgDoNGJqzx25NUMSE0e+ku7Pmy5AApFowOME64IypELuWr9tbn8ki8bpS8kXWxyE7NVpBNDXcP814AKQ9wQ6gXL/3jHthx4dHNQ1Eag7G7T7PK1ngd9AhAQ76+puWQx11BHmJwISoeHlMDXFXGcaKYKHQAzc8wx0UXb5v4AAay5M03kmJcr1p5PJhgOrnqja6omt3lRlVpiyTtxTgLNGQjl9ca3DKhAWZw==
X-OriginatorOrg: sony.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: PUZPR04MB6316.apcprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: f273b820-30ba-4096-145a-08db777a5e75
X-MS-Exchange-CrossTenant-originalarrivaltime: 28 Jun 2023 01:52:45.7042
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 66c65d8a-9158-4521-a2d8-664963db48e4
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: aPu5B+CtZq7opw3Zb4oYsIxr/kghjWgPc2E5VynQLYbJ8ym3g0bO6k0dtWXsspbSVDRWODHQqoc+z3pgmqFMDQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: PSAPR04MB4389
X-Proofpoint-ORIG-GUID: SutzyGj7iNElMhXOU052r1m7T8eU2qzD
X-Proofpoint-GUID: SutzyGj7iNElMhXOU052r1m7T8eU2qzD
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Sony-Outbound-GUID: SutzyGj7iNElMhXOU052r1m7T8eU2qzD
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.254,Aquarius:18.0.957,Hydra:6.0.591,FMLib:17.11.176.26
 definitions=2023-06-27_16,2023-06-27_01,2023-05-22_02
X-Spam-Status: No, score=-2.8 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_LOW,
        RCVD_IN_MSPIKE_H5,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_NONE,
        T_SCC_BODY_TEXT_LINE,URIBL_BLOCKED autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-fsdevel.vger.kernel.org>
X-Mailing-List: linux-fsdevel@vger.kernel.org

SW4gc3RyZWFtIGV4dGVuc2lvbiBkaXJlY3RvcnkgZW50cnksIHRoZSBWYWxpZERhdGFMZW5ndGgN
CmZpZWxkIGRlc2NyaWJlcyBob3cgZmFyIGludG8gdGhlIGRhdGEgc3RyZWFtIHVzZXIgZGF0YSBo
YXMNCmJlZW4gd3JpdHRlbiwgYW5kIHRoZSBEYXRhTGVuZ3RoIGZpZWxkIGRlc2NyaWJlcyB0aGUg
ZmlsZQ0Kc2l6ZS4NCg0KU2lnbmVkLW9mZi1ieTogWXVlemhhbmcgTW8gPFl1ZXpoYW5nLk1vQHNv
bnkuY29tPg0KUmV2aWV3ZWQtYnk6IEFuZHkgV3UgPEFuZHkuV3VAc29ueS5jb20+DQpSZXZpZXdl
ZC1ieTogQW95YW1hIFdhdGFydSA8d2F0YXJ1LmFveWFtYUBzb255LmNvbT4NCi0tLQ0KIGZzL2V4
ZmF0L2V4ZmF0X2ZzLmggfCAgIDIgKw0KIGZzL2V4ZmF0L2ZpbGUuYyAgICAgfCAxMzMgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0NCiBmcy9leGZhdC9pbm9kZS5j
ICAgIHwgIDkyICsrKysrKysrKysrKysrKysrKysrKysrKystLS0tLQ0KIGZzL2V4ZmF0L25hbWVp
LmMgICAgfCAgIDcgKystDQogNCBmaWxlcyBjaGFuZ2VkLCAyMTcgaW5zZXJ0aW9ucygrKSwgMTcg
ZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9mcy9leGZhdC9leGZhdF9mcy5oIGIvZnMvZXhm
YXQvZXhmYXRfZnMuaA0KaW5kZXggNzI5YWRhOWUyNmU4Li44ZDYyNDgzNjc0MzMgMTAwNjQ0DQot
LS0gYS9mcy9leGZhdC9leGZhdF9mcy5oDQorKysgYi9mcy9leGZhdC9leGZhdF9mcy5oDQpAQCAt
MjA4LDYgKzIwOCw3IEBAIHN0cnVjdCBleGZhdF9kaXJfZW50cnkgew0KIAl1bnNpZ25lZCBjaGFy
IGZsYWdzOw0KIAl1bnNpZ25lZCBzaG9ydCBhdHRyOw0KIAlsb2ZmX3Qgc2l6ZTsNCisJbG9mZl90
IHZhbGlkX3NpemU7DQogCXVuc2lnbmVkIGludCBudW1fc3ViZGlyczsNCiAJc3RydWN0IHRpbWVz
cGVjNjQgYXRpbWU7DQogCXN0cnVjdCB0aW1lc3BlYzY0IG10aW1lOw0KQEAgLTMxNyw2ICszMTgs
NyBAQCBzdHJ1Y3QgZXhmYXRfaW5vZGVfaW5mbyB7DQogCWxvZmZfdCBpX3NpemVfYWxpZ25lZDsN
CiAJLyogb24tZGlzayBwb3NpdGlvbiBvZiBkaXJlY3RvcnkgZW50cnkgb3IgMCAqLw0KIAlsb2Zm
X3QgaV9wb3M7DQorCWxvZmZfdCB2YWxpZF9zaXplOw0KIAkvKiBoYXNoIGJ5IGlfbG9jYXRpb24g
Ki8NCiAJc3RydWN0IGhsaXN0X25vZGUgaV9oYXNoX2ZhdDsNCiAJLyogcHJvdGVjdCBibWFwIGFn
YWluc3QgdHJ1bmNhdGUgKi8NCmRpZmYgLS1naXQgYS9mcy9leGZhdC9maWxlLmMgYi9mcy9leGZh
dC9maWxlLmMNCmluZGV4IGU5OTE4M2E3NDYxMS4uOGNkMTRiYzE2ODU3IDEwMDY0NA0KLS0tIGEv
ZnMvZXhmYXQvZmlsZS5jDQorKysgYi9mcy9leGZhdC9maWxlLmMNCkBAIC04LDYgKzgsNyBAQA0K
ICNpbmNsdWRlIDxsaW51eC9jcmVkLmg+DQogI2luY2x1ZGUgPGxpbnV4L2J1ZmZlcl9oZWFkLmg+
DQogI2luY2x1ZGUgPGxpbnV4L2Jsa2Rldi5oPg0KKyNpbmNsdWRlIDxsaW51eC93cml0ZWJhY2su
aD4NCiANCiAjaW5jbHVkZSAiZXhmYXRfcmF3LmgiDQogI2luY2x1ZGUgImV4ZmF0X2ZzLmgiDQpA
QCAtMjMsNiArMjQsNyBAQCBzdGF0aWMgaW50IGV4ZmF0X2NvbnRfZXhwYW5kKHN0cnVjdCBpbm9k
ZSAqaW5vZGUsIGxvZmZfdCBzaXplKQ0KIAkJcmV0dXJuIGVycjsNCiANCiAJaW5vZGUtPmlfY3Rp
bWUgPSBpbm9kZS0+aV9tdGltZSA9IGN1cnJlbnRfdGltZShpbm9kZSk7DQorCUVYRkFUX0koaW5v
ZGUpLT52YWxpZF9zaXplID0gc2l6ZTsNCiAJbWFya19pbm9kZV9kaXJ0eShpbm9kZSk7DQogDQog
CWlmICghSVNfU1lOQyhpbm9kZSkpDQpAQCAtMTQzLDYgKzE0NSw5IEBAIGludCBfX2V4ZmF0X3Ry
dW5jYXRlKHN0cnVjdCBpbm9kZSAqaW5vZGUpDQogCQllaS0+c3RhcnRfY2x1ID0gRVhGQVRfRU9G
X0NMVVNURVI7DQogCX0NCiANCisJaWYgKGlfc2l6ZV9yZWFkKGlub2RlKSA8IGVpLT52YWxpZF9z
aXplKQ0KKwkJZWktPnZhbGlkX3NpemUgPSBpX3NpemVfcmVhZChpbm9kZSk7DQorDQogCWlmIChl
aS0+dHlwZSA9PSBUWVBFX0ZJTEUpDQogCQllaS0+YXR0ciB8PSBBVFRSX0FSQ0hJVkU7DQogDQpA
QCAtMzc5LDE1ICszODQsMTM5IEBAIGludCBleGZhdF9maWxlX2ZzeW5jKHN0cnVjdCBmaWxlICpm
aWxwLCBsb2ZmX3Qgc3RhcnQsIGxvZmZfdCBlbmQsIGludCBkYXRhc3luYykNCiAJcmV0dXJuIGJs
a2Rldl9pc3N1ZV9mbHVzaChpbm9kZS0+aV9zYi0+c19iZGV2KTsNCiB9DQogDQorc3RhdGljIGlu
dCBleGZhdF9maWxlX3plcm9lZF9yYW5nZShzdHJ1Y3QgZmlsZSAqZmlsZSwgbG9mZl90IHN0YXJ0
LCBsb2ZmX3QgZW5kKQ0KK3sNCisJaW50IGVycjsNCisJc3RydWN0IGlub2RlICppbm9kZSA9IGZp
bGVfaW5vZGUoZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9IEVYRkFUX0ko
aW5vZGUpOw0KKwlzdHJ1Y3QgYWRkcmVzc19zcGFjZSAqbWFwcGluZyA9IGlub2RlLT5pX21hcHBp
bmc7DQorCWNvbnN0IHN0cnVjdCBhZGRyZXNzX3NwYWNlX29wZXJhdGlvbnMgKm9wcyA9IG1hcHBp
bmctPmFfb3BzOw0KKw0KKwl3aGlsZSAoc3RhcnQgPCBlbmQpIHsNCisJCXUzMiB6ZXJvZnJvbSwg
bGVuOw0KKwkJc3RydWN0IHBhZ2UgKnBhZ2U7DQorDQorCQl6ZXJvZnJvbSA9IHN0YXJ0ICYgKFBB
R0VfU0laRSAtIDEpOw0KKwkJbGVuID0gUEFHRV9TSVpFIC0gemVyb2Zyb207DQorCQlpZiAoc3Rh
cnQgKyBsZW4gPiBlbmQpDQorCQkJbGVuID0gZW5kIC0gc3RhcnQ7DQorDQorCQllcnIgPSBvcHMt
PndyaXRlX2JlZ2luKGZpbGUsIG1hcHBpbmcsIHN0YXJ0LCBsZW4sICZwYWdlLCBOVUxMKTsNCisJ
CWlmIChlcnIpDQorCQkJZ290byBvdXQ7DQorDQorCQl6ZXJvX3VzZXJfc2VnbWVudChwYWdlLCB6
ZXJvZnJvbSwgemVyb2Zyb20gKyBsZW4pOw0KKw0KKwkJZXJyID0gb3BzLT53cml0ZV9lbmQoZmls
ZSwgbWFwcGluZywgc3RhcnQsIGxlbiwgbGVuLCBwYWdlLCBOVUxMKTsNCisJCWlmIChlcnIgPCAw
KQ0KKwkJCWdvdG8gb3V0Ow0KKwkJc3RhcnQgKz0gbGVuOw0KKw0KKwkJYmFsYW5jZV9kaXJ0eV9w
YWdlc19yYXRlbGltaXRlZChtYXBwaW5nKTsNCisJCWNvbmRfcmVzY2hlZCgpOw0KKwl9DQorDQor
CWVpLT52YWxpZF9zaXplID0gZW5kOw0KKwltYXJrX2lub2RlX2RpcnR5KGlub2RlKTsNCisNCitv
dXQ6DQorCXJldHVybiBlcnI7DQorfQ0KKw0KK3N0YXRpYyBzc2l6ZV90IGV4ZmF0X2ZpbGVfd3Jp
dGVfaXRlcihzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCit7DQor
CXNzaXplX3QgcmV0Ow0KKwlzdHJ1Y3QgZmlsZSAqZmlsZSA9IGlvY2ItPmtpX2ZpbHA7DQorCXN0
cnVjdCBpbm9kZSAqaW5vZGUgPSBmaWxlX2lub2RlKGZpbGUpOw0KKwlzdHJ1Y3QgZXhmYXRfaW5v
ZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBvcyA9IGlvY2ItPmtpX3Bv
czsNCisJbG9mZl90IHZhbGlkX3NpemU7DQorDQorCWlub2RlX2xvY2soaW5vZGUpOw0KKw0KKwl2
YWxpZF9zaXplID0gZWktPnZhbGlkX3NpemU7DQorDQorCXJldCA9IGdlbmVyaWNfd3JpdGVfY2hl
Y2tzKGlvY2IsIGl0ZXIpOw0KKwlpZiAocmV0IDwgMCkNCisJCWdvdG8gdW5sb2NrOw0KKw0KKwlp
ZiAocG9zID4gdmFsaWRfc2l6ZSkgew0KKwkJcmV0ID0gZXhmYXRfZmlsZV96ZXJvZWRfcmFuZ2Uo
ZmlsZSwgdmFsaWRfc2l6ZSwgcG9zKTsNCisJCWlmIChyZXQgPCAwICYmIHJldCAhPSAtRU5PU1BD
KSB7DQorCQkJZXhmYXRfZXJyKGlub2RlLT5pX3NiLA0KKwkJCQkid3JpdGU6IGZhaWwgdG8gemVy
byBmcm9tICVsbHUgdG8gJWxsdSglbGQpIiwNCisJCQkJdmFsaWRfc2l6ZSwgcG9zLCByZXQpOw0K
KwkJfQ0KKwkJaWYgKHJldCA8IDApDQorCQkJZ290byB1bmxvY2s7DQorCX0NCisNCisJcmV0ID0g
X19nZW5lcmljX2ZpbGVfd3JpdGVfaXRlcihpb2NiLCBpdGVyKTsNCisJaWYgKHJldCA8IDApDQor
CQlnb3RvIHVubG9jazsNCisNCisJaWYgKHBvcyArIHJldCA+IGlfc2l6ZV9yZWFkKGlub2RlKSkN
CisJCWlfc2l6ZV93cml0ZShpbm9kZSwgcG9zICsgcmV0KTsNCisNCisJaWYgKHBvcyArIHJldCA+
IGVpLT52YWxpZF9zaXplKQ0KKwkJZWktPnZhbGlkX3NpemUgPSBwb3MgKyByZXQ7DQorDQorCS8q
DQorCSAqIElmIHZhbGlkX3NpemUgaXMgZXh0ZW5kZWQgd2l0aCBzZWN0b3ItYWxpZ25lZCBsZW5n
dGggaW4NCisJICogZXhmYXRfZ2V0X2Jsb2NrKCksIHNldCB0byB0aGUgd3JpdHJlbiBsZW5ndGgu
DQorCSAqLw0KKwlpZiAoaV9zaXplX3JlYWQoaW5vZGUpIDwgZWktPnZhbGlkX3NpemUpDQorCQll
aS0+dmFsaWRfc2l6ZSA9IGlfc2l6ZV9yZWFkKGlub2RlKTsNCisNCisJbWFya19pbm9kZV9kaXJ0
eShpbm9kZSk7DQorCWlub2RlX3VubG9jayhpbm9kZSk7DQorDQorCWlmIChwb3MgPiB2YWxpZF9z
aXplICYmIGlvY2JfaXNfZHN5bmMoaW9jYikpIHsNCisJCXNzaXplX3QgZXJyID0gdmZzX2ZzeW5j
X3JhbmdlKGZpbGUsIHZhbGlkX3NpemUsIHBvcyAtIDEsDQorCQkJCWlvY2ItPmtpX2ZsYWdzICYg
SU9DQl9TWU5DKTsNCisJCWlmIChlcnIgPCAwKQ0KKwkJCXJldHVybiBlcnI7DQorCX0NCisNCisJ
cmV0dXJuIGdlbmVyaWNfd3JpdGVfc3luYyhpb2NiLCByZXQpOw0KKw0KK3VubG9jazoNCisJaW5v
ZGVfdW5sb2NrKGlub2RlKTsNCisNCisJcmV0dXJuIHJldDsNCit9DQorDQorc3RhdGljIGludCBl
eGZhdF9maWxlX21tYXAoc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAq
dm1hKQ0KK3sNCisJaW50IHJldDsNCisJc3RydWN0IGlub2RlICppbm9kZSA9IGZpbGVfaW5vZGUo
ZmlsZSk7DQorCXN0cnVjdCBleGZhdF9pbm9kZV9pbmZvICplaSA9IEVYRkFUX0koaW5vZGUpOw0K
Kwlsb2ZmX3Qgc3RhcnQgPSAoKGxvZmZfdCl2bWEtPnZtX3Bnb2ZmIDw8IFBBR0VfU0hJRlQpOw0K
Kwlsb2ZmX3QgZW5kID0gbWluX3QobG9mZl90LCBpX3NpemVfcmVhZChpbm9kZSksDQorCQkJc3Rh
cnQgKyB2bWEtPnZtX2VuZCAtIHZtYS0+dm1fc3RhcnQpOw0KKw0KKwlpZiAoKHZtYS0+dm1fZmxh
Z3MgJiBWTV9XUklURSkgJiYgZWktPnZhbGlkX3NpemUgPCBlbmQpIHsNCisJCXJldCA9IGV4ZmF0
X2ZpbGVfemVyb2VkX3JhbmdlKGZpbGUsIGVpLT52YWxpZF9zaXplLCBlbmQpOw0KKwkJaWYgKHJl
dCA8IDApIHsNCisJCQlleGZhdF9lcnIoaW5vZGUtPmlfc2IsDQorCQkJCSAgIm1tYXA6IGZhaWwg
dG8gemVybyBmcm9tICVsbHUgdG8gJWxsdSglZCkiLA0KKwkJCQkgIHN0YXJ0LCBlbmQsIHJldCk7
DQorCQkJcmV0dXJuIHJldDsNCisJCX0NCisJfQ0KKw0KKwlyZXR1cm4gZ2VuZXJpY19maWxlX21t
YXAoZmlsZSwgdm1hKTsNCit9DQorDQogY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBleGZh
dF9maWxlX29wZXJhdGlvbnMgPSB7DQogCS5sbHNlZWsJCT0gZ2VuZXJpY19maWxlX2xsc2VlaywN
CiAJLnJlYWRfaXRlcgk9IGdlbmVyaWNfZmlsZV9yZWFkX2l0ZXIsDQotCS53cml0ZV9pdGVyCT0g
Z2VuZXJpY19maWxlX3dyaXRlX2l0ZXIsDQorCS53cml0ZV9pdGVyCT0gZXhmYXRfZmlsZV93cml0
ZV9pdGVyLA0KIAkudW5sb2NrZWRfaW9jdGwgPSBleGZhdF9pb2N0bCwNCiAjaWZkZWYgQ09ORklH
X0NPTVBBVA0KIAkuY29tcGF0X2lvY3RsID0gZXhmYXRfY29tcGF0X2lvY3RsLA0KICNlbmRpZg0K
LQkubW1hcAkJPSBnZW5lcmljX2ZpbGVfbW1hcCwNCisJLm1tYXAJCT0gZXhmYXRfZmlsZV9tbWFw
LA0KIAkuZnN5bmMJCT0gZXhmYXRfZmlsZV9mc3luYywNCiAJLnNwbGljZV9yZWFkCT0gZ2VuZXJp
Y19maWxlX3NwbGljZV9yZWFkLA0KIAkuc3BsaWNlX3dyaXRlCT0gaXRlcl9maWxlX3NwbGljZV93
cml0ZSwNCmRpZmYgLS1naXQgYS9mcy9leGZhdC9pbm9kZS5jIGIvZnMvZXhmYXQvaW5vZGUuYw0K
aW5kZXggNDgxZGQzMzhmMmI4Li4wYzZiNTg5NzUxOGMgMTAwNjQ0DQotLS0gYS9mcy9leGZhdC9p
bm9kZS5jDQorKysgYi9mcy9leGZhdC9pbm9kZS5jDQpAQCAtNzIsOCArNzIsOCBAQCBpbnQgX19l
eGZhdF93cml0ZV9pbm9kZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBpbnQgc3luYykNCiAJaWYgKGVp
LT5zdGFydF9jbHUgPT0gRVhGQVRfRU9GX0NMVVNURVIpDQogCQlvbl9kaXNrX3NpemUgPSAwOw0K
IA0KLQllcDItPmRlbnRyeS5zdHJlYW0udmFsaWRfc2l6ZSA9IGNwdV90b19sZTY0KG9uX2Rpc2tf
c2l6ZSk7DQotCWVwMi0+ZGVudHJ5LnN0cmVhbS5zaXplID0gZXAyLT5kZW50cnkuc3RyZWFtLnZh
bGlkX3NpemU7DQorCWVwMi0+ZGVudHJ5LnN0cmVhbS52YWxpZF9zaXplID0gY3B1X3RvX2xlNjQo
ZWktPnZhbGlkX3NpemUpOw0KKwllcDItPmRlbnRyeS5zdHJlYW0uc2l6ZSA9IGNwdV90b19sZTY0
KG9uX2Rpc2tfc2l6ZSk7DQogCWlmIChvbl9kaXNrX3NpemUpIHsNCiAJCWVwMi0+ZGVudHJ5LnN0
cmVhbS5mbGFncyA9IGVpLT5mbGFnczsNCiAJCWVwMi0+ZGVudHJ5LnN0cmVhbS5zdGFydF9jbHUg
PSBjcHVfdG9fbGUzMihlaS0+c3RhcnRfY2x1KTsNCkBAIC0yNzYsNiArMjc2LDcgQEAgc3RhdGlj
IGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2RlICppbm9kZSwgc2VjdG9yX3QgaWJsb2Nr
LA0KIAlzZWN0b3JfdCBsYXN0X2Jsb2NrOw0KIAlzZWN0b3JfdCBwaHlzID0gMDsNCiAJbG9mZl90
IHBvczsNCisJc2l6ZV90IGJfc2l6ZSA9IGJoX3Jlc3VsdC0+Yl9zaXplOw0KIA0KIAltdXRleF9s
b2NrKCZzYmktPnNfbG9jayk7DQogCWxhc3RfYmxvY2sgPSBFWEZBVF9CX1RPX0JMS19ST1VORF9V
UChpX3NpemVfcmVhZChpbm9kZSksIHNiKTsNCkBAIC0zMDMsMTcgKzMwNCwyNSBAQCBzdGF0aWMg
aW50IGV4ZmF0X2dldF9ibG9jayhzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzZWN0b3JfdCBpYmxvY2ss
DQogCW1hcHBlZF9ibG9ja3MgPSBzYmktPnNlY3RfcGVyX2NsdXMgLSBzZWNfb2Zmc2V0Ow0KIAlt
YXhfYmxvY2tzID0gbWluKG1hcHBlZF9ibG9ja3MsIG1heF9ibG9ja3MpOw0KIA0KLQkvKiBUcmVh
dCBuZXdseSBhZGRlZCBibG9jayAvIGNsdXN0ZXIgKi8NCi0JaWYgKGlibG9jayA8IGxhc3RfYmxv
Y2spDQotCQljcmVhdGUgPSAwOw0KLQ0KLQlpZiAoY3JlYXRlIHx8IGJ1ZmZlcl9kZWxheShiaF9y
ZXN1bHQpKSB7DQotCQlwb3MgPSBFWEZBVF9CTEtfVE9fQigoaWJsb2NrICsgMSksIHNiKTsNCisJ
cG9zID0gRVhGQVRfQkxLX1RPX0IoKGlibG9jayArIDEpLCBzYik7DQorCWlmICgoY3JlYXRlICYm
IGlibG9jayA+PSBsYXN0X2Jsb2NrKSB8fCBidWZmZXJfZGVsYXkoYmhfcmVzdWx0KSkgew0KIAkJ
aWYgKGVpLT5pX3NpemVfb25kaXNrIDwgcG9zKQ0KIAkJCWVpLT5pX3NpemVfb25kaXNrID0gcG9z
Ow0KIAl9DQogDQorCW1hcF9iaChiaF9yZXN1bHQsIHNiLCBwaHlzKTsNCisJaWYgKGJ1ZmZlcl9k
ZWxheShiaF9yZXN1bHQpKQ0KKwkJY2xlYXJfYnVmZmVyX2RlbGF5KGJoX3Jlc3VsdCk7DQorDQog
CWlmIChjcmVhdGUpIHsNCisJCXNlY3Rvcl90IHZhbGlkX2Jsa3M7DQorDQorCQl2YWxpZF9ibGtz
ID0gRVhGQVRfQl9UT19CTEtfUk9VTkRfVVAoZWktPnZhbGlkX3NpemUsIHNiKTsNCisJCWlmIChp
YmxvY2sgPCB2YWxpZF9ibGtzICYmIGlibG9jayArIG1heF9ibG9ja3MgPj0gdmFsaWRfYmxrcykg
ew0KKwkJCW1heF9ibG9ja3MgPSB2YWxpZF9ibGtzIC0gaWJsb2NrOw0KKwkJCWdvdG8gZG9uZTsN
CisJCX0NCisNCiAJCWVyciA9IGV4ZmF0X21hcF9uZXdfYnVmZmVyKGVpLCBiaF9yZXN1bHQsIHBv
cyk7DQogCQlpZiAoZXJyKSB7DQogCQkJZXhmYXRfZnNfZXJyb3Ioc2IsDQpAQCAtMzIxLDExICsz
MzAsNDAgQEAgc3RhdGljIGludCBleGZhdF9nZXRfYmxvY2soc3RydWN0IGlub2RlICppbm9kZSwg
c2VjdG9yX3QgaWJsb2NrLA0KIAkJCQkJcG9zLCBlaS0+aV9zaXplX2FsaWduZWQpOw0KIAkJCWdv
dG8gdW5sb2NrX3JldDsNCiAJCX0NCi0JfQ0KIA0KLQlpZiAoYnVmZmVyX2RlbGF5KGJoX3Jlc3Vs
dCkpDQotCQljbGVhcl9idWZmZXJfZGVsYXkoYmhfcmVzdWx0KTsNCi0JbWFwX2JoKGJoX3Jlc3Vs
dCwgc2IsIHBoeXMpOw0KKwkJaWYgKHBvcyAtIHNiLT5zX2Jsb2Nrc2l6ZSArIGJfc2l6ZSA+IGVp
LT52YWxpZF9zaXplKSB7DQorCQkJZWktPnZhbGlkX3NpemUgPSBwb3MgLSBzYi0+c19ibG9ja3Np
emUgKyBiX3NpemU7DQorCQkJbWFya19pbm9kZV9kaXJ0eShpbm9kZSk7DQorCQl9DQorCX0gZWxz
ZSB7DQorCQlzaXplX3QgYl9zaXplID0gRVhGQVRfQkxLX1RPX0IobWF4X2Jsb2Nrcywgc2IpOw0K
Kw0KKwkJcG9zID0gRVhGQVRfQkxLX1RPX0IoaWJsb2NrLCBzYik7DQorCQlpZiAocG9zID49IGVp
LT52YWxpZF9zaXplKSB7DQorCQkJLyogUmVhZCBvdXQgb2YgdmFsaWQgZGF0YSAqLw0KKwkJCWNs
ZWFyX2J1ZmZlcl9tYXBwZWQoYmhfcmVzdWx0KTsNCisJCX0gZWxzZSBpZiAocG9zICsgYl9zaXpl
IDw9IGVpLT52YWxpZF9zaXplKSB7DQorCQkJLyogTm9ybWFsIHJlYWQgKi8NCisJCX0gZWxzZSBp
ZiAocG9zICsgc2ItPnNfYmxvY2tzaXplIDw9IGVpLT52YWxpZF9zaXplKSB7DQorCQkJLyogTm9y
bWFsIHNob3J0IHJlYWQgKi8NCisJCQltYXhfYmxvY2tzID0gMTsNCisJCX0gZWxzZSB7DQorCQkJ
LyogUmVhZCBhY3Jvc3MgdmFsaWQgc2l6ZSAqLw0KKwkJCWlmIChiaF9yZXN1bHQtPmJfcGFnZSkg
ew0KKwkJCQlsb2ZmX3Qgc2l6ZSA9IGVpLT52YWxpZF9zaXplIC0gcG9zOw0KKwkJCQlsb2ZmX3Qg
b2ZmID0gcG9zICYgKFBBR0VfU0laRSAtIDEpOw0KKw0KKwkJCQlzZXRfYmhfcGFnZShiaF9yZXN1
bHQsIGJoX3Jlc3VsdC0+Yl9wYWdlLCBvZmYpOw0KKwkJCQllcnIgPSBiaF9yZWFkKGJoX3Jlc3Vs
dCwgMCk7DQorCQkJCWlmIChlcnIgPCAwKQ0KKwkJCQkJZ290byB1bmxvY2tfcmV0Ow0KKw0KKwkJ
CQl6ZXJvX3VzZXJfc2VnbWVudChiaF9yZXN1bHQtPmJfcGFnZSwgb2ZmICsgc2l6ZSwNCisJCQkJ
CQlvZmYgKyBzYi0+c19ibG9ja3NpemUpOw0KKwkJCX0NCisJCQltYXhfYmxvY2tzID0gMTsNCisJ
CX0NCisJfQ0KIGRvbmU6DQogCWJoX3Jlc3VsdC0+Yl9zaXplID0gRVhGQVRfQkxLX1RPX0IobWF4
X2Jsb2Nrcywgc2IpOw0KIHVubG9ja19yZXQ6DQpAQCAtMzQwLDYgKzM3OCwxNyBAQCBzdGF0aWMg
aW50IGV4ZmF0X3JlYWRfZm9saW8oc3RydWN0IGZpbGUgKmZpbGUsIHN0cnVjdCBmb2xpbyAqZm9s
aW8pDQogDQogc3RhdGljIHZvaWQgZXhmYXRfcmVhZGFoZWFkKHN0cnVjdCByZWFkYWhlYWRfY29u
dHJvbCAqcmFjKQ0KIHsNCisJc3RydWN0IGFkZHJlc3Nfc3BhY2UgKm1hcHBpbmcgPSByYWMtPm1h
cHBpbmc7DQorCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBtYXBwaW5nLT5ob3N0Ow0KKwlzdHJ1Y3Qg
ZXhmYXRfaW5vZGVfaW5mbyAqZWkgPSBFWEZBVF9JKGlub2RlKTsNCisJbG9mZl90IHBvcyA9IHJl
YWRhaGVhZF9wb3MocmFjKTsNCisNCisJLyogUmFuZ2UgY3Jvc3MgdmFsaWRfc2l6ZSwgcmVhZCBp
dCBwYWdlIGJ5IHBhZ2UuICovDQorCWlmIChlaS0+dmFsaWRfc2l6ZSA8IGlfc2l6ZV9yZWFkKGlu
b2RlKSAmJg0KKwkgICAgcG9zIDw9IGVpLT52YWxpZF9zaXplICYmDQorCSAgICBlaS0+dmFsaWRf
c2l6ZSA8IHBvcyArIHJlYWRhaGVhZF9sZW5ndGgocmFjKSkNCisJCXJldHVybjsNCisNCiAJbXBh
Z2VfcmVhZGFoZWFkKHJhYywgZXhmYXRfZ2V0X2Jsb2NrKTsNCiB9DQogDQpAQCAtNDEwLDYgKzQ1
OSw4IEBAIHN0YXRpYyBzc2l6ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2Is
IHN0cnVjdCBpb3ZfaXRlciAqaXRlcikNCiB7DQogCXN0cnVjdCBhZGRyZXNzX3NwYWNlICptYXBw
aW5nID0gaW9jYi0+a2lfZmlscC0+Zl9tYXBwaW5nOw0KIAlzdHJ1Y3QgaW5vZGUgKmlub2RlID0g
bWFwcGluZy0+aG9zdDsNCisJc3RydWN0IGV4ZmF0X2lub2RlX2luZm8gKmVpID0gRVhGQVRfSShp
bm9kZSk7DQorCWxvZmZfdCBwb3MgPSBpb2NiLT5raV9wb3M7DQogCWxvZmZfdCBzaXplID0gaW9j
Yi0+a2lfcG9zICsgaW92X2l0ZXJfY291bnQoaXRlcik7DQogCWludCBydyA9IGlvdl9pdGVyX3J3
KGl0ZXIpOw0KIAlzc2l6ZV90IHJldDsNCkBAIC00MzMsOCArNDg0LDIwIEBAIHN0YXRpYyBzc2l6
ZV90IGV4ZmF0X2RpcmVjdF9JTyhzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0cnVjdCBpb3ZfaXRlciAq
aXRlcikNCiAJICogY29uZGl0aW9uIG9mIGV4ZmF0X2dldF9ibG9jaygpIGFuZCAtPnRydW5jYXRl
KCkuDQogCSAqLw0KIAlyZXQgPSBibG9ja2Rldl9kaXJlY3RfSU8oaW9jYiwgaW5vZGUsIGl0ZXIs
IGV4ZmF0X2dldF9ibG9jayk7DQotCWlmIChyZXQgPCAwICYmIChydyAmIFdSSVRFKSkNCi0JCWV4
ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBzaXplKTsNCisJaWYgKHJldCA8IDApIHsNCisJCWlm
IChydyAmIFdSSVRFKQ0KKwkJCWV4ZmF0X3dyaXRlX2ZhaWxlZChtYXBwaW5nLCBzaXplKTsNCisN
CisJCWlmIChyZXQgIT0gLUVJT0NCUVVFVUVEKQ0KKwkJCXJldHVybiByZXQ7DQorCX0gZWxzZQ0K
KwkJc2l6ZSA9IHBvcyArIHJldDsNCisNCisJaWYgKChydyAmIFJFQUQpICYmIHBvcyA8IGVpLT52
YWxpZF9zaXplICYmIGVpLT52YWxpZF9zaXplIDwgc2l6ZSkgew0KKwkJaW92X2l0ZXJfcmV2ZXJ0
KGl0ZXIsIHNpemUgLSBlaS0+dmFsaWRfc2l6ZSk7DQorCQlpb3ZfaXRlcl96ZXJvKHNpemUgLSBl
aS0+dmFsaWRfc2l6ZSwgaXRlcik7DQorCX0NCisNCiAJcmV0dXJuIHJldDsNCiB9DQogDQpAQCAt
NTM0LDYgKzU5Nyw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmlsbF9pbm9kZShzdHJ1Y3QgaW5vZGUg
Kmlub2RlLCBzdHJ1Y3QgZXhmYXRfZGlyX2VudHJ5ICppbmZvKQ0KIAllaS0+c3RhcnRfY2x1ID0g
aW5mby0+c3RhcnRfY2x1Ow0KIAllaS0+ZmxhZ3MgPSBpbmZvLT5mbGFnczsNCiAJZWktPnR5cGUg
PSBpbmZvLT50eXBlOw0KKwllaS0+dmFsaWRfc2l6ZSA9IGluZm8tPnZhbGlkX3NpemU7DQogDQog
CWVpLT52ZXJzaW9uID0gMDsNCiAJZWktPmhpbnRfc3RhdC5laWR4ID0gMDsNCmRpZmYgLS1naXQg
YS9mcy9leGZhdC9uYW1laS5jIGIvZnMvZXhmYXQvbmFtZWkuYw0KaW5kZXggZTBmZjlkMTU2ZjZm
Li5jZWFhNzIwODA0YjkgMTAwNjQ0DQotLS0gYS9mcy9leGZhdC9uYW1laS5jDQorKysgYi9mcy9l
eGZhdC9uYW1laS5jDQpAQCAtMzk1LDYgKzM5NSw3IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZF9l
bXB0eV9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlub2RlLA0KIAkJaV9zaXplX3dyaXRlKGlub2RlLCBz
aXplKTsNCiAJCWVpLT5pX3NpemVfb25kaXNrICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KIAkJZWkt
Pmlfc2l6ZV9hbGlnbmVkICs9IHNiaS0+Y2x1c3Rlcl9zaXplOw0KKwkJZWktPnZhbGlkX3NpemUg
Kz0gc2JpLT5jbHVzdGVyX3NpemU7DQogCQllaS0+ZmxhZ3MgPSBwX2Rpci0+ZmxhZ3M7DQogCQlp
bm9kZS0+aV9ibG9ja3MgKz0gc2JpLT5jbHVzdGVyX3NpemUgPj4gOTsNCiAJfQ0KQEAgLTU0NCw2
ICs1NDUsOCBAQCBzdGF0aWMgaW50IGV4ZmF0X2FkZF9lbnRyeShzdHJ1Y3QgaW5vZGUgKmlub2Rl
LCBjb25zdCBjaGFyICpwYXRoLA0KIAkJaW5mby0+c2l6ZSA9IGNsdV9zaXplOw0KIAkJaW5mby0+
bnVtX3N1YmRpcnMgPSBFWEZBVF9NSU5fU1VCRElSOw0KIAl9DQorCWluZm8tPnZhbGlkX3NpemUg
PSBpbmZvLT5zaXplOw0KKw0KIAltZW1zZXQoJmluZm8tPmNydGltZSwgMCwgc2l6ZW9mKGluZm8t
PmNydGltZSkpOw0KIAltZW1zZXQoJmluZm8tPm10aW1lLCAwLCBzaXplb2YoaW5mby0+bXRpbWUp
KTsNCiAJbWVtc2V0KCZpbmZvLT5hdGltZSwgMCwgc2l6ZW9mKGluZm8tPmF0aW1lKSk7DQpAQCAt
NjQ1LDcgKzY0OCw4IEBAIHN0YXRpYyBpbnQgZXhmYXRfZmluZChzdHJ1Y3QgaW5vZGUgKmRpciwg
c3RydWN0IHFzdHIgKnFuYW1lLA0KIA0KIAlpbmZvLT50eXBlID0gZXhmYXRfZ2V0X2VudHJ5X3R5
cGUoZXApOw0KIAlpbmZvLT5hdHRyID0gbGUxNl90b19jcHUoZXAtPmRlbnRyeS5maWxlLmF0dHIp
Ow0KLQlpbmZvLT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFtLnZhbGlkX3Np
emUpOw0KKwlpbmZvLT52YWxpZF9zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3RyZWFt
LnZhbGlkX3NpemUpOw0KKwlpbmZvLT5zaXplID0gbGU2NF90b19jcHUoZXAyLT5kZW50cnkuc3Ry
ZWFtLnNpemUpOw0KIAlpZiAoKGluZm8tPnR5cGUgPT0gVFlQRV9GSUxFKSAmJiAoaW5mby0+c2l6
ZSA9PSAwKSkgew0KIAkJaW5mby0+ZmxhZ3MgPSBBTExPQ19OT19GQVRfQ0hBSU47DQogCQlpbmZv
LT5zdGFydF9jbHUgPSBFWEZBVF9FT0ZfQ0xVU1RFUjsNCkBAIC0xMjcxLDYgKzEyNzUsNyBAQCBz
dGF0aWMgaW50IF9fZXhmYXRfcmVuYW1lKHN0cnVjdCBpbm9kZSAqb2xkX3BhcmVudF9pbm9kZSwN
CiAJCQl9DQogDQogCQkJaV9zaXplX3dyaXRlKG5ld19pbm9kZSwgMCk7DQorCQkJbmV3X2VpLT52
YWxpZF9zaXplID0gMDsNCiAJCQluZXdfZWktPnN0YXJ0X2NsdSA9IEVYRkFUX0VPRl9DTFVTVEVS
Ow0KIAkJCW5ld19laS0+ZmxhZ3MgPSBBTExPQ19OT19GQVRfQ0hBSU47DQogCQl9DQotLSANCjIu
MjUuMQ0K
